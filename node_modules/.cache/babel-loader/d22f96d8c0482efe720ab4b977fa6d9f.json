{"ast":null,"code":"import _slicedToArray from\"/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _taggedTemplateLiteral from\"/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _styled from\"styled-components\";var _excluded=[\"end\"];var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5;import{Trans}from\"@lingui/react\";import{useCallback,useMemo,useRef,useState}from'react';import{NonfungiblePositionManager,Position}from'@uniswap/v3-sdk';import{PoolState,usePool}from'hooks/usePools';import{useToken}from'hooks/Tokens';import{useV3PositionFromTokenId}from'hooks/useV3Positions';import{Link}from'react-router-dom';import{unwrappedToken}from'utils/unwrappedToken';import{usePositionTokenURI}from'../../hooks/usePositionTokenURI';import{calculateGasMargin}from'../../utils/calculateGasMargin';import{getExplorerLink,ExplorerDataType}from'../../utils/getExplorerLink';import{LoadingRows}from'./styleds';import{AutoColumn}from'components/Column';import{RowBetween,RowFixed}from'components/Row';import DoubleCurrencyLogo from'components/DoubleLogo';import{ExternalLink,HideExtraSmall,TYPE}from'theme';import Badge from'components/Badge';import{ButtonConfirmed,ButtonPrimary,ButtonGray}from'components/Button';import{DarkCard,LightCard}from'components/Card';import CurrencyLogo from'components/CurrencyLogo';import{currencyId}from'utils/currencyId';import{formatCurrencyAmount}from'utils/formatCurrencyAmount';import{useV3PositionFees}from'hooks/useV3PositionFees';import{BigNumber}from'@ethersproject/bignumber';import{Percent,Fraction}from'@uniswap/sdk-core';import{useActiveWeb3React}from'hooks/web3';import{useV3NFTPositionManagerContract}from'hooks/useContract';import{useIsTransactionPending,useTransactionAdder}from'state/transactions/hooks';import ReactGA from'react-ga';import TransactionConfirmationModal,{ConfirmationModalContent}from'components/TransactionConfirmationModal';import{Dots}from'components/swap/styleds';import{getPriceOrderingFromPositionForUI}from'../../components/PositionListItem';import useTheme from'../../hooks/useTheme';import RateToggle from'../../components/RateToggle';import{useSingleCallResult}from'state/multicall/hooks';import RangeBadge from'../../components/Badge/RangeBadge';import{SwitchLocaleLink}from'../../components/SwitchLocaleLink';import useUSDCPrice from'hooks/useUSDCPrice';import Loader from'components/Loader';import Toggle from'components/Toggle';import{Bound}from'state/mint/v3/actions';import useIsTickAtLimit from'hooks/useIsTickAtLimit';import{formatTickPrice}from'utils/formatTickPrice';import{SupportedChainId}from'constants/chains';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var PageWrapper=_styled.div.withConfig({componentId:\"sc-z20cv-0\"})([\"min-width:800px;max-width:960px;\",\";\",\";@media only screen and (max-width:620px){min-width:500px;max-width:500px;}\",\";\"],function(_ref){var theme=_ref.theme;return theme.mediaWidth.upToMedium(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    min-width: 680px;\\n    max-width: 680px;\\n  \"])));},function(_ref2){var theme=_ref2.theme;return theme.mediaWidth.upToSmall(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n    min-width: 600px;\\n    max-width: 600px;\\n  \"])));},function(_ref3){var theme=_ref3.theme;return theme.mediaWidth.upToExtraSmall(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n    min-width: 340px;\\n    max-width: 340px;\\n  \"])));});var BadgeText=_styled.div.withConfig({componentId:\"sc-z20cv-1\"})([\"font-weight:500;font-size:14px;\"]);// responsive text\n// disable the warning because we don't use the end prop, we just want to filter it out\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nvar Label=_styled(function(_ref4){var end=_ref4.end,props=_objectWithoutProperties(_ref4,_excluded);return/*#__PURE__*/_jsx(TYPE.label,_objectSpread({},props));}).withConfig({componentId:\"sc-z20cv-2\"})([\"display:flex;font-size:16px;justify-content:\",\";align-items:center;\"],function(_ref5){var end=_ref5.end;return end?'flex-end':'flex-start';});var ExtentsText=_styled.span.withConfig({componentId:\"sc-z20cv-3\"})([\"color:\",\";font-size:14px;text-align:center;margin-right:4px;font-weight:500;\"],function(_ref6){var theme=_ref6.theme;return theme.text2;});var HoverText=_styled(TYPE.main).withConfig({componentId:\"sc-z20cv-4\"})([\"text-decoration:none;color:\",\";:hover{color:\",\";text-decoration:none;}\"],function(_ref7){var theme=_ref7.theme;return theme.text3;},function(_ref8){var theme=_ref8.theme;return theme.text1;});var DoubleArrow=_styled.span.withConfig({componentId:\"sc-z20cv-5\"})([\"color:\",\";margin:0 1rem;\"],function(_ref9){var theme=_ref9.theme;return theme.text3;});var ResponsiveRow=_styled(RowBetween).withConfig({componentId:\"sc-z20cv-6\"})([\"\",\";\"],function(_ref10){var theme=_ref10.theme;return theme.mediaWidth.upToSmall(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n    flex-direction: column;\\n    align-items: flex-start;\\n    row-gap: 16px;\\n    width: 100%:\\n  \"])));});var ResponsiveButtonPrimary=_styled(ButtonPrimary).withConfig({componentId:\"sc-z20cv-7\"})([\"border-radius:12px;padding:6px 8px;width:fit-content;\",\";\"],function(_ref11){var theme=_ref11.theme;return theme.mediaWidth.upToSmall(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n    flex: 1 1 auto;\\n    width: 49%;\\n  \"])));});var NFTGrid=_styled.div.withConfig({componentId:\"sc-z20cv-8\"})([\"display:grid;grid-template:'overlap';min-height:400px;\"]);var NFTCanvas=_styled.canvas.withConfig({componentId:\"sc-z20cv-9\"})([\"grid-area:overlap;\"]);var NFTImage=_styled.img.withConfig({componentId:\"sc-z20cv-10\"})([\"grid-area:overlap;height:400px;z-index:1;\"]);function CurrentPriceCard(_ref12){var inverted=_ref12.inverted,pool=_ref12.pool,currencyQuote=_ref12.currencyQuote,currencyBase=_ref12.currencyBase;if(!pool||!currencyQuote||!currencyBase){return null;}return/*#__PURE__*/_jsx(LightCard,{padding:\"12px \",children:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"8px\",justify:\"center\",children:[/*#__PURE__*/_jsx(ExtentsText,{children:/*#__PURE__*/_jsx(Trans,{id:\"Current price\"})}),/*#__PURE__*/_jsxs(TYPE.mediumHeader,{textAlign:\"center\",children:[(inverted?pool.token1Price:pool.token0Price).toSignificant(6),' ']}),/*#__PURE__*/_jsx(ExtentsText,{children:/*#__PURE__*/_jsx(Trans,{id:\"{0} per {1}\",values:{0:currencyQuote===null||currencyQuote===void 0?void 0:currencyQuote.symbol,1:currencyBase===null||currencyBase===void 0?void 0:currencyBase.symbol}})})]})});}function LinkedCurrency(_ref13){var chainId=_ref13.chainId,currency=_ref13.currency;var address=currency===null||currency===void 0?void 0:currency.address;if(typeof chainId==='number'&&address){return/*#__PURE__*/_jsx(ExternalLink,{href:getExplorerLink(chainId,address,ExplorerDataType.TOKEN),children:/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(CurrencyLogo,{currency:currency,size:'20px',style:{marginRight:'0.5rem'}}),/*#__PURE__*/_jsxs(TYPE.main,{children:[currency===null||currency===void 0?void 0:currency.symbol,\" \\u2197\"]})]})});}return/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(CurrencyLogo,{currency:currency,size:'20px',style:{marginRight:'0.5rem'}}),/*#__PURE__*/_jsx(TYPE.main,{children:currency===null||currency===void 0?void 0:currency.symbol})]});}function getRatio(lower,current,upper){try{if(!current.greaterThan(lower)){return 100;}else if(!current.lessThan(upper)){return 0;}var a=Number.parseFloat(lower.toSignificant(15));var b=Number.parseFloat(upper.toSignificant(15));var c=Number.parseFloat(current.toSignificant(15));var ratio=Math.floor(1/((Math.sqrt(a*b)-Math.sqrt(b*c))/(c-Math.sqrt(b*c))+1)*100);if(ratio<0||ratio>100){throw Error('Out of range');}return ratio;}catch(_unused){return undefined;}}// snapshots a src img into a canvas\nfunction getSnapshot(src,canvas,targetHeight){var context=canvas.getContext('2d');if(context){var width=src.width,height=src.height;// src may be hidden and not have the target dimensions\nvar ratio=width/height;height=targetHeight;width=Math.round(ratio*targetHeight);// Ensure crispness at high DPIs\ncanvas.width=width*devicePixelRatio;canvas.height=height*devicePixelRatio;canvas.style.width=width+'px';canvas.style.height=height+'px';context.scale(devicePixelRatio,devicePixelRatio);context.clearRect(0,0,width,height);context.drawImage(src,0,0,width,height);}}function NFT(_ref14){var image=_ref14.image,targetHeight=_ref14.height;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),animate=_useState2[0],setAnimate=_useState2[1];var canvasRef=useRef(null);var imageRef=useRef(null);return/*#__PURE__*/_jsxs(NFTGrid,{onMouseEnter:function onMouseEnter(){setAnimate(true);},onMouseLeave:function onMouseLeave(){// snapshot the current frame so the transition to the canvas is smooth\nif(imageRef.current&&canvasRef.current){getSnapshot(imageRef.current,canvasRef.current,targetHeight);}setAnimate(false);},children:[/*#__PURE__*/_jsx(NFTCanvas,{ref:canvasRef}),/*#__PURE__*/_jsx(NFTImage,{ref:imageRef,src:image,hidden:!animate,onLoad:function onLoad(){// snapshot for the canvas\nif(imageRef.current&&canvasRef.current){getSnapshot(imageRef.current,canvasRef.current,targetHeight);}}})]});}var useInverter=function useInverter(_ref15){var priceLower=_ref15.priceLower,priceUpper=_ref15.priceUpper,quote=_ref15.quote,base=_ref15.base,invert=_ref15.invert;return{priceUpper:invert?priceLower===null||priceLower===void 0?void 0:priceLower.invert():priceUpper,priceLower:invert?priceUpper===null||priceUpper===void 0?void 0:priceUpper.invert():priceLower,quote:invert?base:quote,base:invert?quote:base};};export function PositionPage(_ref16){var _useSingleCallResult$,_feeValueUpper$curren2,_feeValueLower$curren2;var tokenIdFromUrl=_ref16.match.params.tokenId;var _useActiveWeb3React=useActiveWeb3React(),chainId=_useActiveWeb3React.chainId,account=_useActiveWeb3React.account,library=_useActiveWeb3React.library;var theme=useTheme();var parsedTokenId=tokenIdFromUrl?BigNumber.from(tokenIdFromUrl):undefined;var _useV3PositionFromTok=useV3PositionFromTokenId(parsedTokenId),loading=_useV3PositionFromTok.loading,positionDetails=_useV3PositionFromTok.position;var _ref17=positionDetails||{},token0Address=_ref17.token0,token1Address=_ref17.token1,feeAmount=_ref17.fee,liquidity=_ref17.liquidity,tickLower=_ref17.tickLower,tickUpper=_ref17.tickUpper,tokenId=_ref17.tokenId;var removed=liquidity===null||liquidity===void 0?void 0:liquidity.eq(0);var token0=useToken(token0Address);var token1=useToken(token1Address);var metadata=usePositionTokenURI(parsedTokenId);var currency0=token0?unwrappedToken(token0):undefined;var currency1=token1?unwrappedToken(token1):undefined;// flag for receiving WETH\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),receiveWETH=_useState4[0],setReceiveWETH=_useState4[1];// construct Position from details returned\nvar _usePool=usePool(token0!==null&&token0!==void 0?token0:undefined,token1!==null&&token1!==void 0?token1:undefined,feeAmount),_usePool2=_slicedToArray(_usePool,2),poolState=_usePool2[0],pool=_usePool2[1];var position=useMemo(function(){if(pool&&liquidity&&typeof tickLower==='number'&&typeof tickUpper==='number'){return new Position({pool:pool,liquidity:liquidity.toString(),tickLower:tickLower,tickUpper:tickUpper});}return undefined;},[liquidity,pool,tickLower,tickUpper]);var tickAtLimit=useIsTickAtLimit(feeAmount,tickLower,tickUpper);var pricesFromPosition=getPriceOrderingFromPositionForUI(position);var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),manuallyInverted=_useState6[0],setManuallyInverted=_useState6[1];// handle manual inversion\nvar _useInverter=useInverter({priceLower:pricesFromPosition.priceLower,priceUpper:pricesFromPosition.priceUpper,quote:pricesFromPosition.quote,base:pricesFromPosition.base,invert:manuallyInverted}),priceLower=_useInverter.priceLower,priceUpper=_useInverter.priceUpper,base=_useInverter.base;var inverted=token1?base===null||base===void 0?void 0:base.equals(token1):undefined;var currencyQuote=inverted?currency0:currency1;var currencyBase=inverted?currency1:currency0;var ratio=useMemo(function(){return priceLower&&pool&&priceUpper?getRatio(inverted?priceUpper.invert():priceLower,pool.token0Price,inverted?priceLower.invert():priceUpper):undefined;},[inverted,pool,priceLower,priceUpper]);// fees\nvar _useV3PositionFees=useV3PositionFees(pool!==null&&pool!==void 0?pool:undefined,positionDetails===null||positionDetails===void 0?void 0:positionDetails.tokenId,receiveWETH),_useV3PositionFees2=_slicedToArray(_useV3PositionFees,2),feeValue0=_useV3PositionFees2[0],feeValue1=_useV3PositionFees2[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),collecting=_useState8[0],setCollecting=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),collectMigrationHash=_useState10[0],setCollectMigrationHash=_useState10[1];var isCollectPending=useIsTransactionPending(collectMigrationHash!==null&&collectMigrationHash!==void 0?collectMigrationHash:undefined);var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),showConfirm=_useState12[0],setShowConfirm=_useState12[1];// usdc prices always in terms of tokens\nvar price0=useUSDCPrice(token0!==null&&token0!==void 0?token0:undefined);var price1=useUSDCPrice(token1!==null&&token1!==void 0?token1:undefined);var fiatValueOfFees=useMemo(function(){if(!price0||!price1||!feeValue0||!feeValue1)return null;// we wrap because it doesn't matter, the quote returns a USDC amount\nvar feeValue0Wrapped=feeValue0===null||feeValue0===void 0?void 0:feeValue0.wrapped;var feeValue1Wrapped=feeValue1===null||feeValue1===void 0?void 0:feeValue1.wrapped;if(!feeValue0Wrapped||!feeValue1Wrapped)return null;var amount0=price0.quote(feeValue0Wrapped);var amount1=price1.quote(feeValue1Wrapped);return amount0.add(amount1);},[price0,price1,feeValue0,feeValue1]);var fiatValueOfLiquidity=useMemo(function(){if(!price0||!price1||!position)return null;var amount0=price0.quote(position.amount0);var amount1=price1.quote(position.amount1);return amount0.add(amount1);},[price0,price1,position]);var addTransaction=useTransactionAdder();var positionManager=useV3NFTPositionManagerContract();var collect=useCallback(function(){if(!chainId||!feeValue0||!feeValue1||!positionManager||!account||!tokenId||!library)return;setCollecting(true);var _NonfungiblePositionM=NonfungiblePositionManager.collectCallParameters({tokenId:tokenId.toString(),expectedCurrencyOwed0:feeValue0,expectedCurrencyOwed1:feeValue1,recipient:account}),calldata=_NonfungiblePositionM.calldata,value=_NonfungiblePositionM.value;var txn={to:positionManager.address,data:calldata,value:value};library.getSigner().estimateGas(txn).then(function(estimate){var newTxn=_objectSpread(_objectSpread({},txn),{},{gasLimit:calculateGasMargin(chainId,estimate)});return library.getSigner().sendTransaction(newTxn).then(function(response){setCollectMigrationHash(response.hash);setCollecting(false);ReactGA.event({category:'Liquidity',action:'CollectV3',label:[feeValue0.currency.symbol,feeValue1.currency.symbol].join('/')});addTransaction(response,{summary:\"Collect \".concat(feeValue0.currency.symbol,\"/\").concat(feeValue1.currency.symbol,\" fees\")});});}).catch(function(error){setCollecting(false);console.error(error);});},[chainId,feeValue0,feeValue1,positionManager,account,tokenId,addTransaction,library]);var owner=(_useSingleCallResult$=useSingleCallResult(!!tokenId?positionManager:null,'ownerOf',[tokenId]).result)===null||_useSingleCallResult$===void 0?void 0:_useSingleCallResult$[0];var ownsNFT=owner===account||(positionDetails===null||positionDetails===void 0?void 0:positionDetails.operator)===account;var feeValueUpper=inverted?feeValue0:feeValue1;var feeValueLower=inverted?feeValue1:feeValue0;// check if price is within range\nvar below=pool&&typeof tickLower==='number'?pool.tickCurrent<tickLower:undefined;var above=pool&&typeof tickUpper==='number'?pool.tickCurrent>=tickUpper:undefined;var inRange=typeof below==='boolean'&&typeof above==='boolean'?!below&&!above:false;function modalHeader(){var _feeValueUpper$curren,_feeValueLower$curren;return/*#__PURE__*/_jsxs(AutoColumn,{gap:'md',style:{marginTop:'20px'},children:[/*#__PURE__*/_jsx(LightCard,{padding:\"12px 16px\",children:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"md\",children:[/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(CurrencyLogo,{currency:feeValueUpper===null||feeValueUpper===void 0?void 0:feeValueUpper.currency,size:'20px',style:{marginRight:'0.5rem'}}),/*#__PURE__*/_jsx(TYPE.main,{children:feeValueUpper?formatCurrencyAmount(feeValueUpper,4):'-'})]}),/*#__PURE__*/_jsx(TYPE.main,{children:feeValueUpper===null||feeValueUpper===void 0?void 0:(_feeValueUpper$curren=feeValueUpper.currency)===null||_feeValueUpper$curren===void 0?void 0:_feeValueUpper$curren.symbol})]}),/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(CurrencyLogo,{currency:feeValueLower===null||feeValueLower===void 0?void 0:feeValueLower.currency,size:'20px',style:{marginRight:'0.5rem'}}),/*#__PURE__*/_jsx(TYPE.main,{children:feeValueLower?formatCurrencyAmount(feeValueLower,4):'-'})]}),/*#__PURE__*/_jsx(TYPE.main,{children:feeValueLower===null||feeValueLower===void 0?void 0:(_feeValueLower$curren=feeValueLower.currency)===null||_feeValueLower$curren===void 0?void 0:_feeValueLower$curren.symbol})]})]})}),/*#__PURE__*/_jsx(TYPE.italic,{children:/*#__PURE__*/_jsx(Trans,{id:\"Collecting fees will withdraw currently available fees for you.\"})}),/*#__PURE__*/_jsx(ButtonPrimary,{onClick:collect,children:/*#__PURE__*/_jsx(Trans,{id:\"Collect\"})})]});}var onOptimisticChain=chainId&&[SupportedChainId.OPTIMISM,SupportedChainId.OPTIMISTIC_KOVAN].includes(chainId);var showCollectAsWeth=Boolean(ownsNFT&&((feeValue0===null||feeValue0===void 0?void 0:feeValue0.greaterThan(0))||(feeValue1===null||feeValue1===void 0?void 0:feeValue1.greaterThan(0)))&&currency0&&currency1&&(currency0.isNative||currency1.isNative)&&!collectMigrationHash&&!onOptimisticChain);return loading||poolState===PoolState.LOADING||!feeAmount?/*#__PURE__*/_jsxs(LoadingRows,{children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(PageWrapper,{children:[/*#__PURE__*/_jsx(TransactionConfirmationModal,{isOpen:showConfirm,onDismiss:function onDismiss(){return setShowConfirm(false);},attemptingTxn:collecting,hash:collectMigrationHash!==null&&collectMigrationHash!==void 0?collectMigrationHash:'',content:function content(){return/*#__PURE__*/_jsx(ConfirmationModalContent,{title:/*#__PURE__*/_jsx(Trans,{id:\"Claim fees\"}),onDismiss:function onDismiss(){return setShowConfirm(false);},topContent:modalHeader});},pendingText:/*#__PURE__*/_jsx(Trans,{id:\"Collecting fees\"})}),/*#__PURE__*/_jsxs(AutoColumn,{gap:\"md\",children:[/*#__PURE__*/_jsxs(AutoColumn,{gap:\"sm\",children:[/*#__PURE__*/_jsx(Link,{style:{textDecoration:'none',width:'fit-content',marginBottom:'0.5rem'},to:\"/pool\",children:/*#__PURE__*/_jsx(HoverText,{children:/*#__PURE__*/_jsx(Trans,{id:\"\\u2190 Back to Pools Overview\"})})}),/*#__PURE__*/_jsxs(ResponsiveRow,{children:[/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(DoubleCurrencyLogo,{currency0:currencyBase,currency1:currencyQuote,size:24,margin:true}),/*#__PURE__*/_jsxs(TYPE.label,{fontSize:'24px',mr:\"10px\",children:[\"\\xA0\",currencyQuote===null||currencyQuote===void 0?void 0:currencyQuote.symbol,\"\\xA0/\\xA0\",currencyBase===null||currencyBase===void 0?void 0:currencyBase.symbol]}),/*#__PURE__*/_jsx(Badge,{style:{marginRight:'8px'},children:/*#__PURE__*/_jsx(BadgeText,{children:/*#__PURE__*/_jsx(Trans,{id:\"{0}%\",values:{0:new Percent(feeAmount,1000000).toSignificant()}})})}),/*#__PURE__*/_jsx(RangeBadge,{removed:removed,inRange:inRange})]}),ownsNFT&&/*#__PURE__*/_jsxs(RowFixed,{children:[currency0&&currency1&&feeAmount&&tokenId?/*#__PURE__*/_jsx(ButtonGray,{as:Link,to:\"/increase/\".concat(currencyId(currency0),\"/\").concat(currencyId(currency1),\"/\").concat(feeAmount,\"/\").concat(tokenId),width:\"fit-content\",padding:\"6px 8px\",$borderRadius:\"12px\",style:{marginRight:'8px'},children:/*#__PURE__*/_jsx(Trans,{id:\"Increase Liquidity\"})}):null,tokenId&&!removed?/*#__PURE__*/_jsx(ResponsiveButtonPrimary,{as:Link,to:\"/remove/\".concat(tokenId),width:\"fit-content\",padding:\"6px 8px\",$borderRadius:\"12px\",children:/*#__PURE__*/_jsx(Trans,{id:\"Remove Liquidity\"})}):null]})]}),/*#__PURE__*/_jsx(RowBetween,{})]}),/*#__PURE__*/_jsxs(ResponsiveRow,{align:\"flex-start\",children:['result'in metadata?/*#__PURE__*/_jsxs(DarkCard,{width:\"100%\",height:\"100%\",style:{display:'flex',alignItems:'center',flexDirection:'column',justifyContent:'space-around',marginRight:'12px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{marginRight:12},children:/*#__PURE__*/_jsx(NFT,{image:metadata.result.image,height:400})}),typeof chainId==='number'&&owner&&!ownsNFT?/*#__PURE__*/_jsx(ExternalLink,{href:getExplorerLink(chainId,owner,ExplorerDataType.ADDRESS),children:/*#__PURE__*/_jsx(Trans,{id:\"Owner\"})}):null]}):/*#__PURE__*/_jsx(DarkCard,{width:\"100%\",height:\"100%\",style:{marginRight:'12px',minWidth:'340px'},children:/*#__PURE__*/_jsx(Loader,{})}),/*#__PURE__*/_jsxs(AutoColumn,{gap:\"sm\",style:{width:'100%',height:'100%'},children:[/*#__PURE__*/_jsx(DarkCard,{children:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"md\",style:{width:'100%'},children:[/*#__PURE__*/_jsxs(AutoColumn,{gap:\"md\",children:[/*#__PURE__*/_jsx(Label,{children:/*#__PURE__*/_jsx(Trans,{id:\"Liquidity\"})}),(fiatValueOfLiquidity===null||fiatValueOfLiquidity===void 0?void 0:fiatValueOfLiquidity.greaterThan(new Fraction(1,100)))?/*#__PURE__*/_jsx(TYPE.largeHeader,{fontSize:\"36px\",fontWeight:500,children:/*#__PURE__*/_jsx(Trans,{id:\"${0}\",values:{0:fiatValueOfLiquidity.toFixed(2,{groupSeparator:','})}})}):/*#__PURE__*/_jsx(TYPE.largeHeader,{color:theme.text1,fontSize:\"36px\",fontWeight:500,children:/*#__PURE__*/_jsx(Trans,{id:\"$-\"})})]}),/*#__PURE__*/_jsx(LightCard,{padding:\"12px 16px\",children:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"md\",children:[/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(LinkedCurrency,{chainId:chainId,currency:currencyQuote}),/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(TYPE.main,{children:inverted?position===null||position===void 0?void 0:position.amount0.toSignificant(4):position===null||position===void 0?void 0:position.amount1.toSignificant(4)}),typeof ratio==='number'&&!removed?/*#__PURE__*/_jsx(Badge,{style:{marginLeft:'10px'},children:/*#__PURE__*/_jsx(TYPE.main,{fontSize:11,children:/*#__PURE__*/_jsx(Trans,{id:\"{0}%\",values:{0:inverted?ratio:100-ratio}})})}):null]})]}),/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(LinkedCurrency,{chainId:chainId,currency:currencyBase}),/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(TYPE.main,{children:inverted?position===null||position===void 0?void 0:position.amount1.toSignificant(4):position===null||position===void 0?void 0:position.amount0.toSignificant(4)}),typeof ratio==='number'&&!removed?/*#__PURE__*/_jsx(Badge,{style:{marginLeft:'10px'},children:/*#__PURE__*/_jsx(TYPE.main,{color:theme.text2,fontSize:11,children:/*#__PURE__*/_jsx(Trans,{id:\"{0}%\",values:{0:inverted?100-ratio:ratio}})})}):null]})]})]})})]})}),/*#__PURE__*/_jsx(DarkCard,{children:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"md\",style:{width:'100%'},children:[/*#__PURE__*/_jsx(AutoColumn,{gap:\"md\",children:/*#__PURE__*/_jsxs(RowBetween,{style:{alignItems:'flex-start'},children:[/*#__PURE__*/_jsxs(AutoColumn,{gap:\"md\",children:[/*#__PURE__*/_jsx(Label,{children:/*#__PURE__*/_jsx(Trans,{id:\"Unclaimed fees\"})}),(fiatValueOfFees===null||fiatValueOfFees===void 0?void 0:fiatValueOfFees.greaterThan(new Fraction(1,100)))?/*#__PURE__*/_jsx(TYPE.largeHeader,{color:theme.green1,fontSize:\"36px\",fontWeight:500,children:/*#__PURE__*/_jsx(Trans,{id:\"${0}\",values:{0:fiatValueOfFees.toFixed(2,{groupSeparator:','})}})}):/*#__PURE__*/_jsx(TYPE.largeHeader,{color:theme.text1,fontSize:\"36px\",fontWeight:500,children:/*#__PURE__*/_jsx(Trans,{id:\"$-\"})})]}),ownsNFT&&((feeValue0===null||feeValue0===void 0?void 0:feeValue0.greaterThan(0))||(feeValue1===null||feeValue1===void 0?void 0:feeValue1.greaterThan(0))||!!collectMigrationHash)?/*#__PURE__*/_jsx(ButtonConfirmed,{disabled:collecting||!!collectMigrationHash,confirmed:!!collectMigrationHash&&!isCollectPending,width:\"fit-content\",style:{borderRadius:'12px'},padding:\"4px 8px\",onClick:function onClick(){return setShowConfirm(true);},children:!!collectMigrationHash&&!isCollectPending?/*#__PURE__*/_jsx(TYPE.main,{color:theme.text1,children:/*#__PURE__*/_jsx(Trans,{id:\"Collected\"})}):isCollectPending||collecting?/*#__PURE__*/_jsxs(TYPE.main,{color:theme.text1,children:[' ',/*#__PURE__*/_jsx(Dots,{children:/*#__PURE__*/_jsx(Trans,{id:\"Collecting\"})})]}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(TYPE.main,{color:theme.white,children:/*#__PURE__*/_jsx(Trans,{id:\"Collect fees\"})})})}):null]})}),/*#__PURE__*/_jsx(LightCard,{padding:\"12px 16px\",children:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"md\",children:[/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(CurrencyLogo,{currency:feeValueUpper===null||feeValueUpper===void 0?void 0:feeValueUpper.currency,size:'20px',style:{marginRight:'0.5rem'}}),/*#__PURE__*/_jsx(TYPE.main,{children:feeValueUpper===null||feeValueUpper===void 0?void 0:(_feeValueUpper$curren2=feeValueUpper.currency)===null||_feeValueUpper$curren2===void 0?void 0:_feeValueUpper$curren2.symbol})]}),/*#__PURE__*/_jsx(RowFixed,{children:/*#__PURE__*/_jsx(TYPE.main,{children:feeValueUpper?formatCurrencyAmount(feeValueUpper,4):'-'})})]}),/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(CurrencyLogo,{currency:feeValueLower===null||feeValueLower===void 0?void 0:feeValueLower.currency,size:'20px',style:{marginRight:'0.5rem'}}),/*#__PURE__*/_jsx(TYPE.main,{children:feeValueLower===null||feeValueLower===void 0?void 0:(_feeValueLower$curren2=feeValueLower.currency)===null||_feeValueLower$curren2===void 0?void 0:_feeValueLower$curren2.symbol})]}),/*#__PURE__*/_jsx(RowFixed,{children:/*#__PURE__*/_jsx(TYPE.main,{children:feeValueLower?formatCurrencyAmount(feeValueLower,4):'-'})})]})]})}),showCollectAsWeth&&/*#__PURE__*/_jsx(AutoColumn,{gap:\"md\",children:/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(TYPE.main,{children:/*#__PURE__*/_jsx(Trans,{id:\"Collect as WETH\"})}),/*#__PURE__*/_jsx(Toggle,{id:\"receive-as-weth\",isActive:receiveWETH,toggle:function toggle(){return setReceiveWETH(function(receiveWETH){return!receiveWETH;});}})]})})]})})]})]}),/*#__PURE__*/_jsx(DarkCard,{children:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"md\",children:[/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(Label,{display:\"flex\",style:{marginRight:'12px'},children:/*#__PURE__*/_jsx(Trans,{id:\"Price range\"})}),/*#__PURE__*/_jsx(HideExtraSmall,{children:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(RangeBadge,{removed:removed,inRange:inRange}),/*#__PURE__*/_jsx(\"span\",{style:{width:'8px'}})]})})]}),/*#__PURE__*/_jsx(RowFixed,{children:currencyBase&&currencyQuote&&/*#__PURE__*/_jsx(RateToggle,{currencyA:currencyBase,currencyB:currencyQuote,handleRateToggle:function handleRateToggle(){return setManuallyInverted(!manuallyInverted);}})})]}),/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(LightCard,{padding:\"12px\",width:\"100%\",children:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"8px\",justify:\"center\",children:[/*#__PURE__*/_jsx(ExtentsText,{children:/*#__PURE__*/_jsx(Trans,{id:\"Min price\"})}),/*#__PURE__*/_jsx(TYPE.mediumHeader,{textAlign:\"center\",children:formatTickPrice(priceLower,tickAtLimit,Bound.LOWER)}),/*#__PURE__*/_jsxs(ExtentsText,{children:[' ',/*#__PURE__*/_jsx(Trans,{id:\"{0} per {1}\",values:{0:currencyQuote===null||currencyQuote===void 0?void 0:currencyQuote.symbol,1:currencyBase===null||currencyBase===void 0?void 0:currencyBase.symbol}})]}),inRange&&/*#__PURE__*/_jsx(TYPE.small,{color:theme.text3,children:/*#__PURE__*/_jsx(Trans,{id:\"Your position will be 100% {0} at this price.\",values:{0:currencyBase===null||currencyBase===void 0?void 0:currencyBase.symbol}})})]})}),/*#__PURE__*/_jsx(DoubleArrow,{children:\"\\u27F7\"}),/*#__PURE__*/_jsx(LightCard,{padding:\"12px\",width:\"100%\",children:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"8px\",justify:\"center\",children:[/*#__PURE__*/_jsx(ExtentsText,{children:/*#__PURE__*/_jsx(Trans,{id:\"Max price\"})}),/*#__PURE__*/_jsx(TYPE.mediumHeader,{textAlign:\"center\",children:formatTickPrice(priceUpper,tickAtLimit,Bound.UPPER)}),/*#__PURE__*/_jsxs(ExtentsText,{children:[' ',/*#__PURE__*/_jsx(Trans,{id:\"{0} per {1}\",values:{0:currencyQuote===null||currencyQuote===void 0?void 0:currencyQuote.symbol,1:currencyBase===null||currencyBase===void 0?void 0:currencyBase.symbol}})]}),inRange&&/*#__PURE__*/_jsx(TYPE.small,{color:theme.text3,children:/*#__PURE__*/_jsx(Trans,{id:\"Your position will be 100% {0} at this price.\",values:{0:currencyQuote===null||currencyQuote===void 0?void 0:currencyQuote.symbol}})})]})})]}),/*#__PURE__*/_jsx(CurrentPriceCard,{inverted:inverted,pool:pool,currencyQuote:currencyQuote,currencyBase:currencyBase})]})})]})]}),/*#__PURE__*/_jsx(SwitchLocaleLink,{})]});}","map":{"version":3,"sources":["/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/src/pages/Pool/PositionPage.tsx"],"names":["useCallback","useMemo","useRef","useState","NonfungiblePositionManager","Position","PoolState","usePool","useToken","useV3PositionFromTokenId","Link","unwrappedToken","usePositionTokenURI","calculateGasMargin","getExplorerLink","ExplorerDataType","LoadingRows","AutoColumn","RowBetween","RowFixed","DoubleCurrencyLogo","ExternalLink","HideExtraSmall","TYPE","Badge","ButtonConfirmed","ButtonPrimary","ButtonGray","DarkCard","LightCard","CurrencyLogo","currencyId","formatCurrencyAmount","useV3PositionFees","BigNumber","Percent","Fraction","useActiveWeb3React","useV3NFTPositionManagerContract","useIsTransactionPending","useTransactionAdder","ReactGA","TransactionConfirmationModal","ConfirmationModalContent","Dots","getPriceOrderingFromPositionForUI","useTheme","RateToggle","useSingleCallResult","RangeBadge","SwitchLocaleLink","useUSDCPrice","Loader","Toggle","Bound","useIsTickAtLimit","formatTickPrice","SupportedChainId","PageWrapper","styled","div","theme","mediaWidth","upToMedium","upToSmall","upToExtraSmall","BadgeText","Label","end","props","ExtentsText","span","text2","HoverText","main","text3","text1","DoubleArrow","ResponsiveRow","ResponsiveButtonPrimary","NFTGrid","NFTCanvas","canvas","NFTImage","img","CurrentPriceCard","inverted","pool","currencyQuote","currencyBase","token1Price","token0Price","toSignificant","symbol","LinkedCurrency","chainId","currency","address","TOKEN","marginRight","getRatio","lower","current","upper","greaterThan","lessThan","a","Number","parseFloat","b","c","ratio","Math","floor","sqrt","Error","undefined","getSnapshot","src","targetHeight","context","getContext","width","height","round","devicePixelRatio","style","scale","clearRect","drawImage","NFT","image","animate","setAnimate","canvasRef","imageRef","useInverter","priceLower","priceUpper","quote","base","invert","PositionPage","tokenIdFromUrl","match","params","tokenId","account","library","parsedTokenId","from","loading","positionDetails","position","token0Address","token0","token1Address","token1","feeAmount","fee","liquidity","tickLower","tickUpper","removed","eq","metadata","currency0","currency1","receiveWETH","setReceiveWETH","poolState","toString","tickAtLimit","pricesFromPosition","manuallyInverted","setManuallyInverted","equals","feeValue0","feeValue1","collecting","setCollecting","collectMigrationHash","setCollectMigrationHash","isCollectPending","showConfirm","setShowConfirm","price0","price1","fiatValueOfFees","feeValue0Wrapped","wrapped","feeValue1Wrapped","amount0","amount1","add","fiatValueOfLiquidity","addTransaction","positionManager","collect","collectCallParameters","expectedCurrencyOwed0","expectedCurrencyOwed1","recipient","calldata","value","txn","to","data","getSigner","estimateGas","then","estimate","newTxn","gasLimit","sendTransaction","response","hash","event","category","action","label","join","summary","catch","error","console","owner","result","ownsNFT","operator","feeValueUpper","feeValueLower","below","tickCurrent","above","inRange","modalHeader","marginTop","onOptimisticChain","OPTIMISM","OPTIMISTIC_KOVAN","includes","showCollectAsWeth","Boolean","isNative","LOADING","textDecoration","marginBottom","display","alignItems","flexDirection","justifyContent","ADDRESS","minWidth","toFixed","groupSeparator","marginLeft","green1","borderRadius","white","LOWER","UPPER"],"mappings":"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","sourcesContent":["import { useCallback, useMemo, useRef, useState } from 'react'\nimport { NonfungiblePositionManager, Pool, Position } from '@uniswap/v3-sdk'\n\nimport { PoolState, usePool } from 'hooks/usePools'\nimport { useToken } from 'hooks/Tokens'\nimport { useV3PositionFromTokenId } from 'hooks/useV3Positions'\nimport { Link, RouteComponentProps } from 'react-router-dom'\nimport { unwrappedToken } from 'utils/unwrappedToken'\nimport { usePositionTokenURI } from '../../hooks/usePositionTokenURI'\nimport { calculateGasMargin } from '../../utils/calculateGasMargin'\nimport { getExplorerLink, ExplorerDataType } from '../../utils/getExplorerLink'\nimport { LoadingRows } from './styleds'\nimport styled from 'styled-components/macro'\nimport { AutoColumn } from 'components/Column'\nimport { RowBetween, RowFixed } from 'components/Row'\nimport DoubleCurrencyLogo from 'components/DoubleLogo'\nimport { ExternalLink, HideExtraSmall, TYPE } from 'theme'\nimport Badge from 'components/Badge'\nimport { ButtonConfirmed, ButtonPrimary, ButtonGray } from 'components/Button'\nimport { DarkCard, LightCard } from 'components/Card'\nimport CurrencyLogo from 'components/CurrencyLogo'\nimport { Trans } from '@lingui/macro'\nimport { currencyId } from 'utils/currencyId'\nimport { formatCurrencyAmount } from 'utils/formatCurrencyAmount'\nimport { useV3PositionFees } from 'hooks/useV3PositionFees'\nimport { BigNumber } from '@ethersproject/bignumber'\nimport { Token, Currency, CurrencyAmount, Percent, Fraction, Price } from '@uniswap/sdk-core'\nimport { useActiveWeb3React } from 'hooks/web3'\nimport { useV3NFTPositionManagerContract } from 'hooks/useContract'\nimport { useIsTransactionPending, useTransactionAdder } from 'state/transactions/hooks'\nimport ReactGA from 'react-ga'\nimport TransactionConfirmationModal, { ConfirmationModalContent } from 'components/TransactionConfirmationModal'\nimport { TransactionResponse } from '@ethersproject/providers'\nimport { Dots } from 'components/swap/styleds'\nimport { getPriceOrderingFromPositionForUI } from '../../components/PositionListItem'\nimport useTheme from '../../hooks/useTheme'\nimport RateToggle from '../../components/RateToggle'\nimport { useSingleCallResult } from 'state/multicall/hooks'\nimport RangeBadge from '../../components/Badge/RangeBadge'\nimport { SwitchLocaleLink } from '../../components/SwitchLocaleLink'\nimport useUSDCPrice from 'hooks/useUSDCPrice'\nimport Loader from 'components/Loader'\nimport Toggle from 'components/Toggle'\nimport { Bound } from 'state/mint/v3/actions'\nimport useIsTickAtLimit from 'hooks/useIsTickAtLimit'\nimport { formatTickPrice } from 'utils/formatTickPrice'\nimport { SupportedChainId } from 'constants/chains'\n\nconst PageWrapper = styled.div`\n  min-width: 800px;\n  max-width: 960px;\n\n  ${({ theme }) => theme.mediaWidth.upToMedium`\n    min-width: 680px;\n    max-width: 680px;\n  `};\n\n  ${({ theme }) => theme.mediaWidth.upToSmall`\n    min-width: 600px;\n    max-width: 600px;\n  `};\n\n  @media only screen and (max-width: 620px) {\n    min-width: 500px;\n    max-width: 500px;\n  }\n\n  ${({ theme }) => theme.mediaWidth.upToExtraSmall`\n    min-width: 340px;\n    max-width: 340px;\n  `};\n`\n\nconst BadgeText = styled.div`\n  font-weight: 500;\n  font-size: 14px;\n`\n\n// responsive text\n// disable the warning because we don't use the end prop, we just want to filter it out\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst Label = styled(({ end, ...props }) => <TYPE.label {...props} />)<{ end?: boolean }>`\n  display: flex;\n  font-size: 16px;\n  justify-content: ${({ end }) => (end ? 'flex-end' : 'flex-start')};\n  align-items: center;\n`\n\nconst ExtentsText = styled.span`\n  color: ${({ theme }) => theme.text2};\n  font-size: 14px;\n  text-align: center;\n  margin-right: 4px;\n  font-weight: 500;\n`\n\nconst HoverText = styled(TYPE.main)`\n  text-decoration: none;\n  color: ${({ theme }) => theme.text3};\n  :hover {\n    color: ${({ theme }) => theme.text1};\n    text-decoration: none;\n  }\n`\n\nconst DoubleArrow = styled.span`\n  color: ${({ theme }) => theme.text3};\n  margin: 0 1rem;\n`\nconst ResponsiveRow = styled(RowBetween)`\n  ${({ theme }) => theme.mediaWidth.upToSmall`\n    flex-direction: column;\n    align-items: flex-start;\n    row-gap: 16px;\n    width: 100%:\n  `};\n`\n\nconst ResponsiveButtonPrimary = styled(ButtonPrimary)`\n  border-radius: 12px;\n  padding: 6px 8px;\n  width: fit-content;\n  ${({ theme }) => theme.mediaWidth.upToSmall`\n    flex: 1 1 auto;\n    width: 49%;\n  `};\n`\n\nconst NFTGrid = styled.div`\n  display: grid;\n  grid-template: 'overlap';\n  min-height: 400px;\n`\n\nconst NFTCanvas = styled.canvas`\n  grid-area: overlap;\n`\n\nconst NFTImage = styled.img`\n  grid-area: overlap;\n  height: 400px;\n  /* Ensures SVG appears on top of canvas. */\n  z-index: 1;\n`\n\nfunction CurrentPriceCard({\n  inverted,\n  pool,\n  currencyQuote,\n  currencyBase,\n}: {\n  inverted?: boolean\n  pool?: Pool | null\n  currencyQuote?: Currency\n  currencyBase?: Currency\n}) {\n  if (!pool || !currencyQuote || !currencyBase) {\n    return null\n  }\n\n  return (\n    <LightCard padding=\"12px \">\n      <AutoColumn gap=\"8px\" justify=\"center\">\n        <ExtentsText>\n          <Trans>Current price</Trans>\n        </ExtentsText>\n        <TYPE.mediumHeader textAlign=\"center\">\n          {(inverted ? pool.token1Price : pool.token0Price).toSignificant(6)}{' '}\n        </TYPE.mediumHeader>\n        <ExtentsText>\n          <Trans>\n            {currencyQuote?.symbol} per {currencyBase?.symbol}\n          </Trans>\n        </ExtentsText>\n      </AutoColumn>\n    </LightCard>\n  )\n}\n\nfunction LinkedCurrency({ chainId, currency }: { chainId?: number; currency?: Currency }) {\n  const address = (currency as Token)?.address\n\n  if (typeof chainId === 'number' && address) {\n    return (\n      <ExternalLink href={getExplorerLink(chainId, address, ExplorerDataType.TOKEN)}>\n        <RowFixed>\n          <CurrencyLogo currency={currency} size={'20px'} style={{ marginRight: '0.5rem' }} />\n          <TYPE.main>{currency?.symbol} ↗</TYPE.main>\n        </RowFixed>\n      </ExternalLink>\n    )\n  }\n\n  return (\n    <RowFixed>\n      <CurrencyLogo currency={currency} size={'20px'} style={{ marginRight: '0.5rem' }} />\n      <TYPE.main>{currency?.symbol}</TYPE.main>\n    </RowFixed>\n  )\n}\n\nfunction getRatio(\n  lower: Price<Currency, Currency>,\n  current: Price<Currency, Currency>,\n  upper: Price<Currency, Currency>\n) {\n  try {\n    if (!current.greaterThan(lower)) {\n      return 100\n    } else if (!current.lessThan(upper)) {\n      return 0\n    }\n\n    const a = Number.parseFloat(lower.toSignificant(15))\n    const b = Number.parseFloat(upper.toSignificant(15))\n    const c = Number.parseFloat(current.toSignificant(15))\n\n    const ratio = Math.floor((1 / ((Math.sqrt(a * b) - Math.sqrt(b * c)) / (c - Math.sqrt(b * c)) + 1)) * 100)\n\n    if (ratio < 0 || ratio > 100) {\n      throw Error('Out of range')\n    }\n\n    return ratio\n  } catch {\n    return undefined\n  }\n}\n\n// snapshots a src img into a canvas\nfunction getSnapshot(src: HTMLImageElement, canvas: HTMLCanvasElement, targetHeight: number) {\n  const context = canvas.getContext('2d')\n\n  if (context) {\n    let { width, height } = src\n\n    // src may be hidden and not have the target dimensions\n    const ratio = width / height\n    height = targetHeight\n    width = Math.round(ratio * targetHeight)\n\n    // Ensure crispness at high DPIs\n    canvas.width = width * devicePixelRatio\n    canvas.height = height * devicePixelRatio\n    canvas.style.width = width + 'px'\n    canvas.style.height = height + 'px'\n    context.scale(devicePixelRatio, devicePixelRatio)\n\n    context.clearRect(0, 0, width, height)\n    context.drawImage(src, 0, 0, width, height)\n  }\n}\n\nfunction NFT({ image, height: targetHeight }: { image: string; height: number }) {\n  const [animate, setAnimate] = useState(false)\n\n  const canvasRef = useRef<HTMLCanvasElement>(null)\n  const imageRef = useRef<HTMLImageElement>(null)\n\n  return (\n    <NFTGrid\n      onMouseEnter={() => {\n        setAnimate(true)\n      }}\n      onMouseLeave={() => {\n        // snapshot the current frame so the transition to the canvas is smooth\n        if (imageRef.current && canvasRef.current) {\n          getSnapshot(imageRef.current, canvasRef.current, targetHeight)\n        }\n        setAnimate(false)\n      }}\n    >\n      <NFTCanvas ref={canvasRef} />\n      <NFTImage\n        ref={imageRef}\n        src={image}\n        hidden={!animate}\n        onLoad={() => {\n          // snapshot for the canvas\n          if (imageRef.current && canvasRef.current) {\n            getSnapshot(imageRef.current, canvasRef.current, targetHeight)\n          }\n        }}\n      />\n    </NFTGrid>\n  )\n}\n\nconst useInverter = ({\n  priceLower,\n  priceUpper,\n  quote,\n  base,\n  invert,\n}: {\n  priceLower?: Price<Token, Token>\n  priceUpper?: Price<Token, Token>\n  quote?: Token\n  base?: Token\n  invert?: boolean\n}): {\n  priceLower?: Price<Token, Token>\n  priceUpper?: Price<Token, Token>\n  quote?: Token\n  base?: Token\n} => {\n  return {\n    priceUpper: invert ? priceLower?.invert() : priceUpper,\n    priceLower: invert ? priceUpper?.invert() : priceLower,\n    quote: invert ? base : quote,\n    base: invert ? quote : base,\n  }\n}\n\nexport function PositionPage({\n  match: {\n    params: { tokenId: tokenIdFromUrl },\n  },\n}: RouteComponentProps<{ tokenId?: string }>) {\n  const { chainId, account, library } = useActiveWeb3React()\n  const theme = useTheme()\n\n  const parsedTokenId = tokenIdFromUrl ? BigNumber.from(tokenIdFromUrl) : undefined\n  const { loading, position: positionDetails } = useV3PositionFromTokenId(parsedTokenId)\n\n  const {\n    token0: token0Address,\n    token1: token1Address,\n    fee: feeAmount,\n    liquidity,\n    tickLower,\n    tickUpper,\n    tokenId,\n  } = positionDetails || {}\n\n  const removed = liquidity?.eq(0)\n\n  const token0 = useToken(token0Address)\n  const token1 = useToken(token1Address)\n\n  const metadata = usePositionTokenURI(parsedTokenId)\n\n  const currency0 = token0 ? unwrappedToken(token0) : undefined\n  const currency1 = token1 ? unwrappedToken(token1) : undefined\n\n  // flag for receiving WETH\n  const [receiveWETH, setReceiveWETH] = useState(false)\n\n  // construct Position from details returned\n  const [poolState, pool] = usePool(token0 ?? undefined, token1 ?? undefined, feeAmount)\n  const position = useMemo(() => {\n    if (pool && liquidity && typeof tickLower === 'number' && typeof tickUpper === 'number') {\n      return new Position({ pool, liquidity: liquidity.toString(), tickLower, tickUpper })\n    }\n    return undefined\n  }, [liquidity, pool, tickLower, tickUpper])\n\n  const tickAtLimit = useIsTickAtLimit(feeAmount, tickLower, tickUpper)\n\n  const pricesFromPosition = getPriceOrderingFromPositionForUI(position)\n  const [manuallyInverted, setManuallyInverted] = useState(false)\n\n  // handle manual inversion\n  const { priceLower, priceUpper, base } = useInverter({\n    priceLower: pricesFromPosition.priceLower,\n    priceUpper: pricesFromPosition.priceUpper,\n    quote: pricesFromPosition.quote,\n    base: pricesFromPosition.base,\n    invert: manuallyInverted,\n  })\n\n  const inverted = token1 ? base?.equals(token1) : undefined\n  const currencyQuote = inverted ? currency0 : currency1\n  const currencyBase = inverted ? currency1 : currency0\n\n  const ratio = useMemo(() => {\n    return priceLower && pool && priceUpper\n      ? getRatio(\n          inverted ? priceUpper.invert() : priceLower,\n          pool.token0Price,\n          inverted ? priceLower.invert() : priceUpper\n        )\n      : undefined\n  }, [inverted, pool, priceLower, priceUpper])\n\n  // fees\n  const [feeValue0, feeValue1] = useV3PositionFees(pool ?? undefined, positionDetails?.tokenId, receiveWETH)\n\n  const [collecting, setCollecting] = useState<boolean>(false)\n  const [collectMigrationHash, setCollectMigrationHash] = useState<string | null>(null)\n  const isCollectPending = useIsTransactionPending(collectMigrationHash ?? undefined)\n  const [showConfirm, setShowConfirm] = useState(false)\n\n  // usdc prices always in terms of tokens\n  const price0 = useUSDCPrice(token0 ?? undefined)\n  const price1 = useUSDCPrice(token1 ?? undefined)\n\n  const fiatValueOfFees: CurrencyAmount<Currency> | null = useMemo(() => {\n    if (!price0 || !price1 || !feeValue0 || !feeValue1) return null\n\n    // we wrap because it doesn't matter, the quote returns a USDC amount\n    const feeValue0Wrapped = feeValue0?.wrapped\n    const feeValue1Wrapped = feeValue1?.wrapped\n\n    if (!feeValue0Wrapped || !feeValue1Wrapped) return null\n\n    const amount0 = price0.quote(feeValue0Wrapped)\n    const amount1 = price1.quote(feeValue1Wrapped)\n    return amount0.add(amount1)\n  }, [price0, price1, feeValue0, feeValue1])\n\n  const fiatValueOfLiquidity: CurrencyAmount<Token> | null = useMemo(() => {\n    if (!price0 || !price1 || !position) return null\n    const amount0 = price0.quote(position.amount0)\n    const amount1 = price1.quote(position.amount1)\n    return amount0.add(amount1)\n  }, [price0, price1, position])\n\n  const addTransaction = useTransactionAdder()\n  const positionManager = useV3NFTPositionManagerContract()\n  const collect = useCallback(() => {\n    if (!chainId || !feeValue0 || !feeValue1 || !positionManager || !account || !tokenId || !library) return\n\n    setCollecting(true)\n\n    const { calldata, value } = NonfungiblePositionManager.collectCallParameters({\n      tokenId: tokenId.toString(),\n      expectedCurrencyOwed0: feeValue0,\n      expectedCurrencyOwed1: feeValue1,\n      recipient: account,\n    })\n\n    const txn = {\n      to: positionManager.address,\n      data: calldata,\n      value,\n    }\n\n    library\n      .getSigner()\n      .estimateGas(txn)\n      .then((estimate) => {\n        const newTxn = {\n          ...txn,\n          gasLimit: calculateGasMargin(chainId, estimate),\n        }\n\n        return library\n          .getSigner()\n          .sendTransaction(newTxn)\n          .then((response: TransactionResponse) => {\n            setCollectMigrationHash(response.hash)\n            setCollecting(false)\n\n            ReactGA.event({\n              category: 'Liquidity',\n              action: 'CollectV3',\n              label: [feeValue0.currency.symbol, feeValue1.currency.symbol].join('/'),\n            })\n\n            addTransaction(response, {\n              summary: `Collect ${feeValue0.currency.symbol}/${feeValue1.currency.symbol} fees`,\n            })\n          })\n      })\n      .catch((error) => {\n        setCollecting(false)\n        console.error(error)\n      })\n  }, [chainId, feeValue0, feeValue1, positionManager, account, tokenId, addTransaction, library])\n\n  const owner = useSingleCallResult(!!tokenId ? positionManager : null, 'ownerOf', [tokenId]).result?.[0]\n  const ownsNFT = owner === account || positionDetails?.operator === account\n\n  const feeValueUpper = inverted ? feeValue0 : feeValue1\n  const feeValueLower = inverted ? feeValue1 : feeValue0\n\n  // check if price is within range\n  const below = pool && typeof tickLower === 'number' ? pool.tickCurrent < tickLower : undefined\n  const above = pool && typeof tickUpper === 'number' ? pool.tickCurrent >= tickUpper : undefined\n  const inRange: boolean = typeof below === 'boolean' && typeof above === 'boolean' ? !below && !above : false\n\n  function modalHeader() {\n    return (\n      <AutoColumn gap={'md'} style={{ marginTop: '20px' }}>\n        <LightCard padding=\"12px 16px\">\n          <AutoColumn gap=\"md\">\n            <RowBetween>\n              <RowFixed>\n                <CurrencyLogo currency={feeValueUpper?.currency} size={'20px'} style={{ marginRight: '0.5rem' }} />\n                <TYPE.main>{feeValueUpper ? formatCurrencyAmount(feeValueUpper, 4) : '-'}</TYPE.main>\n              </RowFixed>\n              <TYPE.main>{feeValueUpper?.currency?.symbol}</TYPE.main>\n            </RowBetween>\n            <RowBetween>\n              <RowFixed>\n                <CurrencyLogo currency={feeValueLower?.currency} size={'20px'} style={{ marginRight: '0.5rem' }} />\n                <TYPE.main>{feeValueLower ? formatCurrencyAmount(feeValueLower, 4) : '-'}</TYPE.main>\n              </RowFixed>\n              <TYPE.main>{feeValueLower?.currency?.symbol}</TYPE.main>\n            </RowBetween>\n          </AutoColumn>\n        </LightCard>\n        <TYPE.italic>\n          <Trans>Collecting fees will withdraw currently available fees for you.</Trans>\n        </TYPE.italic>\n        <ButtonPrimary onClick={collect}>\n          <Trans>Collect</Trans>\n        </ButtonPrimary>\n      </AutoColumn>\n    )\n  }\n\n  const onOptimisticChain = chainId && [SupportedChainId.OPTIMISM, SupportedChainId.OPTIMISTIC_KOVAN].includes(chainId)\n  const showCollectAsWeth = Boolean(\n    ownsNFT &&\n      (feeValue0?.greaterThan(0) || feeValue1?.greaterThan(0)) &&\n      currency0 &&\n      currency1 &&\n      (currency0.isNative || currency1.isNative) &&\n      !collectMigrationHash &&\n      !onOptimisticChain\n  )\n\n  return loading || poolState === PoolState.LOADING || !feeAmount ? (\n    <LoadingRows>\n      <div />\n      <div />\n      <div />\n      <div />\n      <div />\n      <div />\n      <div />\n      <div />\n      <div />\n      <div />\n      <div />\n      <div />\n    </LoadingRows>\n  ) : (\n    <>\n      <PageWrapper>\n        <TransactionConfirmationModal\n          isOpen={showConfirm}\n          onDismiss={() => setShowConfirm(false)}\n          attemptingTxn={collecting}\n          hash={collectMigrationHash ?? ''}\n          content={() => (\n            <ConfirmationModalContent\n              title={<Trans>Claim fees</Trans>}\n              onDismiss={() => setShowConfirm(false)}\n              topContent={modalHeader}\n            />\n          )}\n          pendingText={<Trans>Collecting fees</Trans>}\n        />\n        <AutoColumn gap=\"md\">\n          <AutoColumn gap=\"sm\">\n            <Link style={{ textDecoration: 'none', width: 'fit-content', marginBottom: '0.5rem' }} to=\"/pool\">\n              <HoverText>\n                <Trans>← Back to Pools Overview</Trans>\n              </HoverText>\n            </Link>\n            <ResponsiveRow>\n              <RowFixed>\n                <DoubleCurrencyLogo currency0={currencyBase} currency1={currencyQuote} size={24} margin={true} />\n                <TYPE.label fontSize={'24px'} mr=\"10px\">\n                  &nbsp;{currencyQuote?.symbol}&nbsp;/&nbsp;{currencyBase?.symbol}\n                </TYPE.label>\n                <Badge style={{ marginRight: '8px' }}>\n                  <BadgeText>\n                    <Trans>{new Percent(feeAmount, 1_000_000).toSignificant()}%</Trans>\n                  </BadgeText>\n                </Badge>\n                <RangeBadge removed={removed} inRange={inRange} />\n              </RowFixed>\n              {ownsNFT && (\n                <RowFixed>\n                  {currency0 && currency1 && feeAmount && tokenId ? (\n                    <ButtonGray\n                      as={Link}\n                      to={`/increase/${currencyId(currency0)}/${currencyId(currency1)}/${feeAmount}/${tokenId}`}\n                      width=\"fit-content\"\n                      padding=\"6px 8px\"\n                      $borderRadius=\"12px\"\n                      style={{ marginRight: '8px' }}\n                    >\n                      <Trans>Increase Liquidity</Trans>\n                    </ButtonGray>\n                  ) : null}\n                  {tokenId && !removed ? (\n                    <ResponsiveButtonPrimary\n                      as={Link}\n                      to={`/remove/${tokenId}`}\n                      width=\"fit-content\"\n                      padding=\"6px 8px\"\n                      $borderRadius=\"12px\"\n                    >\n                      <Trans>Remove Liquidity</Trans>\n                    </ResponsiveButtonPrimary>\n                  ) : null}\n                </RowFixed>\n              )}\n            </ResponsiveRow>\n            <RowBetween></RowBetween>\n          </AutoColumn>\n          <ResponsiveRow align=\"flex-start\">\n            {'result' in metadata ? (\n              <DarkCard\n                width=\"100%\"\n                height=\"100%\"\n                style={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  flexDirection: 'column',\n                  justifyContent: 'space-around',\n                  marginRight: '12px',\n                }}\n              >\n                <div style={{ marginRight: 12 }}>\n                  <NFT image={metadata.result.image} height={400} />\n                </div>\n                {typeof chainId === 'number' && owner && !ownsNFT ? (\n                  <ExternalLink href={getExplorerLink(chainId, owner, ExplorerDataType.ADDRESS)}>\n                    <Trans>Owner</Trans>\n                  </ExternalLink>\n                ) : null}\n              </DarkCard>\n            ) : (\n              <DarkCard\n                width=\"100%\"\n                height=\"100%\"\n                style={{\n                  marginRight: '12px',\n                  minWidth: '340px',\n                }}\n              >\n                <Loader />\n              </DarkCard>\n            )}\n            <AutoColumn gap=\"sm\" style={{ width: '100%', height: '100%' }}>\n              <DarkCard>\n                <AutoColumn gap=\"md\" style={{ width: '100%' }}>\n                  <AutoColumn gap=\"md\">\n                    <Label>\n                      <Trans>Liquidity</Trans>\n                    </Label>\n                    {fiatValueOfLiquidity?.greaterThan(new Fraction(1, 100)) ? (\n                      <TYPE.largeHeader fontSize=\"36px\" fontWeight={500}>\n                        <Trans>${fiatValueOfLiquidity.toFixed(2, { groupSeparator: ',' })}</Trans>\n                      </TYPE.largeHeader>\n                    ) : (\n                      <TYPE.largeHeader color={theme.text1} fontSize=\"36px\" fontWeight={500}>\n                        <Trans>$-</Trans>\n                      </TYPE.largeHeader>\n                    )}\n                  </AutoColumn>\n                  <LightCard padding=\"12px 16px\">\n                    <AutoColumn gap=\"md\">\n                      <RowBetween>\n                        <LinkedCurrency chainId={chainId} currency={currencyQuote} />\n                        <RowFixed>\n                          <TYPE.main>\n                            {inverted ? position?.amount0.toSignificant(4) : position?.amount1.toSignificant(4)}\n                          </TYPE.main>\n                          {typeof ratio === 'number' && !removed ? (\n                            <Badge style={{ marginLeft: '10px' }}>\n                              <TYPE.main fontSize={11}>\n                                <Trans>{inverted ? ratio : 100 - ratio}%</Trans>\n                              </TYPE.main>\n                            </Badge>\n                          ) : null}\n                        </RowFixed>\n                      </RowBetween>\n                      <RowBetween>\n                        <LinkedCurrency chainId={chainId} currency={currencyBase} />\n                        <RowFixed>\n                          <TYPE.main>\n                            {inverted ? position?.amount1.toSignificant(4) : position?.amount0.toSignificant(4)}\n                          </TYPE.main>\n                          {typeof ratio === 'number' && !removed ? (\n                            <Badge style={{ marginLeft: '10px' }}>\n                              <TYPE.main color={theme.text2} fontSize={11}>\n                                <Trans>{inverted ? 100 - ratio : ratio}%</Trans>\n                              </TYPE.main>\n                            </Badge>\n                          ) : null}\n                        </RowFixed>\n                      </RowBetween>\n                    </AutoColumn>\n                  </LightCard>\n                </AutoColumn>\n              </DarkCard>\n              <DarkCard>\n                <AutoColumn gap=\"md\" style={{ width: '100%' }}>\n                  <AutoColumn gap=\"md\">\n                    <RowBetween style={{ alignItems: 'flex-start' }}>\n                      <AutoColumn gap=\"md\">\n                        <Label>\n                          <Trans>Unclaimed fees</Trans>\n                        </Label>\n                        {fiatValueOfFees?.greaterThan(new Fraction(1, 100)) ? (\n                          <TYPE.largeHeader color={theme.green1} fontSize=\"36px\" fontWeight={500}>\n                            <Trans>${fiatValueOfFees.toFixed(2, { groupSeparator: ',' })}</Trans>\n                          </TYPE.largeHeader>\n                        ) : (\n                          <TYPE.largeHeader color={theme.text1} fontSize=\"36px\" fontWeight={500}>\n                            <Trans>$-</Trans>\n                          </TYPE.largeHeader>\n                        )}\n                      </AutoColumn>\n                      {ownsNFT && (feeValue0?.greaterThan(0) || feeValue1?.greaterThan(0) || !!collectMigrationHash) ? (\n                        <ButtonConfirmed\n                          disabled={collecting || !!collectMigrationHash}\n                          confirmed={!!collectMigrationHash && !isCollectPending}\n                          width=\"fit-content\"\n                          style={{ borderRadius: '12px' }}\n                          padding=\"4px 8px\"\n                          onClick={() => setShowConfirm(true)}\n                        >\n                          {!!collectMigrationHash && !isCollectPending ? (\n                            <TYPE.main color={theme.text1}>\n                              <Trans> Collected</Trans>\n                            </TYPE.main>\n                          ) : isCollectPending || collecting ? (\n                            <TYPE.main color={theme.text1}>\n                              {' '}\n                              <Dots>\n                                <Trans>Collecting</Trans>\n                              </Dots>\n                            </TYPE.main>\n                          ) : (\n                            <>\n                              <TYPE.main color={theme.white}>\n                                <Trans>Collect fees</Trans>\n                              </TYPE.main>\n                            </>\n                          )}\n                        </ButtonConfirmed>\n                      ) : null}\n                    </RowBetween>\n                  </AutoColumn>\n                  <LightCard padding=\"12px 16px\">\n                    <AutoColumn gap=\"md\">\n                      <RowBetween>\n                        <RowFixed>\n                          <CurrencyLogo\n                            currency={feeValueUpper?.currency}\n                            size={'20px'}\n                            style={{ marginRight: '0.5rem' }}\n                          />\n                          <TYPE.main>{feeValueUpper?.currency?.symbol}</TYPE.main>\n                        </RowFixed>\n                        <RowFixed>\n                          <TYPE.main>{feeValueUpper ? formatCurrencyAmount(feeValueUpper, 4) : '-'}</TYPE.main>\n                        </RowFixed>\n                      </RowBetween>\n                      <RowBetween>\n                        <RowFixed>\n                          <CurrencyLogo\n                            currency={feeValueLower?.currency}\n                            size={'20px'}\n                            style={{ marginRight: '0.5rem' }}\n                          />\n                          <TYPE.main>{feeValueLower?.currency?.symbol}</TYPE.main>\n                        </RowFixed>\n                        <RowFixed>\n                          <TYPE.main>{feeValueLower ? formatCurrencyAmount(feeValueLower, 4) : '-'}</TYPE.main>\n                        </RowFixed>\n                      </RowBetween>\n                    </AutoColumn>\n                  </LightCard>\n                  {showCollectAsWeth && (\n                    <AutoColumn gap=\"md\">\n                      <RowBetween>\n                        <TYPE.main>\n                          <Trans>Collect as WETH</Trans>\n                        </TYPE.main>\n                        <Toggle\n                          id=\"receive-as-weth\"\n                          isActive={receiveWETH}\n                          toggle={() => setReceiveWETH((receiveWETH) => !receiveWETH)}\n                        />\n                      </RowBetween>\n                    </AutoColumn>\n                  )}\n                </AutoColumn>\n              </DarkCard>\n            </AutoColumn>\n          </ResponsiveRow>\n          <DarkCard>\n            <AutoColumn gap=\"md\">\n              <RowBetween>\n                <RowFixed>\n                  <Label display=\"flex\" style={{ marginRight: '12px' }}>\n                    <Trans>Price range</Trans>\n                  </Label>\n                  <HideExtraSmall>\n                    <>\n                      <RangeBadge removed={removed} inRange={inRange} />\n                      <span style={{ width: '8px' }} />\n                    </>\n                  </HideExtraSmall>\n                </RowFixed>\n                <RowFixed>\n                  {currencyBase && currencyQuote && (\n                    <RateToggle\n                      currencyA={currencyBase}\n                      currencyB={currencyQuote}\n                      handleRateToggle={() => setManuallyInverted(!manuallyInverted)}\n                    />\n                  )}\n                </RowFixed>\n              </RowBetween>\n\n              <RowBetween>\n                <LightCard padding=\"12px\" width=\"100%\">\n                  <AutoColumn gap=\"8px\" justify=\"center\">\n                    <ExtentsText>\n                      <Trans>Min price</Trans>\n                    </ExtentsText>\n                    <TYPE.mediumHeader textAlign=\"center\">\n                      {formatTickPrice(priceLower, tickAtLimit, Bound.LOWER)}\n                    </TYPE.mediumHeader>\n                    <ExtentsText>\n                      {' '}\n                      <Trans>\n                        {currencyQuote?.symbol} per {currencyBase?.symbol}\n                      </Trans>\n                    </ExtentsText>\n\n                    {inRange && (\n                      <TYPE.small color={theme.text3}>\n                        <Trans>Your position will be 100% {currencyBase?.symbol} at this price.</Trans>\n                      </TYPE.small>\n                    )}\n                  </AutoColumn>\n                </LightCard>\n\n                <DoubleArrow>⟷</DoubleArrow>\n                <LightCard padding=\"12px\" width=\"100%\">\n                  <AutoColumn gap=\"8px\" justify=\"center\">\n                    <ExtentsText>\n                      <Trans>Max price</Trans>\n                    </ExtentsText>\n                    <TYPE.mediumHeader textAlign=\"center\">\n                      {formatTickPrice(priceUpper, tickAtLimit, Bound.UPPER)}\n                    </TYPE.mediumHeader>\n                    <ExtentsText>\n                      {' '}\n                      <Trans>\n                        {currencyQuote?.symbol} per {currencyBase?.symbol}\n                      </Trans>\n                    </ExtentsText>\n\n                    {inRange && (\n                      <TYPE.small color={theme.text3}>\n                        <Trans>Your position will be 100% {currencyQuote?.symbol} at this price.</Trans>\n                      </TYPE.small>\n                    )}\n                  </AutoColumn>\n                </LightCard>\n              </RowBetween>\n              <CurrentPriceCard\n                inverted={inverted}\n                pool={pool}\n                currencyQuote={currencyQuote}\n                currencyBase={currencyBase}\n              />\n            </AutoColumn>\n          </DarkCard>\n        </AutoColumn>\n      </PageWrapper>\n      <SwitchLocaleLink />\n    </>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}