{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _styled from\"styled-components\";var _templateObject;import{Trans}from\"@lingui/react\";import ProposalEmptyState from'components/vote/ProposalEmptyState';import JSBI from'jsbi';import{darken}from'polished';import{Link}from'react-router-dom';import{Button}from'rebass/styled-components';import{ButtonPrimary}from'components/Button';import{AutoColumn}from'components/Column';import{CardBGImage,CardNoise,CardSection,DataCard}from'components/earn/styled';import FormattedCurrencyAmount from'components/FormattedCurrencyAmount';import Loader from'components/Loader';import{AutoRow,RowBetween,RowFixed}from'components/Row';import{SwitchLocaleLink}from'components/SwitchLocaleLink';import DelegateModal from'components/vote/DelegateModal';import{ZERO_ADDRESS}from'../../constants/misc';import{UNI}from'../../constants/tokens';import{useActiveWeb3React}from'hooks/web3';import{ApplicationModal}from'state/application/actions';import{useModalOpen,useToggleDelegateModal}from'state/application/hooks';import{useAllProposalData,useUserDelegatee,useUserVotes}from'state/governance/hooks';import{useTokenBalance}from'state/wallet/hooks';import{ExternalLink,TYPE}from'theme';import{shortenAddress}from'utils';import{ExplorerDataType,getExplorerLink}from'utils/getExplorerLink';import{ProposalStatus}from'./styled';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var PageWrapper=_styled(AutoColumn).withConfig({componentId:\"sc-1jfnho4-0\"})([\"\"]);var TopSection=_styled(AutoColumn).withConfig({componentId:\"sc-1jfnho4-1\"})([\"max-width:640px;width:100%;\"]);var Proposal=_styled(Button).withConfig({componentId:\"sc-1jfnho4-2\"})([\"padding:0.75rem 1rem;width:100%;margin-top:1rem;border-radius:12px;display:grid;grid-template-columns:48px 1fr 120px;align-items:center;text-align:left;outline:none;cursor:pointer;color:\",\";text-decoration:none;background-color:\",\";&:focus{background-color:\",\";}&:hover{background-color:\",\";}\"],function(_ref){var theme=_ref.theme;return theme.text1;},function(_ref2){var theme=_ref2.theme;return theme.bg1;},function(_ref3){var theme=_ref3.theme;return darken(0.05,theme.bg1);},function(_ref4){var theme=_ref4.theme;return darken(0.05,theme.bg1);});var ProposalNumber=_styled.span.withConfig({componentId:\"sc-1jfnho4-3\"})([\"opacity:0.6;\"]);var ProposalTitle=_styled.span.withConfig({componentId:\"sc-1jfnho4-4\"})([\"font-weight:600;\"]);var VoteCard=_styled(DataCard).withConfig({componentId:\"sc-1jfnho4-5\"})([\"background:radial-gradient(76.02% 75.41% at 1.84% 0%,#27ae60 0%,#000000 100%);overflow:hidden;\"]);var WrapSmall=_styled(RowBetween).withConfig({componentId:\"sc-1jfnho4-6\"})([\"margin-bottom:1rem;\",\";\"],function(_ref5){var theme=_ref5.theme;return theme.mediaWidth.upToSmall(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    flex-wrap: wrap;\\n  \"])));});var TextButton=_styled(TYPE.main).withConfig({componentId:\"sc-1jfnho4-7\"})([\"color:\",\";:hover{cursor:pointer;text-decoration:underline;}\"],function(_ref6){var theme=_ref6.theme;return theme.primary1;});var AddressButton=_styled.div.withConfig({componentId:\"sc-1jfnho4-8\"})([\"border:1px solid \",\";padding:2px 4px;border-radius:8px;display:flex;justify-content:center;align-items:center;\"],function(_ref7){var theme=_ref7.theme;return theme.bg3;});var StyledExternalLink=_styled(ExternalLink).withConfig({componentId:\"sc-1jfnho4-9\"})([\"color:\",\";\"],function(_ref8){var theme=_ref8.theme;return theme.text1;});export default function Vote(){var _allProposals$slice,_allProposals$slice$r;var _useActiveWeb3React=useActiveWeb3React(),account=_useActiveWeb3React.account,chainId=_useActiveWeb3React.chainId;// toggle for showing delegation modal\nvar showDelegateModal=useModalOpen(ApplicationModal.DELEGATE);var toggleDelegateModal=useToggleDelegateModal();// get data to list all proposals\nvar _useAllProposalData=useAllProposalData(),allProposals=_useAllProposalData.data,loadingProposals=_useAllProposalData.loading;// user data\nvar _useUserVotes=useUserVotes(),loadingAvailableVotes=_useUserVotes.loading,availableVotes=_useUserVotes.votes;var uniBalance=useTokenBalance(account!==null&&account!==void 0?account:undefined,chainId?UNI[chainId]:undefined);var userDelegatee=useUserDelegatee();// show delegation option if they have have a balance, but have not delegated\nvar showUnlockVoting=Boolean(uniBalance&&JSBI.notEqual(uniBalance.quotient,JSBI.BigInt(0))&&userDelegatee===ZERO_ADDRESS);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(PageWrapper,{gap:\"lg\",justify:\"center\",children:[/*#__PURE__*/_jsx(DelegateModal,{isOpen:showDelegateModal,onDismiss:toggleDelegateModal,title:showUnlockVoting?/*#__PURE__*/_jsx(Trans,{id:\"Unlock Votes\"}):/*#__PURE__*/_jsx(Trans,{id:\"Update Delegation\"})}),/*#__PURE__*/_jsx(TopSection,{gap:\"md\",children:/*#__PURE__*/_jsxs(VoteCard,{children:[/*#__PURE__*/_jsx(CardBGImage,{}),/*#__PURE__*/_jsx(CardNoise,{}),/*#__PURE__*/_jsx(CardSection,{children:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"md\",children:[/*#__PURE__*/_jsx(RowBetween,{children:/*#__PURE__*/_jsx(TYPE.white,{fontWeight:600,children:/*#__PURE__*/_jsx(Trans,{id:\"Uniswap Governance\"})})}),/*#__PURE__*/_jsx(RowBetween,{children:/*#__PURE__*/_jsx(TYPE.white,{fontSize:14,children:/*#__PURE__*/_jsx(Trans,{id:\"UNI tokens represent voting shares in Uniswap governance. You can vote on each proposal yourself or delegate your votes to a third party.\"})})}),/*#__PURE__*/_jsx(ExternalLink,{style:{color:'white',textDecoration:'underline'},href:\"https://uniswap.org/blog/uni\",target:\"_blank\",children:/*#__PURE__*/_jsx(TYPE.white,{fontSize:14,children:/*#__PURE__*/_jsx(Trans,{id:\"Read more about Uniswap governance\"})})})]})}),/*#__PURE__*/_jsx(CardBGImage,{}),/*#__PURE__*/_jsx(CardNoise,{})]})}),/*#__PURE__*/_jsxs(TopSection,{gap:\"2px\",children:[/*#__PURE__*/_jsxs(WrapSmall,{children:[/*#__PURE__*/_jsx(TYPE.mediumHeader,{style:{margin:'0.5rem 0.5rem 0.5rem 0',flexShrink:0},children:/*#__PURE__*/_jsx(Trans,{id:\"Proposals\"})}),/*#__PURE__*/_jsxs(AutoRow,{gap:\"6px\",justify:\"flex-end\",children:[loadingProposals||loadingAvailableVotes?/*#__PURE__*/_jsx(Loader,{}):null,showUnlockVoting?/*#__PURE__*/_jsx(ButtonPrimary,{style:{width:'fit-content'},padding:\"8px\",$borderRadius:\"8px\",onClick:toggleDelegateModal,children:/*#__PURE__*/_jsx(Trans,{id:\"Unlock Voting\"})}):availableVotes&&JSBI.notEqual(JSBI.BigInt(0),availableVotes===null||availableVotes===void 0?void 0:availableVotes.quotient)?/*#__PURE__*/_jsx(TYPE.body,{fontWeight:500,mr:\"6px\",children:/*#__PURE__*/_jsx(Trans,{id:\"<0/> Votes\",components:{0:/*#__PURE__*/_jsx(FormattedCurrencyAmount,{currencyAmount:availableVotes})}})}):uniBalance&&userDelegatee&&userDelegatee!==ZERO_ADDRESS&&JSBI.notEqual(JSBI.BigInt(0),uniBalance===null||uniBalance===void 0?void 0:uniBalance.quotient)?/*#__PURE__*/_jsx(TYPE.body,{fontWeight:500,mr:\"6px\",children:/*#__PURE__*/_jsx(Trans,{id:\"<0/> Votes\",components:{0:/*#__PURE__*/_jsx(FormattedCurrencyAmount,{currencyAmount:uniBalance})}})}):'',/*#__PURE__*/_jsx(ButtonPrimary,{as:Link,to:\"/create-proposal\",style:{width:'fit-content',borderRadius:'8px'},padding:\"8px\",children:/*#__PURE__*/_jsx(Trans,{id:\"Create Proposal\"})})]})]}),!showUnlockVoting&&/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(\"div\",{}),userDelegatee&&userDelegatee!==ZERO_ADDRESS?/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(TYPE.body,{fontWeight:500,mr:\"4px\",children:/*#__PURE__*/_jsx(Trans,{id:\"Delegated to:\"})}),/*#__PURE__*/_jsxs(AddressButton,{children:[/*#__PURE__*/_jsx(StyledExternalLink,{href:getExplorerLink(1,userDelegatee,ExplorerDataType.ADDRESS),style:{margin:'0 4px'},children:userDelegatee===account?/*#__PURE__*/_jsx(Trans,{id:\"Self\"}):shortenAddress(userDelegatee)}),/*#__PURE__*/_jsx(TextButton,{onClick:toggleDelegateModal,style:{marginLeft:'4px'},children:/*#__PURE__*/_jsx(Trans,{id:\"(edit)\"})})]})]}):'']}),(allProposals===null||allProposals===void 0?void 0:allProposals.length)===0&&/*#__PURE__*/_jsx(ProposalEmptyState,{}),allProposals===null||allProposals===void 0?void 0:(_allProposals$slice=allProposals.slice(0))===null||_allProposals$slice===void 0?void 0:(_allProposals$slice$r=_allProposals$slice.reverse())===null||_allProposals$slice$r===void 0?void 0:_allProposals$slice$r.map(function(p){return/*#__PURE__*/_jsxs(Proposal,{as:Link,to:\"/vote/\".concat(p.governorIndex,\"/\").concat(p.id),children:[/*#__PURE__*/_jsxs(ProposalNumber,{children:[p.governorIndex,\".\",p.id]}),/*#__PURE__*/_jsx(ProposalTitle,{children:p.title}),/*#__PURE__*/_jsx(ProposalStatus,{status:p.status})]},\"\".concat(p.governorIndex).concat(p.id));})]}),/*#__PURE__*/_jsx(TYPE.subHeader,{color:\"text3\",children:/*#__PURE__*/_jsx(Trans,{id:\"A minimum threshold of 0.25% of the total UNI supply is required to submit proposals\"})})]}),/*#__PURE__*/_jsx(SwitchLocaleLink,{})]});}","map":{"version":3,"sources":["/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/src/pages/Vote/index.tsx"],"names":["ProposalEmptyState","JSBI","darken","Link","Button","ButtonPrimary","AutoColumn","CardBGImage","CardNoise","CardSection","DataCard","FormattedCurrencyAmount","Loader","AutoRow","RowBetween","RowFixed","SwitchLocaleLink","DelegateModal","ZERO_ADDRESS","UNI","useActiveWeb3React","ApplicationModal","useModalOpen","useToggleDelegateModal","useAllProposalData","useUserDelegatee","useUserVotes","useTokenBalance","ExternalLink","TYPE","shortenAddress","ExplorerDataType","getExplorerLink","ProposalStatus","PageWrapper","styled","TopSection","Proposal","theme","text1","bg1","ProposalNumber","span","ProposalTitle","VoteCard","WrapSmall","mediaWidth","upToSmall","TextButton","main","primary1","AddressButton","div","bg3","StyledExternalLink","Vote","account","chainId","showDelegateModal","DELEGATE","toggleDelegateModal","allProposals","data","loadingProposals","loading","loadingAvailableVotes","availableVotes","votes","uniBalance","undefined","userDelegatee","showUnlockVoting","Boolean","notEqual","quotient","BigInt","color","textDecoration","margin","flexShrink","width","borderRadius","ADDRESS","marginLeft","length","slice","reverse","map","p","governorIndex","id","title","status"],"mappings":"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","sourcesContent":["import { Trans } from '@lingui/macro'\nimport { CurrencyAmount, Token } from '@uniswap/sdk-core'\nimport ProposalEmptyState from 'components/vote/ProposalEmptyState'\nimport JSBI from 'jsbi'\nimport { darken } from 'polished'\nimport { Link } from 'react-router-dom'\nimport { Button } from 'rebass/styled-components'\nimport styled from 'styled-components/macro'\nimport { ButtonPrimary } from 'components/Button'\nimport { AutoColumn } from 'components/Column'\nimport { CardBGImage, CardNoise, CardSection, DataCard } from 'components/earn/styled'\nimport FormattedCurrencyAmount from 'components/FormattedCurrencyAmount'\nimport Loader from 'components/Loader'\nimport { AutoRow, RowBetween, RowFixed } from 'components/Row'\nimport { SwitchLocaleLink } from 'components/SwitchLocaleLink'\nimport DelegateModal from 'components/vote/DelegateModal'\nimport { ZERO_ADDRESS } from '../../constants/misc'\nimport { UNI } from '../../constants/tokens'\nimport { useActiveWeb3React } from 'hooks/web3'\nimport { ApplicationModal } from 'state/application/actions'\nimport { useModalOpen, useToggleDelegateModal } from 'state/application/hooks'\nimport { ProposalData, useAllProposalData, useUserDelegatee, useUserVotes } from 'state/governance/hooks'\nimport { useTokenBalance } from 'state/wallet/hooks'\nimport { ExternalLink, TYPE } from 'theme'\nimport { shortenAddress } from 'utils'\nimport { ExplorerDataType, getExplorerLink } from 'utils/getExplorerLink'\nimport { ProposalStatus } from './styled'\n\nconst PageWrapper = styled(AutoColumn)``\n\nconst TopSection = styled(AutoColumn)`\n  max-width: 640px;\n  width: 100%;\n`\n\nconst Proposal = styled(Button)`\n  padding: 0.75rem 1rem;\n  width: 100%;\n  margin-top: 1rem;\n  border-radius: 12px;\n  display: grid;\n  grid-template-columns: 48px 1fr 120px;\n  align-items: center;\n  text-align: left;\n  outline: none;\n  cursor: pointer;\n  color: ${({ theme }) => theme.text1};\n  text-decoration: none;\n  background-color: ${({ theme }) => theme.bg1};\n  &:focus {\n    background-color: ${({ theme }) => darken(0.05, theme.bg1)};\n  }\n  &:hover {\n    background-color: ${({ theme }) => darken(0.05, theme.bg1)};\n  }\n`\n\nconst ProposalNumber = styled.span`\n  opacity: 0.6;\n`\n\nconst ProposalTitle = styled.span`\n  font-weight: 600;\n`\n\nconst VoteCard = styled(DataCard)`\n  background: radial-gradient(76.02% 75.41% at 1.84% 0%, #27ae60 0%, #000000 100%);\n  overflow: hidden;\n`\n\nconst WrapSmall = styled(RowBetween)`\n  margin-bottom: 1rem;\n  ${({ theme }) => theme.mediaWidth.upToSmall`\n    flex-wrap: wrap;\n  `};\n`\n\nconst TextButton = styled(TYPE.main)`\n  color: ${({ theme }) => theme.primary1};\n  :hover {\n    cursor: pointer;\n    text-decoration: underline;\n  }\n`\n\nconst AddressButton = styled.div`\n  border: 1px solid ${({ theme }) => theme.bg3};\n  padding: 2px 4px;\n  border-radius: 8px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`\n\nconst StyledExternalLink = styled(ExternalLink)`\n  color: ${({ theme }) => theme.text1};\n`\n\nexport default function Vote() {\n  const { account, chainId } = useActiveWeb3React()\n\n  // toggle for showing delegation modal\n  const showDelegateModal = useModalOpen(ApplicationModal.DELEGATE)\n  const toggleDelegateModal = useToggleDelegateModal()\n\n  // get data to list all proposals\n  const { data: allProposals, loading: loadingProposals } = useAllProposalData()\n\n  // user data\n  const { loading: loadingAvailableVotes, votes: availableVotes } = useUserVotes()\n  const uniBalance: CurrencyAmount<Token> | undefined = useTokenBalance(\n    account ?? undefined,\n    chainId ? UNI[chainId] : undefined\n  )\n  const userDelegatee: string | undefined = useUserDelegatee()\n\n  // show delegation option if they have have a balance, but have not delegated\n  const showUnlockVoting = Boolean(\n    uniBalance && JSBI.notEqual(uniBalance.quotient, JSBI.BigInt(0)) && userDelegatee === ZERO_ADDRESS\n  )\n\n  return (\n    <>\n      <PageWrapper gap=\"lg\" justify=\"center\">\n        <DelegateModal\n          isOpen={showDelegateModal}\n          onDismiss={toggleDelegateModal}\n          title={showUnlockVoting ? <Trans>Unlock Votes</Trans> : <Trans>Update Delegation</Trans>}\n        />\n        <TopSection gap=\"md\">\n          <VoteCard>\n            <CardBGImage />\n            <CardNoise />\n            <CardSection>\n              <AutoColumn gap=\"md\">\n                <RowBetween>\n                  <TYPE.white fontWeight={600}>\n                    <Trans>Uniswap Governance</Trans>\n                  </TYPE.white>\n                </RowBetween>\n                <RowBetween>\n                  <TYPE.white fontSize={14}>\n                    <Trans>\n                      UNI tokens represent voting shares in Uniswap governance. You can vote on each proposal yourself\n                      or delegate your votes to a third party.\n                    </Trans>\n                  </TYPE.white>\n                </RowBetween>\n                <ExternalLink\n                  style={{ color: 'white', textDecoration: 'underline' }}\n                  href=\"https://uniswap.org/blog/uni\"\n                  target=\"_blank\"\n                >\n                  <TYPE.white fontSize={14}>\n                    <Trans>Read more about Uniswap governance</Trans>\n                  </TYPE.white>\n                </ExternalLink>\n              </AutoColumn>\n            </CardSection>\n            <CardBGImage />\n            <CardNoise />\n          </VoteCard>\n        </TopSection>\n        <TopSection gap=\"2px\">\n          <WrapSmall>\n            <TYPE.mediumHeader style={{ margin: '0.5rem 0.5rem 0.5rem 0', flexShrink: 0 }}>\n              <Trans>Proposals</Trans>\n            </TYPE.mediumHeader>\n            <AutoRow gap=\"6px\" justify=\"flex-end\">\n              {loadingProposals || loadingAvailableVotes ? <Loader /> : null}\n              {showUnlockVoting ? (\n                <ButtonPrimary\n                  style={{ width: 'fit-content' }}\n                  padding=\"8px\"\n                  $borderRadius=\"8px\"\n                  onClick={toggleDelegateModal}\n                >\n                  <Trans>Unlock Voting</Trans>\n                </ButtonPrimary>\n              ) : availableVotes && JSBI.notEqual(JSBI.BigInt(0), availableVotes?.quotient) ? (\n                <TYPE.body fontWeight={500} mr=\"6px\">\n                  <Trans>\n                    <FormattedCurrencyAmount currencyAmount={availableVotes} /> Votes\n                  </Trans>\n                </TYPE.body>\n              ) : uniBalance &&\n                userDelegatee &&\n                userDelegatee !== ZERO_ADDRESS &&\n                JSBI.notEqual(JSBI.BigInt(0), uniBalance?.quotient) ? (\n                <TYPE.body fontWeight={500} mr=\"6px\">\n                  <Trans>\n                    <FormattedCurrencyAmount currencyAmount={uniBalance} /> Votes\n                  </Trans>\n                </TYPE.body>\n              ) : (\n                ''\n              )}\n              <ButtonPrimary\n                as={Link}\n                to=\"/create-proposal\"\n                style={{ width: 'fit-content', borderRadius: '8px' }}\n                padding=\"8px\"\n              >\n                <Trans>Create Proposal</Trans>\n              </ButtonPrimary>\n            </AutoRow>\n          </WrapSmall>\n          {!showUnlockVoting && (\n            <RowBetween>\n              <div />\n              {userDelegatee && userDelegatee !== ZERO_ADDRESS ? (\n                <RowFixed>\n                  <TYPE.body fontWeight={500} mr=\"4px\">\n                    <Trans>Delegated to:</Trans>\n                  </TYPE.body>\n                  <AddressButton>\n                    <StyledExternalLink\n                      href={getExplorerLink(1, userDelegatee, ExplorerDataType.ADDRESS)}\n                      style={{ margin: '0 4px' }}\n                    >\n                      {userDelegatee === account ? <Trans>Self</Trans> : shortenAddress(userDelegatee)}\n                    </StyledExternalLink>\n                    <TextButton onClick={toggleDelegateModal} style={{ marginLeft: '4px' }}>\n                      <Trans>(edit)</Trans>\n                    </TextButton>\n                  </AddressButton>\n                </RowFixed>\n              ) : (\n                ''\n              )}\n            </RowBetween>\n          )}\n          {allProposals?.length === 0 && <ProposalEmptyState />}\n          {allProposals\n            ?.slice(0)\n            ?.reverse()\n            ?.map((p: ProposalData) => {\n              return (\n                <Proposal as={Link} to={`/vote/${p.governorIndex}/${p.id}`} key={`${p.governorIndex}${p.id}`}>\n                  <ProposalNumber>\n                    {p.governorIndex}.{p.id}\n                  </ProposalNumber>\n                  <ProposalTitle>{p.title}</ProposalTitle>\n                  <ProposalStatus status={p.status} />\n                </Proposal>\n              )\n            })}\n        </TopSection>\n        <TYPE.subHeader color=\"text3\">\n          <Trans>A minimum threshold of 0.25% of the total UNI supply is required to submit proposals</Trans>\n        </TYPE.subHeader>\n      </PageWrapper>\n      <SwitchLocaleLink />\n    </>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}