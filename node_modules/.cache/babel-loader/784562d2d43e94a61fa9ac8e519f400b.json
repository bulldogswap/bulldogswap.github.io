{"ast":null,"code":"import _slicedToArray from\"/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import{ThemeContext as _ThemeContext}from\"styled-components\";import _styled from\"styled-components\";var _templateObject,_templateObject2,_templateObject3,_templateObject4;import{Trans}from\"@lingui/react\";import{useContext,useMemo}from'react';import JSBI from'jsbi';import{Link}from'react-router-dom';import{SwapPoolTabs}from'../../components/NavigationTabs';import FullPositionCard from'../../components/PositionCard';import{useTokenBalancesWithLoadingIndicator}from'../../state/wallet/hooks';import{ExternalLink,TYPE,HideSmall}from'../../theme';import{Text}from'rebass';import Card from'../../components/Card';import{RowBetween,RowFixed}from'../../components/Row';import{ButtonPrimary,ButtonSecondary,ButtonOutlined}from'../../components/Button';import{ChevronsRight}from'react-feather';import{AutoColumn}from'../../components/Column';import{useActiveWeb3React}from'../../hooks/web3';import{useV2Pairs}from'../../hooks/useV2Pairs';import{toV2LiquidityToken,useTrackedTokenPairs}from'../../state/user/hooks';import{Dots}from'../../components/swap/styleds';import{CardSection,DataCard,CardNoise,CardBGImage}from'../../components/earn/styled';import{SwitchLocaleLink}from'../../components/SwitchLocaleLink';import{useStakingInfo}from'../../state/stake/hooks';import{BIG_INT_ZERO}from'../../constants/misc';import{L2_CHAIN_IDS}from'constants/chains';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var PageWrapper=_styled(AutoColumn).withConfig({componentId:\"sc-1a8iabs-0\"})([\"max-width:640px;width:100%;\"]);var VoteCard=_styled(DataCard).withConfig({componentId:\"sc-1a8iabs-1\"})([\"background:radial-gradient(76.02% 75.41% at 1.84% 0%,#27ae60 0%,#000000 100%);overflow:hidden;\"]);var TitleRow=_styled(RowBetween).withConfig({componentId:\"sc-1a8iabs-2\"})([\"\",\";\"],function(_ref){var theme=_ref.theme;return theme.mediaWidth.upToSmall(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    flex-wrap: wrap;\\n    gap: 12px;\\n    width: 100%;\\n    flex-direction: column-reverse;\\n  \"])));});var ButtonRow=_styled(RowFixed).withConfig({componentId:\"sc-1a8iabs-3\"})([\"gap:8px;\",\";\"],function(_ref2){var theme=_ref2.theme;return theme.mediaWidth.upToSmall(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n    width: 100%;\\n    flex-direction: row-reverse;\\n    justify-content: space-between;\\n  \"])));});var ResponsiveButtonPrimary=_styled(ButtonPrimary).withConfig({componentId:\"sc-1a8iabs-4\"})([\"width:fit-content;border-radius:12px;\",\";\"],function(_ref3){var theme=_ref3.theme;return theme.mediaWidth.upToSmall(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n    width: 48%;\\n  \"])));});var ResponsiveButtonSecondary=_styled(ButtonSecondary).withConfig({componentId:\"sc-1a8iabs-5\"})([\"width:fit-content;\",\";\"],function(_ref4){var theme=_ref4.theme;return theme.mediaWidth.upToSmall(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n    width: 48%;\\n  \"])));});var EmptyProposals=_styled.div.withConfig({componentId:\"sc-1a8iabs-6\"})([\"border:1px solid \",\";padding:16px 12px;border-radius:12px;display:flex;flex-direction:column;justify-content:center;align-items:center;\"],function(_ref5){var theme=_ref5.theme;return theme.text4;});var Layer2Prompt=_styled(EmptyProposals).withConfig({componentId:\"sc-1a8iabs-7\"})([\"margin-top:16px;\"]);export default function Pool(){var theme=useContext(_ThemeContext);var _useActiveWeb3React=useActiveWeb3React(),account=_useActiveWeb3React.account,chainId=_useActiveWeb3React.chainId;// fetch the user's balances of all tracked V2 LP tokens\nvar trackedTokenPairs=useTrackedTokenPairs();var tokenPairsWithLiquidityTokens=useMemo(function(){return trackedTokenPairs.map(function(tokens){return{liquidityToken:toV2LiquidityToken(tokens),tokens:tokens};});},[trackedTokenPairs]);var liquidityTokens=useMemo(function(){return tokenPairsWithLiquidityTokens.map(function(tpwlt){return tpwlt.liquidityToken;});},[tokenPairsWithLiquidityTokens]);var _useTokenBalancesWith=useTokenBalancesWithLoadingIndicator(account!==null&&account!==void 0?account:undefined,liquidityTokens),_useTokenBalancesWith2=_slicedToArray(_useTokenBalancesWith,2),v2PairsBalances=_useTokenBalancesWith2[0],fetchingV2PairBalances=_useTokenBalancesWith2[1];// fetch the reserves for all V2 pools in which the user has a balance\nvar liquidityTokensWithBalances=useMemo(function(){return tokenPairsWithLiquidityTokens.filter(function(_ref6){var _v2PairsBalances$liqu;var liquidityToken=_ref6.liquidityToken;return(_v2PairsBalances$liqu=v2PairsBalances[liquidityToken.address])===null||_v2PairsBalances$liqu===void 0?void 0:_v2PairsBalances$liqu.greaterThan('0');});},[tokenPairsWithLiquidityTokens,v2PairsBalances]);var v2Pairs=useV2Pairs(liquidityTokensWithBalances.map(function(_ref7){var tokens=_ref7.tokens;return tokens;}));var v2IsLoading=fetchingV2PairBalances||(v2Pairs===null||v2Pairs===void 0?void 0:v2Pairs.length)<liquidityTokensWithBalances.length||(v2Pairs===null||v2Pairs===void 0?void 0:v2Pairs.some(function(V2Pair){return!V2Pair;}));var allV2PairsWithLiquidity=v2Pairs.map(function(_ref8){var _ref9=_slicedToArray(_ref8,2),pair=_ref9[1];return pair;}).filter(function(v2Pair){return Boolean(v2Pair);});// show liquidity even if its deposited in rewards contract\nvar stakingInfo=useStakingInfo();var stakingInfosWithBalance=stakingInfo===null||stakingInfo===void 0?void 0:stakingInfo.filter(function(pool){return JSBI.greaterThan(pool.stakedAmount.quotient,BIG_INT_ZERO);});var stakingPairs=useV2Pairs(stakingInfosWithBalance===null||stakingInfosWithBalance===void 0?void 0:stakingInfosWithBalance.map(function(stakingInfo){return stakingInfo.tokens;}));// remove any pairs that also are included in pairs with stake in mining pool\nvar v2PairsWithoutStakedAmount=allV2PairsWithLiquidity.filter(function(v2Pair){return(stakingPairs===null||stakingPairs===void 0?void 0:stakingPairs.map(function(stakingPair){return stakingPair[1];}).filter(function(stakingPair){return(stakingPair===null||stakingPair===void 0?void 0:stakingPair.liquidityToken.address)===v2Pair.liquidityToken.address;}).length)===0;});var ON_L2=chainId&&L2_CHAIN_IDS.includes(chainId);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(PageWrapper,{children:[/*#__PURE__*/_jsx(SwapPoolTabs,{active:'pool'}),/*#__PURE__*/_jsxs(VoteCard,{children:[/*#__PURE__*/_jsx(CardBGImage,{}),/*#__PURE__*/_jsx(CardNoise,{}),/*#__PURE__*/_jsx(CardSection,{children:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"md\",children:[/*#__PURE__*/_jsx(RowBetween,{children:/*#__PURE__*/_jsx(TYPE.white,{fontWeight:600,children:/*#__PURE__*/_jsx(Trans,{id:\"Liquidity provider rewards\"})})}),/*#__PURE__*/_jsx(RowBetween,{children:/*#__PURE__*/_jsx(TYPE.white,{fontSize:14,children:/*#__PURE__*/_jsx(Trans,{id:\"Liquidity providers earn a 0.3% fee on all trades proportional to their share of the pool. Fees are added to the pool, accrue in real time and can be claimed by withdrawing your liquidity.\"})})}),/*#__PURE__*/_jsx(ExternalLink,{style:{color:'white',textDecoration:'underline'},target:\"_blank\",href:\"https://uniswap.org/docs/v2/core-concepts/pools/\",children:/*#__PURE__*/_jsx(TYPE.white,{fontSize:14,children:/*#__PURE__*/_jsx(Trans,{id:\"Read more about providing liquidity\"})})})]})}),/*#__PURE__*/_jsx(CardBGImage,{}),/*#__PURE__*/_jsx(CardNoise,{})]}),ON_L2?/*#__PURE__*/_jsx(AutoColumn,{gap:\"lg\",justify:\"center\",children:/*#__PURE__*/_jsx(AutoColumn,{gap:\"md\",style:{width:'100%'},children:/*#__PURE__*/_jsx(Layer2Prompt,{children:/*#__PURE__*/_jsx(TYPE.body,{color:theme.text3,textAlign:\"center\",children:/*#__PURE__*/_jsx(Trans,{id:\"V2 is not available on Layer 2. Switch to Layer 1 Ethereum.\"})})})})}):/*#__PURE__*/_jsx(AutoColumn,{gap:\"lg\",justify:\"center\",children:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"md\",style:{width:'100%'},children:[/*#__PURE__*/_jsxs(TitleRow,{style:{marginTop:'1rem'},padding:'0',children:[/*#__PURE__*/_jsx(HideSmall,{children:/*#__PURE__*/_jsx(TYPE.mediumHeader,{style:{marginTop:'0.5rem',justifySelf:'flex-start'},children:/*#__PURE__*/_jsx(Trans,{id:\"Your V2 liquidity\"})})}),/*#__PURE__*/_jsxs(ButtonRow,{children:[/*#__PURE__*/_jsx(ResponsiveButtonSecondary,{as:Link,padding:\"6px 8px\",to:\"/add/v2/ETH\",children:/*#__PURE__*/_jsx(Trans,{id:\"Create a pair\"})}),/*#__PURE__*/_jsx(ResponsiveButtonPrimary,{id:\"find-pool-button\",as:Link,to:\"/pool/v2/find\",padding:\"6px 8px\",children:/*#__PURE__*/_jsx(Text,{fontWeight:500,fontSize:16,children:/*#__PURE__*/_jsx(Trans,{id:\"Import Pool\"})})}),/*#__PURE__*/_jsx(ResponsiveButtonPrimary,{id:\"join-pool-button\",as:Link,to:\"/add/v2/ETH\",padding:\"6px 8px\",children:/*#__PURE__*/_jsx(Text,{fontWeight:500,fontSize:16,children:/*#__PURE__*/_jsx(Trans,{id:\"Add V2 Liquidity\"})})})]})]}),!account?/*#__PURE__*/_jsx(Card,{padding:\"40px\",children:/*#__PURE__*/_jsx(TYPE.body,{color:theme.text3,textAlign:\"center\",children:/*#__PURE__*/_jsx(Trans,{id:\"Connect to a wallet to view your liquidity.\"})})}):v2IsLoading?/*#__PURE__*/_jsx(EmptyProposals,{children:/*#__PURE__*/_jsx(TYPE.body,{color:theme.text3,textAlign:\"center\",children:/*#__PURE__*/_jsx(Dots,{children:/*#__PURE__*/_jsx(Trans,{id:\"Loading\"})})})}):(allV2PairsWithLiquidity===null||allV2PairsWithLiquidity===void 0?void 0:allV2PairsWithLiquidity.length)>0||(stakingPairs===null||stakingPairs===void 0?void 0:stakingPairs.length)>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ButtonSecondary,{children:/*#__PURE__*/_jsx(RowBetween,{children:/*#__PURE__*/_jsx(Trans,{id:\"<0>Account analytics and accrued fees</0><1> \\u2197 </1>\",components:{0:/*#__PURE__*/_jsx(ExternalLink,{href:'https://v2.info.uniswap.org/account/'+account}),1:/*#__PURE__*/_jsx(\"span\",{})}})})}),v2PairsWithoutStakedAmount.map(function(v2Pair){return/*#__PURE__*/_jsx(FullPositionCard,{pair:v2Pair},v2Pair.liquidityToken.address);}),stakingPairs.map(function(stakingPair,i){return stakingPair[1]&&/*#__PURE__*/ // skip pairs that arent loaded\n_jsx(FullPositionCard,{pair:stakingPair[1],stakedBalance:stakingInfosWithBalance[i].stakedAmount},stakingInfosWithBalance[i].stakingRewardAddress);}),/*#__PURE__*/_jsx(RowFixed,{justify:\"center\",style:{width:'100%'},children:/*#__PURE__*/_jsxs(ButtonOutlined,{as:Link,to:\"/migrate/v2\",id:\"import-pool-link\",style:{padding:'8px 16px',margin:'0 4px',borderRadius:'12px',width:'fit-content',fontSize:'14px'},children:[/*#__PURE__*/_jsx(ChevronsRight,{size:16,style:{marginRight:'8px'}}),/*#__PURE__*/_jsx(Trans,{id:\"Migrate Liquidity to V3\"})]})})]}):/*#__PURE__*/_jsx(EmptyProposals,{children:/*#__PURE__*/_jsx(TYPE.body,{color:theme.text3,textAlign:\"center\",children:/*#__PURE__*/_jsx(Trans,{id:\"No liquidity found.\"})})})]})})]}),/*#__PURE__*/_jsx(SwitchLocaleLink,{})]});}","map":{"version":3,"sources":["/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/src/pages/Pool/v2.tsx"],"names":["useContext","useMemo","JSBI","Link","SwapPoolTabs","FullPositionCard","useTokenBalancesWithLoadingIndicator","ExternalLink","TYPE","HideSmall","Text","Card","RowBetween","RowFixed","ButtonPrimary","ButtonSecondary","ButtonOutlined","ChevronsRight","AutoColumn","useActiveWeb3React","useV2Pairs","toV2LiquidityToken","useTrackedTokenPairs","Dots","CardSection","DataCard","CardNoise","CardBGImage","SwitchLocaleLink","useStakingInfo","BIG_INT_ZERO","L2_CHAIN_IDS","PageWrapper","styled","VoteCard","TitleRow","theme","mediaWidth","upToSmall","ButtonRow","ResponsiveButtonPrimary","ResponsiveButtonSecondary","EmptyProposals","div","text4","Layer2Prompt","Pool","ThemeContext","account","chainId","trackedTokenPairs","tokenPairsWithLiquidityTokens","map","tokens","liquidityToken","liquidityTokens","tpwlt","undefined","v2PairsBalances","fetchingV2PairBalances","liquidityTokensWithBalances","filter","address","greaterThan","v2Pairs","v2IsLoading","length","some","V2Pair","allV2PairsWithLiquidity","pair","v2Pair","Boolean","stakingInfo","stakingInfosWithBalance","pool","stakedAmount","quotient","stakingPairs","v2PairsWithoutStakedAmount","stakingPair","ON_L2","includes","color","textDecoration","width","text3","marginTop","justifySelf","i","stakingRewardAddress","padding","margin","borderRadius","fontSize","marginRight"],"mappings":"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","sourcesContent":["import { useContext, useMemo } from 'react'\nimport styled, { ThemeContext } from 'styled-components/macro'\nimport JSBI from 'jsbi'\nimport { Link } from 'react-router-dom'\nimport { SwapPoolTabs } from '../../components/NavigationTabs'\nimport FullPositionCard from '../../components/PositionCard'\nimport { useTokenBalancesWithLoadingIndicator } from '../../state/wallet/hooks'\nimport { ExternalLink, TYPE, HideSmall } from '../../theme'\nimport { Text } from 'rebass'\nimport Card from '../../components/Card'\nimport { RowBetween, RowFixed } from '../../components/Row'\nimport { ButtonPrimary, ButtonSecondary, ButtonOutlined } from '../../components/Button'\nimport { ChevronsRight } from 'react-feather'\n\nimport { AutoColumn } from '../../components/Column'\n\nimport { useActiveWeb3React } from '../../hooks/web3'\nimport { useV2Pairs } from '../../hooks/useV2Pairs'\nimport { toV2LiquidityToken, useTrackedTokenPairs } from '../../state/user/hooks'\nimport { Dots } from '../../components/swap/styleds'\nimport { CardSection, DataCard, CardNoise, CardBGImage } from '../../components/earn/styled'\nimport { SwitchLocaleLink } from '../../components/SwitchLocaleLink'\nimport { useStakingInfo } from '../../state/stake/hooks'\nimport { BIG_INT_ZERO } from '../../constants/misc'\nimport { Pair } from '@uniswap/v2-sdk'\nimport { Trans } from '@lingui/macro'\nimport { L2_CHAIN_IDS } from 'constants/chains'\n\nconst PageWrapper = styled(AutoColumn)`\n  max-width: 640px;\n  width: 100%;\n`\n\nconst VoteCard = styled(DataCard)`\n  background: radial-gradient(76.02% 75.41% at 1.84% 0%, #27ae60 0%, #000000 100%);\n  overflow: hidden;\n`\n\nconst TitleRow = styled(RowBetween)`\n  ${({ theme }) => theme.mediaWidth.upToSmall`\n    flex-wrap: wrap;\n    gap: 12px;\n    width: 100%;\n    flex-direction: column-reverse;\n  `};\n`\n\nconst ButtonRow = styled(RowFixed)`\n  gap: 8px;\n  ${({ theme }) => theme.mediaWidth.upToSmall`\n    width: 100%;\n    flex-direction: row-reverse;\n    justify-content: space-between;\n  `};\n`\n\nconst ResponsiveButtonPrimary = styled(ButtonPrimary)`\n  width: fit-content;\n  border-radius: 12px;\n  ${({ theme }) => theme.mediaWidth.upToSmall`\n    width: 48%;\n  `};\n`\n\nconst ResponsiveButtonSecondary = styled(ButtonSecondary)`\n  width: fit-content;\n  ${({ theme }) => theme.mediaWidth.upToSmall`\n    width: 48%;\n  `};\n`\n\nconst EmptyProposals = styled.div`\n  border: 1px solid ${({ theme }) => theme.text4};\n  padding: 16px 12px;\n  border-radius: 12px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n`\n\nconst Layer2Prompt = styled(EmptyProposals)`\n  margin-top: 16px;\n`\n\nexport default function Pool() {\n  const theme = useContext(ThemeContext)\n  const { account, chainId } = useActiveWeb3React()\n\n  // fetch the user's balances of all tracked V2 LP tokens\n  const trackedTokenPairs = useTrackedTokenPairs()\n  const tokenPairsWithLiquidityTokens = useMemo(\n    () => trackedTokenPairs.map((tokens) => ({ liquidityToken: toV2LiquidityToken(tokens), tokens })),\n    [trackedTokenPairs]\n  )\n  const liquidityTokens = useMemo(\n    () => tokenPairsWithLiquidityTokens.map((tpwlt) => tpwlt.liquidityToken),\n    [tokenPairsWithLiquidityTokens]\n  )\n  const [v2PairsBalances, fetchingV2PairBalances] = useTokenBalancesWithLoadingIndicator(\n    account ?? undefined,\n    liquidityTokens\n  )\n\n  // fetch the reserves for all V2 pools in which the user has a balance\n  const liquidityTokensWithBalances = useMemo(\n    () =>\n      tokenPairsWithLiquidityTokens.filter(({ liquidityToken }) =>\n        v2PairsBalances[liquidityToken.address]?.greaterThan('0')\n      ),\n    [tokenPairsWithLiquidityTokens, v2PairsBalances]\n  )\n\n  const v2Pairs = useV2Pairs(liquidityTokensWithBalances.map(({ tokens }) => tokens))\n  const v2IsLoading =\n    fetchingV2PairBalances || v2Pairs?.length < liquidityTokensWithBalances.length || v2Pairs?.some((V2Pair) => !V2Pair)\n\n  const allV2PairsWithLiquidity = v2Pairs.map(([, pair]) => pair).filter((v2Pair): v2Pair is Pair => Boolean(v2Pair))\n\n  // show liquidity even if its deposited in rewards contract\n  const stakingInfo = useStakingInfo()\n  const stakingInfosWithBalance = stakingInfo?.filter((pool) =>\n    JSBI.greaterThan(pool.stakedAmount.quotient, BIG_INT_ZERO)\n  )\n  const stakingPairs = useV2Pairs(stakingInfosWithBalance?.map((stakingInfo) => stakingInfo.tokens))\n\n  // remove any pairs that also are included in pairs with stake in mining pool\n  const v2PairsWithoutStakedAmount = allV2PairsWithLiquidity.filter((v2Pair) => {\n    return (\n      stakingPairs\n        ?.map((stakingPair) => stakingPair[1])\n        .filter((stakingPair) => stakingPair?.liquidityToken.address === v2Pair.liquidityToken.address).length === 0\n    )\n  })\n\n  const ON_L2 = chainId && L2_CHAIN_IDS.includes(chainId)\n\n  return (\n    <>\n      <PageWrapper>\n        <SwapPoolTabs active={'pool'} />\n        <VoteCard>\n          <CardBGImage />\n          <CardNoise />\n          <CardSection>\n            <AutoColumn gap=\"md\">\n              <RowBetween>\n                <TYPE.white fontWeight={600}>\n                  <Trans>Liquidity provider rewards</Trans>\n                </TYPE.white>\n              </RowBetween>\n              <RowBetween>\n                <TYPE.white fontSize={14}>\n                  <Trans>\n                    Liquidity providers earn a 0.3% fee on all trades proportional to their share of the pool. Fees are\n                    added to the pool, accrue in real time and can be claimed by withdrawing your liquidity.\n                  </Trans>\n                </TYPE.white>\n              </RowBetween>\n              <ExternalLink\n                style={{ color: 'white', textDecoration: 'underline' }}\n                target=\"_blank\"\n                href=\"https://uniswap.org/docs/v2/core-concepts/pools/\"\n              >\n                <TYPE.white fontSize={14}>\n                  <Trans>Read more about providing liquidity</Trans>\n                </TYPE.white>\n              </ExternalLink>\n            </AutoColumn>\n          </CardSection>\n          <CardBGImage />\n          <CardNoise />\n        </VoteCard>\n\n        {ON_L2 ? (\n          <AutoColumn gap=\"lg\" justify=\"center\">\n            <AutoColumn gap=\"md\" style={{ width: '100%' }}>\n              <Layer2Prompt>\n                <TYPE.body color={theme.text3} textAlign=\"center\">\n                  <Trans>V2 is not available on Layer 2. Switch to Layer 1 Ethereum.</Trans>\n                </TYPE.body>\n              </Layer2Prompt>\n            </AutoColumn>\n          </AutoColumn>\n        ) : (\n          <AutoColumn gap=\"lg\" justify=\"center\">\n            <AutoColumn gap=\"md\" style={{ width: '100%' }}>\n              <TitleRow style={{ marginTop: '1rem' }} padding={'0'}>\n                <HideSmall>\n                  <TYPE.mediumHeader style={{ marginTop: '0.5rem', justifySelf: 'flex-start' }}>\n                    <Trans>Your V2 liquidity</Trans>\n                  </TYPE.mediumHeader>\n                </HideSmall>\n                <ButtonRow>\n                  <ResponsiveButtonSecondary as={Link} padding=\"6px 8px\" to=\"/add/v2/ETH\">\n                    <Trans>Create a pair</Trans>\n                  </ResponsiveButtonSecondary>\n                  <ResponsiveButtonPrimary id=\"find-pool-button\" as={Link} to=\"/pool/v2/find\" padding=\"6px 8px\">\n                    <Text fontWeight={500} fontSize={16}>\n                      <Trans>Import Pool</Trans>\n                    </Text>\n                  </ResponsiveButtonPrimary>\n                  <ResponsiveButtonPrimary id=\"join-pool-button\" as={Link} to=\"/add/v2/ETH\" padding=\"6px 8px\">\n                    <Text fontWeight={500} fontSize={16}>\n                      <Trans>Add V2 Liquidity</Trans>\n                    </Text>\n                  </ResponsiveButtonPrimary>\n                </ButtonRow>\n              </TitleRow>\n\n              {!account ? (\n                <Card padding=\"40px\">\n                  <TYPE.body color={theme.text3} textAlign=\"center\">\n                    <Trans>Connect to a wallet to view your liquidity.</Trans>\n                  </TYPE.body>\n                </Card>\n              ) : v2IsLoading ? (\n                <EmptyProposals>\n                  <TYPE.body color={theme.text3} textAlign=\"center\">\n                    <Dots>\n                      <Trans>Loading</Trans>\n                    </Dots>\n                  </TYPE.body>\n                </EmptyProposals>\n              ) : allV2PairsWithLiquidity?.length > 0 || stakingPairs?.length > 0 ? (\n                <>\n                  <ButtonSecondary>\n                    <RowBetween>\n                      <Trans>\n                        <ExternalLink href={'https://v2.info.uniswap.org/account/' + account}>\n                          Account analytics and accrued fees\n                        </ExternalLink>\n                        <span> ↗ </span>\n                      </Trans>\n                    </RowBetween>\n                  </ButtonSecondary>\n                  {v2PairsWithoutStakedAmount.map((v2Pair) => (\n                    <FullPositionCard key={v2Pair.liquidityToken.address} pair={v2Pair} />\n                  ))}\n                  {stakingPairs.map(\n                    (stakingPair, i) =>\n                      stakingPair[1] && ( // skip pairs that arent loaded\n                        <FullPositionCard\n                          key={stakingInfosWithBalance[i].stakingRewardAddress}\n                          pair={stakingPair[1]}\n                          stakedBalance={stakingInfosWithBalance[i].stakedAmount}\n                        />\n                      )\n                  )}\n                  <RowFixed justify=\"center\" style={{ width: '100%' }}>\n                    <ButtonOutlined\n                      as={Link}\n                      to=\"/migrate/v2\"\n                      id=\"import-pool-link\"\n                      style={{\n                        padding: '8px 16px',\n                        margin: '0 4px',\n                        borderRadius: '12px',\n                        width: 'fit-content',\n                        fontSize: '14px',\n                      }}\n                    >\n                      <ChevronsRight size={16} style={{ marginRight: '8px' }} />\n                      <Trans>Migrate Liquidity to V3</Trans>\n                    </ButtonOutlined>\n                  </RowFixed>\n                </>\n              ) : (\n                <EmptyProposals>\n                  <TYPE.body color={theme.text3} textAlign=\"center\">\n                    <Trans>No liquidity found.</Trans>\n                  </TYPE.body>\n                </EmptyProposals>\n              )}\n            </AutoColumn>\n          </AutoColumn>\n        )}\n      </PageWrapper>\n      <SwitchLocaleLink />\n    </>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}