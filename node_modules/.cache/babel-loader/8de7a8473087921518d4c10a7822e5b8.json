{"ast":null,"code":"import _slicedToArray from\"/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import{keyframes as _keyframes}from\"styled-components\";import _styled from\"styled-components\";var _templateObject,_templateObject2,_templateObject3;import{Trans}from\"@lingui/react\";import{useState,useCallback,useEffect}from'react';import{OutlineCard}from'components/Card';import{Input as NumericalInput}from'../NumericalInput';import{TYPE}from'theme';import{AutoColumn}from'components/Column';import{ButtonGray}from'components/Button';import{Plus,Minus}from'react-feather';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var pulse=function pulse(color){return _keyframes(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  0% {\\n    box-shadow: 0 0 0 0 \",\";\\n  }\\n\\n  70% {\\n    box-shadow: 0 0 0 2px \",\";\\n  }\\n\\n  100% {\\n    box-shadow: 0 0 0 0 \",\";\\n  }\\n\"])),color,color,color);};var InputRow=_styled.div.withConfig({componentId:\"sc-kflffs-0\"})([\"display:grid;grid-template-columns:30px 1fr 30px;\"]);var SmallButton=_styled(ButtonGray).withConfig({componentId:\"sc-kflffs-1\"})([\"border-radius:8px;padding:4px;\"]);var FocusedOutlineCard=_styled(OutlineCard).withConfig({componentId:\"sc-kflffs-2\"})([\"border-color:\",\";padding:12px;animation:\",\" 0.8s linear;\"],function(_ref){var active=_ref.active,theme=_ref.theme;return active&&theme.blue1;},function(_ref2){var pulsing=_ref2.pulsing,theme=_ref2.theme;return pulsing&&pulse(theme.blue1);});var StyledInput=_styled(NumericalInput).withConfig({componentId:\"sc-kflffs-3\"})([\"background-color:transparent;text-align:center;width:100%;font-weight:500;padding:0 10px;\",\";\",\";\"],function(_ref3){var theme=_ref3.theme;return theme.mediaWidth.upToSmall(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n    font-size: 16px;\\n  \"])));},function(_ref4){var theme=_ref4.theme;return theme.mediaWidth.upToExtraSmall(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n    font-size: 12px;\\n  \"])));});var InputTitle=_styled(TYPE.small).withConfig({componentId:\"sc-kflffs-4\"})([\"color:\",\";font-size:12px;font-weight:500;\"],function(_ref5){var theme=_ref5.theme;return theme.text2;});var ButtonLabel=_styled(TYPE.white).withConfig({componentId:\"sc-kflffs-5\"})([\"color:\",\" !important;\"],function(_ref6){var theme=_ref6.theme,disabled=_ref6.disabled;return disabled?theme.text2:theme.text1;});var StepCounter=function StepCounter(_ref7){var value=_ref7.value,decrement=_ref7.decrement,increment=_ref7.increment,_ref7$decrementDisabl=_ref7.decrementDisabled,decrementDisabled=_ref7$decrementDisabl===void 0?false:_ref7$decrementDisabl,_ref7$incrementDisabl=_ref7.incrementDisabled,incrementDisabled=_ref7$incrementDisabl===void 0?false:_ref7$incrementDisabl,width=_ref7.width,locked=_ref7.locked,onUserInput=_ref7.onUserInput,title=_ref7.title,tokenA=_ref7.tokenA,tokenB=_ref7.tokenB;//  for focus state, styled components doesnt let you select input parent container\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),active=_useState2[0],setActive=_useState2[1];// let user type value and only update parent value on blur\nvar _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),localValue=_useState4[0],setLocalValue=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),useLocalValue=_useState6[0],setUseLocalValue=_useState6[1];// animation if parent value updates local value\nvar _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),pulsing=_useState8[0],setPulsing=_useState8[1];var handleOnFocus=function handleOnFocus(){setUseLocalValue(true);setActive(true);};var handleOnBlur=useCallback(function(){setUseLocalValue(false);setActive(false);onUserInput(localValue);// trigger update on parent value\n},[localValue,onUserInput]);// for button clicks\nvar handleDecrement=useCallback(function(){setUseLocalValue(false);onUserInput(decrement());},[decrement,onUserInput]);var handleIncrement=useCallback(function(){setUseLocalValue(false);onUserInput(increment());},[increment,onUserInput]);useEffect(function(){if(localValue!==value&&!useLocalValue){setTimeout(function(){setLocalValue(value);// reset local value to match parent\nsetPulsing(true);// trigger animation\nsetTimeout(function(){setPulsing(false);},1800);},0);}},[localValue,useLocalValue,value]);return/*#__PURE__*/_jsx(FocusedOutlineCard,{pulsing:pulsing,active:active,onFocus:handleOnFocus,onBlur:handleOnBlur,width:width,children:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"6px\",children:[/*#__PURE__*/_jsx(InputTitle,{fontSize:12,textAlign:\"center\",children:title}),/*#__PURE__*/_jsxs(InputRow,{children:[!locked&&/*#__PURE__*/_jsx(SmallButton,{onClick:handleDecrement,disabled:decrementDisabled,children:/*#__PURE__*/_jsx(ButtonLabel,{disabled:decrementDisabled,fontSize:\"12px\",children:/*#__PURE__*/_jsx(Minus,{size:18})})}),/*#__PURE__*/_jsx(StyledInput,{className:\"rate-input-0\",value:localValue,fontSize:\"20px\",disabled:locked,onUserInput:function onUserInput(val){setLocalValue(val);}}),!locked&&/*#__PURE__*/_jsx(SmallButton,{onClick:handleIncrement,disabled:incrementDisabled,children:/*#__PURE__*/_jsx(ButtonLabel,{disabled:incrementDisabled,fontSize:\"12px\",children:/*#__PURE__*/_jsx(Plus,{size:18})})})]}),/*#__PURE__*/_jsx(InputTitle,{fontSize:12,textAlign:\"center\",children:/*#__PURE__*/_jsx(Trans,{id:\"{tokenB} per {tokenA}\",values:{tokenB:tokenB,tokenA:tokenA}})})]})});};export default StepCounter;","map":{"version":3,"sources":["/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/src/components/InputStepCounter/InputStepCounter.tsx"],"names":["useState","useCallback","useEffect","OutlineCard","Input","NumericalInput","TYPE","AutoColumn","ButtonGray","Plus","Minus","pulse","color","keyframes","InputRow","styled","div","SmallButton","FocusedOutlineCard","active","theme","blue1","pulsing","StyledInput","mediaWidth","upToSmall","upToExtraSmall","InputTitle","small","text2","ButtonLabel","white","disabled","text1","StepCounter","value","decrement","increment","decrementDisabled","incrementDisabled","width","locked","onUserInput","title","tokenA","tokenB","setActive","localValue","setLocalValue","useLocalValue","setUseLocalValue","setPulsing","handleOnFocus","handleOnBlur","handleDecrement","handleIncrement","setTimeout","val"],"mappings":"qjBAAA,OAASA,QAAT,CAAmBC,WAAnB,CAAgCC,SAAhC,KAA4D,OAA5D,CACA,OAASC,WAAT,KAA4B,iBAA5B,CACA,OAASC,KAAK,GAAIC,CAAAA,cAAlB,KAAwC,mBAAxC,CAEA,OAASC,IAAT,KAAqB,OAArB,CACA,OAASC,UAAT,KAA2B,mBAA3B,CACA,OAASC,UAAT,KAA2B,mBAA3B,CAGA,OAASC,IAAT,CAAeC,KAAf,KAA4B,eAA5B,C,wFAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACC,KAAD,QAAmBC,CAAAA,UAAnB,6MAEYD,KAFZ,CAMcA,KANd,CAUYA,KAVZ,GAAd,CAcA,GAAME,CAAAA,QAAQ,CAAGC,OAAM,CAACC,GAAV,+FAAd,CAMA,GAAMC,CAAAA,WAAW,CAAGF,OAAM,CAACP,UAAD,CAAT,4EAAjB,CAKA,GAAMU,CAAAA,kBAAkB,CAAGH,OAAM,CAACZ,WAAD,CAAT,sGACN,kBAAGgB,CAAAA,MAAH,MAAGA,MAAH,CAAWC,KAAX,MAAWA,KAAX,OAAuBD,CAAAA,MAAM,EAAIC,KAAK,CAACC,KAAvC,EADM,CAGT,mBAAGC,CAAAA,OAAH,OAAGA,OAAH,CAAYF,KAAZ,OAAYA,KAAZ,OAAwBE,CAAAA,OAAO,EAAIX,KAAK,CAACS,KAAK,CAACC,KAAP,CAAxC,EAHS,CAAxB,CAMA,GAAME,CAAAA,WAAW,CAAGR,OAAM,CAACV,cAAD,CAAT,+IAOb,mBAAGe,CAAAA,KAAH,OAAGA,KAAH,OAAeA,CAAAA,KAAK,CAACI,UAAN,CAAiBC,SAAhC,+FAPa,CAWb,mBAAGL,CAAAA,KAAH,OAAGA,KAAH,OAAeA,CAAAA,KAAK,CAACI,UAAN,CAAiBE,cAAhC,+FAXa,CAAjB,CAgBA,GAAMC,CAAAA,UAAU,CAAGZ,OAAM,CAACT,IAAI,CAACsB,KAAN,CAAT,uFACL,mBAAGR,CAAAA,KAAH,OAAGA,KAAH,OAAeA,CAAAA,KAAK,CAACS,KAArB,EADK,CAAhB,CAMA,GAAMC,CAAAA,WAAW,CAAGf,OAAM,CAACT,IAAI,CAACyB,KAAN,CAAT,mEACN,mBAAGX,CAAAA,KAAH,OAAGA,KAAH,CAAUY,QAAV,OAAUA,QAAV,OAA0BA,CAAAA,QAAQ,CAAGZ,KAAK,CAACS,KAAT,CAAiBT,KAAK,CAACa,KAAzD,EADM,CAAjB,CAoBA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,OAYI,IAXtBC,CAAAA,KAWsB,OAXtBA,KAWsB,CAVtBC,SAUsB,OAVtBA,SAUsB,CATtBC,SASsB,OATtBA,SASsB,6BARtBC,iBAQsB,CARtBA,iBAQsB,gCARF,KAQE,mDAPtBC,iBAOsB,CAPtBA,iBAOsB,gCAPF,KAOE,uBANtBC,KAMsB,OANtBA,KAMsB,CALtBC,MAKsB,OALtBA,MAKsB,CAJtBC,WAIsB,OAJtBA,WAIsB,CAHtBC,KAGsB,OAHtBA,KAGsB,CAFtBC,MAEsB,OAFtBA,MAEsB,CADtBC,MACsB,OADtBA,MACsB,CACtB;AACA,cAA4B7C,QAAQ,CAAC,KAAD,CAApC,wCAAOmB,MAAP,eAAe2B,SAAf,eAEA;AACA,eAAoC9C,QAAQ,CAAC,EAAD,CAA5C,yCAAO+C,UAAP,eAAmBC,aAAnB,eACA,eAA0ChD,QAAQ,CAAC,KAAD,CAAlD,yCAAOiD,aAAP,eAAsBC,gBAAtB,eAEA;AACA,eAA8BlD,QAAQ,CAAU,KAAV,CAAtC,yCAAOsB,OAAP,eAAgB6B,UAAhB,eAEA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CAC1BF,gBAAgB,CAAC,IAAD,CAAhB,CACAJ,SAAS,CAAC,IAAD,CAAT,CACD,CAHD,CAKA,GAAMO,CAAAA,YAAY,CAAGpD,WAAW,CAAC,UAAM,CACrCiD,gBAAgB,CAAC,KAAD,CAAhB,CACAJ,SAAS,CAAC,KAAD,CAAT,CACAJ,WAAW,CAACK,UAAD,CAAX,CAAwB;AACzB,CAJ+B,CAI7B,CAACA,UAAD,CAAaL,WAAb,CAJ6B,CAAhC,CAMA;AACA,GAAMY,CAAAA,eAAe,CAAGrD,WAAW,CAAC,UAAM,CACxCiD,gBAAgB,CAAC,KAAD,CAAhB,CACAR,WAAW,CAACN,SAAS,EAAV,CAAX,CACD,CAHkC,CAGhC,CAACA,SAAD,CAAYM,WAAZ,CAHgC,CAAnC,CAKA,GAAMa,CAAAA,eAAe,CAAGtD,WAAW,CAAC,UAAM,CACxCiD,gBAAgB,CAAC,KAAD,CAAhB,CACAR,WAAW,CAACL,SAAS,EAAV,CAAX,CACD,CAHkC,CAGhC,CAACA,SAAD,CAAYK,WAAZ,CAHgC,CAAnC,CAKAxC,SAAS,CAAC,UAAM,CACd,GAAI6C,UAAU,GAAKZ,KAAf,EAAwB,CAACc,aAA7B,CAA4C,CAC1CO,UAAU,CAAC,UAAM,CACfR,aAAa,CAACb,KAAD,CAAb,CAAqB;AACrBgB,UAAU,CAAC,IAAD,CAAV,CAAiB;AACjBK,UAAU,CAAC,UAAY,CACrBL,UAAU,CAAC,KAAD,CAAV,CACD,CAFS,CAEP,IAFO,CAAV,CAGD,CANS,CAMP,CANO,CAAV,CAOD,CACF,CAVQ,CAUN,CAACJ,UAAD,CAAaE,aAAb,CAA4Bd,KAA5B,CAVM,CAAT,CAYA,mBACE,KAAC,kBAAD,EAAoB,OAAO,CAAEb,OAA7B,CAAsC,MAAM,CAAEH,MAA9C,CAAsD,OAAO,CAAEiC,aAA/D,CAA8E,MAAM,CAAEC,YAAtF,CAAoG,KAAK,CAAEb,KAA3G,uBACE,MAAC,UAAD,EAAY,GAAG,CAAC,KAAhB,wBACE,KAAC,UAAD,EAAY,QAAQ,CAAE,EAAtB,CAA0B,SAAS,CAAC,QAApC,UACGG,KADH,EADF,cAKE,MAAC,QAAD,YACG,CAACF,MAAD,eACC,KAAC,WAAD,EAAa,OAAO,CAAEa,eAAtB,CAAuC,QAAQ,CAAEhB,iBAAjD,uBACE,KAAC,WAAD,EAAa,QAAQ,CAAEA,iBAAvB,CAA0C,QAAQ,CAAC,MAAnD,uBACE,KAAC,KAAD,EAAO,IAAI,CAAE,EAAb,EADF,EADF,EAFJ,cASE,KAAC,WAAD,EACE,SAAS,CAAC,cADZ,CAEE,KAAK,CAAES,UAFT,CAGE,QAAQ,CAAC,MAHX,CAIE,QAAQ,CAAEN,MAJZ,CAKE,WAAW,CAAE,qBAACgB,GAAD,CAAS,CACpBT,aAAa,CAACS,GAAD,CAAb,CACD,CAPH,EATF,CAmBG,CAAChB,MAAD,eACC,KAAC,WAAD,EAAa,OAAO,CAAEc,eAAtB,CAAuC,QAAQ,CAAEhB,iBAAjD,uBACE,KAAC,WAAD,EAAa,QAAQ,CAAEA,iBAAvB,CAA0C,QAAQ,CAAC,MAAnD,uBACE,KAAC,IAAD,EAAM,IAAI,CAAE,EAAZ,EADF,EADF,EApBJ,GALF,cAiCE,KAAC,UAAD,EAAY,QAAQ,CAAE,EAAtB,CAA0B,SAAS,CAAC,QAApC,uBACE,sDACGM,MADH,QACgBD,MADhB,GADF,EAjCF,GADF,EADF,CA2CD,CApGD,CAsGA,cAAeV,CAAAA,WAAf","sourcesContent":["import { useState, useCallback, useEffect, ReactNode } from 'react'\nimport { OutlineCard } from 'components/Card'\nimport { Input as NumericalInput } from '../NumericalInput'\nimport styled, { keyframes } from 'styled-components/macro'\nimport { TYPE } from 'theme'\nimport { AutoColumn } from 'components/Column'\nimport { ButtonGray } from 'components/Button'\nimport { FeeAmount } from '@uniswap/v3-sdk'\nimport { Trans } from '@lingui/macro'\nimport { Plus, Minus } from 'react-feather'\n\nconst pulse = (color: string) => keyframes`\n  0% {\n    box-shadow: 0 0 0 0 ${color};\n  }\n\n  70% {\n    box-shadow: 0 0 0 2px ${color};\n  }\n\n  100% {\n    box-shadow: 0 0 0 0 ${color};\n  }\n`\n\nconst InputRow = styled.div`\n  display: grid;\n\n  grid-template-columns: 30px 1fr 30px;\n`\n\nconst SmallButton = styled(ButtonGray)`\n  border-radius: 8px;\n  padding: 4px;\n`\n\nconst FocusedOutlineCard = styled(OutlineCard)<{ active?: boolean; pulsing?: boolean }>`\n  border-color: ${({ active, theme }) => active && theme.blue1};\n  padding: 12px;\n  animation: ${({ pulsing, theme }) => pulsing && pulse(theme.blue1)} 0.8s linear;\n`\n\nconst StyledInput = styled(NumericalInput)<{ usePercent?: boolean }>`\n  background-color: transparent;\n  text-align: center;\n  width: 100%;\n  font-weight: 500;\n  padding: 0 10px;\n\n  ${({ theme }) => theme.mediaWidth.upToSmall`\n    font-size: 16px;\n  `};\n\n  ${({ theme }) => theme.mediaWidth.upToExtraSmall`\n    font-size: 12px;\n  `};\n`\n\nconst InputTitle = styled(TYPE.small)`\n  color: ${({ theme }) => theme.text2};\n  font-size: 12px;\n  font-weight: 500;\n`\n\nconst ButtonLabel = styled(TYPE.white)<{ disabled: boolean }>`\n  color: ${({ theme, disabled }) => (disabled ? theme.text2 : theme.text1)} !important;\n`\n\ninterface StepCounterProps {\n  value: string\n  onUserInput: (value: string) => void\n  decrement: () => string\n  increment: () => string\n  decrementDisabled?: boolean\n  incrementDisabled?: boolean\n  feeAmount?: FeeAmount\n  label?: string\n  width?: string\n  locked?: boolean // disable input\n  title: ReactNode\n  tokenA: string | undefined\n  tokenB: string | undefined\n}\n\nconst StepCounter = ({\n  value,\n  decrement,\n  increment,\n  decrementDisabled = false,\n  incrementDisabled = false,\n  width,\n  locked,\n  onUserInput,\n  title,\n  tokenA,\n  tokenB,\n}: StepCounterProps) => {\n  //  for focus state, styled components doesnt let you select input parent container\n  const [active, setActive] = useState(false)\n\n  // let user type value and only update parent value on blur\n  const [localValue, setLocalValue] = useState('')\n  const [useLocalValue, setUseLocalValue] = useState(false)\n\n  // animation if parent value updates local value\n  const [pulsing, setPulsing] = useState<boolean>(false)\n\n  const handleOnFocus = () => {\n    setUseLocalValue(true)\n    setActive(true)\n  }\n\n  const handleOnBlur = useCallback(() => {\n    setUseLocalValue(false)\n    setActive(false)\n    onUserInput(localValue) // trigger update on parent value\n  }, [localValue, onUserInput])\n\n  // for button clicks\n  const handleDecrement = useCallback(() => {\n    setUseLocalValue(false)\n    onUserInput(decrement())\n  }, [decrement, onUserInput])\n\n  const handleIncrement = useCallback(() => {\n    setUseLocalValue(false)\n    onUserInput(increment())\n  }, [increment, onUserInput])\n\n  useEffect(() => {\n    if (localValue !== value && !useLocalValue) {\n      setTimeout(() => {\n        setLocalValue(value) // reset local value to match parent\n        setPulsing(true) // trigger animation\n        setTimeout(function () {\n          setPulsing(false)\n        }, 1800)\n      }, 0)\n    }\n  }, [localValue, useLocalValue, value])\n\n  return (\n    <FocusedOutlineCard pulsing={pulsing} active={active} onFocus={handleOnFocus} onBlur={handleOnBlur} width={width}>\n      <AutoColumn gap=\"6px\">\n        <InputTitle fontSize={12} textAlign=\"center\">\n          {title}\n        </InputTitle>\n\n        <InputRow>\n          {!locked && (\n            <SmallButton onClick={handleDecrement} disabled={decrementDisabled}>\n              <ButtonLabel disabled={decrementDisabled} fontSize=\"12px\">\n                <Minus size={18} />\n              </ButtonLabel>\n            </SmallButton>\n          )}\n\n          <StyledInput\n            className=\"rate-input-0\"\n            value={localValue}\n            fontSize=\"20px\"\n            disabled={locked}\n            onUserInput={(val) => {\n              setLocalValue(val)\n            }}\n          />\n\n          {!locked && (\n            <SmallButton onClick={handleIncrement} disabled={incrementDisabled}>\n              <ButtonLabel disabled={incrementDisabled} fontSize=\"12px\">\n                <Plus size={18} />\n              </ButtonLabel>\n            </SmallButton>\n          )}\n        </InputRow>\n\n        <InputTitle fontSize={12} textAlign=\"center\">\n          <Trans>\n            {tokenB} per {tokenA}\n          </Trans>\n        </InputTitle>\n      </AutoColumn>\n    </FocusedOutlineCard>\n  )\n}\n\nexport default StepCounter\n"]},"metadata":{},"sourceType":"module"}