{"ast":null,"code":"import _slicedToArray from\"/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _taggedTemplateLiteral from\"/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import{keyframes as _keyframes}from\"styled-components\";import _styled from\"styled-components\";var _templateObject,_templateObject2,_FeeAmountLabel;import{Trans}from\"@lingui/react\";import React,{useCallback,useEffect,useRef,useState}from'react';import{FeeAmount}from'@uniswap/v3-sdk';import{AutoColumn}from'components/Column';import{DynamicSection}from'pages/AddLiquidity/styled';import{TYPE}from'theme';import{RowBetween}from'components/Row';import{ButtonGray,ButtonRadioChecked}from'components/Button';import Badge from'components/Badge';import Card from'components/Card';import usePrevious from'hooks/usePrevious';import{useFeeTierDistribution}from'hooks/useFeeTierDistribution';import ReactGA from'react-ga';import{Box}from'rebass';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var pulse=function pulse(color){return _keyframes(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  0% {\\n    box-shadow: 0 0 0 0 \",\";\\n  }\\n\\n  70% {\\n    box-shadow: 0 0 0 2px \",\";\\n  }\\n\\n  100% {\\n    box-shadow: 0 0 0 0 \",\";\\n  }\\n\"])),color,color,color);};var ResponsiveText=_styled(TYPE.label).withConfig({componentId:\"sc-1xk2z0e-0\"})([\"line-height:16px;\",\";\"],function(_ref){var theme=_ref.theme;return theme.mediaWidth.upToSmall(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n    font-size: 12px;\\n    line-height: 12px;\\n  \"])));});var FocusedOutlineCard=_styled(Card).withConfig({componentId:\"sc-1xk2z0e-1\"})([\"border:1px solid \",\";animation:\",\" 0.6s linear;\"],function(_ref2){var theme=_ref2.theme;return theme.bg2;},function(_ref3){var pulsing=_ref3.pulsing,theme=_ref3.theme;return pulsing&&pulse(theme.primary1);});var FeeAmountLabel=(_FeeAmountLabel={},_defineProperty(_FeeAmountLabel,FeeAmount.LOW,{label:'0.05',description:/*#__PURE__*/_jsx(Trans,{id:\"Best for stable pairs.\"})}),_defineProperty(_FeeAmountLabel,FeeAmount.MEDIUM,{label:'0.3',description:/*#__PURE__*/_jsx(Trans,{id:\"Best for most pairs.\"})}),_defineProperty(_FeeAmountLabel,FeeAmount.HIGH,{label:'1',description:/*#__PURE__*/_jsx(Trans,{id:\"Best for exotic pairs.\"})}),_FeeAmountLabel);var FeeTierPercentageBadge=function FeeTierPercentageBadge(_ref4){var percentage=_ref4.percentage;return/*#__PURE__*/_jsx(Badge,{children:/*#__PURE__*/_jsx(TYPE.label,{fontSize:12,children:percentage!==undefined?/*#__PURE__*/_jsx(Trans,{id:\"{0}% select\",values:{0:percentage===null||percentage===void 0?void 0:percentage.toFixed(0)}}):/*#__PURE__*/_jsx(Trans,{id:\"Not created\"})})});};export default function FeeSelector(_ref5){var _ref5$disabled=_ref5.disabled,disabled=_ref5$disabled===void 0?false:_ref5$disabled,feeAmount=_ref5.feeAmount,handleFeePoolSelect=_ref5.handleFeePoolSelect,currencyA=_ref5.currencyA,currencyB=_ref5.currencyB;var _useFeeTierDistributi=useFeeTierDistribution(currencyA,currencyB),isLoading=_useFeeTierDistributi.isLoading,isError=_useFeeTierDistributi.isError,largestUsageFeeTier=_useFeeTierDistributi.largestUsageFeeTier,distributions=_useFeeTierDistributi.distributions;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showOptions=_useState2[0],setShowOptions=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),pulsing=_useState4[0],setPulsing=_useState4[1];var previousFeeAmount=usePrevious(feeAmount);var recommended=useRef(false);var handleFeePoolSelectWithEvent=useCallback(function(fee){ReactGA.event({category:'FeePoolSelect',action:'Manual'});handleFeePoolSelect(fee);},[handleFeePoolSelect]);useEffect(function(){if(feeAmount||isLoading||isError){return;}if(!largestUsageFeeTier){// cannot recommend, open options\nsetShowOptions(true);}else{setShowOptions(false);recommended.current=true;ReactGA.event({category:'FeePoolSelect',action:' Recommended'});handleFeePoolSelect(largestUsageFeeTier);}},[feeAmount,isLoading,isError,largestUsageFeeTier,handleFeePoolSelect]);useEffect(function(){setShowOptions(isError);},[isError]);useEffect(function(){if(feeAmount&&previousFeeAmount!==feeAmount){setPulsing(true);}},[previousFeeAmount,feeAmount]);return/*#__PURE__*/_jsx(AutoColumn,{gap:\"16px\",children:/*#__PURE__*/_jsxs(DynamicSection,{gap:\"md\",disabled:disabled,children:[/*#__PURE__*/_jsx(FocusedOutlineCard,{pulsing:pulsing,onAnimationEnd:function onAnimationEnd(){return setPulsing(false);},children:/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(AutoColumn,{id:\"add-liquidity-selected-fee\",children:!feeAmount?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TYPE.label,{children:/*#__PURE__*/_jsx(Trans,{id:\"Fee tier\"})}),/*#__PURE__*/_jsx(TYPE.main,{fontWeight:400,fontSize:\"12px\",textAlign:\"left\",children:/*#__PURE__*/_jsx(Trans,{id:\"The % you will earn in fees.\"})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TYPE.label,{className:\"selected-fee-label\",children:/*#__PURE__*/_jsx(Trans,{id:\"{0}% fee tier\",values:{0:FeeAmountLabel[feeAmount].label}})}),/*#__PURE__*/_jsx(Box,{style:{width:'fit-content',marginTop:'8px'},className:\"selected-fee-percentage\",children:distributions&&feeAmount&&/*#__PURE__*/_jsx(FeeTierPercentageBadge,{percentage:distributions[feeAmount]})})]})}),/*#__PURE__*/_jsx(ButtonGray,{onClick:function onClick(){return setShowOptions(!showOptions);},width:\"auto\",padding:\"4px\",$borderRadius:\"6px\",children:showOptions?/*#__PURE__*/_jsx(Trans,{id:\"Hide\"}):/*#__PURE__*/_jsx(Trans,{id:\"Edit\"})})]})}),showOptions&&/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(ButtonRadioChecked,{width:\"32%\",active:feeAmount===FeeAmount.LOW,onClick:function onClick(){return handleFeePoolSelectWithEvent(FeeAmount.LOW);},children:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"sm\",justify:\"flex-start\",children:[/*#__PURE__*/_jsxs(AutoColumn,{justify:\"flex-start\",gap:\"6px\",children:[/*#__PURE__*/_jsx(ResponsiveText,{children:/*#__PURE__*/_jsx(Trans,{id:\"0.05% fee\"})}),/*#__PURE__*/_jsx(TYPE.main,{fontWeight:400,fontSize:\"12px\",textAlign:\"left\",children:/*#__PURE__*/_jsx(Trans,{id:\"Best for stable pairs.\"})})]}),distributions&&/*#__PURE__*/_jsx(FeeTierPercentageBadge,{percentage:distributions[FeeAmount.LOW]})]})}),/*#__PURE__*/_jsx(ButtonRadioChecked,{width:\"32%\",active:feeAmount===FeeAmount.MEDIUM,onClick:function onClick(){return handleFeePoolSelectWithEvent(FeeAmount.MEDIUM);},children:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"sm\",justify:\"flex-start\",children:[/*#__PURE__*/_jsxs(AutoColumn,{justify:\"flex-start\",gap:\"4px\",children:[/*#__PURE__*/_jsx(ResponsiveText,{children:/*#__PURE__*/_jsx(Trans,{id:\"0.3% fee\"})}),/*#__PURE__*/_jsx(TYPE.main,{fontWeight:400,fontSize:\"12px\",textAlign:\"left\",children:/*#__PURE__*/_jsx(Trans,{id:\"Best for most pairs.\"})})]}),distributions&&/*#__PURE__*/_jsx(FeeTierPercentageBadge,{percentage:distributions[FeeAmount.MEDIUM]})]})}),/*#__PURE__*/_jsx(ButtonRadioChecked,{width:\"32%\",active:feeAmount===FeeAmount.HIGH,onClick:function onClick(){return handleFeePoolSelectWithEvent(FeeAmount.HIGH);},children:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"sm\",justify:\"flex-start\",children:[/*#__PURE__*/_jsxs(AutoColumn,{justify:\"flex-start\",gap:\"4px\",children:[/*#__PURE__*/_jsx(ResponsiveText,{children:/*#__PURE__*/_jsx(Trans,{id:\"1% fee\"})}),/*#__PURE__*/_jsx(TYPE.main,{fontWeight:400,fontSize:\"12px\",textAlign:\"left\",children:/*#__PURE__*/_jsx(Trans,{id:\"Best for exotic pairs.\"})})]}),distributions&&/*#__PURE__*/_jsx(FeeTierPercentageBadge,{percentage:distributions[FeeAmount.HIGH]})]})})]})]})});}","map":{"version":3,"sources":["/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/src/components/FeeSelector/index.tsx"],"names":["React","useCallback","useEffect","useRef","useState","FeeAmount","AutoColumn","DynamicSection","TYPE","RowBetween","ButtonGray","ButtonRadioChecked","Badge","Card","usePrevious","useFeeTierDistribution","ReactGA","Box","pulse","color","keyframes","ResponsiveText","styled","label","theme","mediaWidth","upToSmall","FocusedOutlineCard","bg2","pulsing","primary1","FeeAmountLabel","LOW","description","MEDIUM","HIGH","FeeTierPercentageBadge","percentage","undefined","toFixed","FeeSelector","disabled","feeAmount","handleFeePoolSelect","currencyA","currencyB","isLoading","isError","largestUsageFeeTier","distributions","showOptions","setShowOptions","setPulsing","previousFeeAmount","recommended","handleFeePoolSelectWithEvent","fee","event","category","action","current","width","marginTop"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from 'react'\nimport { FeeAmount } from '@uniswap/v3-sdk'\nimport { Currency } from '@uniswap/sdk-core'\nimport { Trans } from '@lingui/macro'\nimport { AutoColumn } from 'components/Column'\nimport { DynamicSection } from 'pages/AddLiquidity/styled'\nimport { TYPE } from 'theme'\nimport { RowBetween } from 'components/Row'\nimport { ButtonGray, ButtonRadioChecked } from 'components/Button'\nimport styled, { keyframes } from 'styled-components/macro'\nimport Badge from 'components/Badge'\nimport Card from 'components/Card'\nimport usePrevious from 'hooks/usePrevious'\nimport { useFeeTierDistribution } from 'hooks/useFeeTierDistribution'\nimport ReactGA from 'react-ga'\nimport { Box } from 'rebass'\n\nconst pulse = (color: string) => keyframes`\n  0% {\n    box-shadow: 0 0 0 0 ${color};\n  }\n\n  70% {\n    box-shadow: 0 0 0 2px ${color};\n  }\n\n  100% {\n    box-shadow: 0 0 0 0 ${color};\n  }\n`\n\nconst ResponsiveText = styled(TYPE.label)`\n  line-height: 16px;\n\n  ${({ theme }) => theme.mediaWidth.upToSmall`\n    font-size: 12px;\n    line-height: 12px;\n  `};\n`\n\nconst FocusedOutlineCard = styled(Card)<{ pulsing: boolean }>`\n  border: 1px solid ${({ theme }) => theme.bg2};\n  animation: ${({ pulsing, theme }) => pulsing && pulse(theme.primary1)} 0.6s linear;\n`\n\nconst FeeAmountLabel = {\n  [FeeAmount.LOW]: {\n    label: '0.05',\n    description: <Trans>Best for stable pairs.</Trans>,\n  },\n  [FeeAmount.MEDIUM]: {\n    label: '0.3',\n    description: <Trans>Best for most pairs.</Trans>,\n  },\n  [FeeAmount.HIGH]: {\n    label: '1',\n    description: <Trans>Best for exotic pairs.</Trans>,\n  },\n}\n\nconst FeeTierPercentageBadge = ({ percentage }: { percentage: number | undefined }) => {\n  return (\n    <Badge>\n      <TYPE.label fontSize={12}>\n        {percentage !== undefined ? <Trans>{percentage?.toFixed(0)}% select</Trans> : <Trans>Not created</Trans>}\n      </TYPE.label>\n    </Badge>\n  )\n}\n\nexport default function FeeSelector({\n  disabled = false,\n  feeAmount,\n  handleFeePoolSelect,\n  currencyA,\n  currencyB,\n}: {\n  disabled?: boolean\n  feeAmount?: FeeAmount\n  handleFeePoolSelect: (feeAmount: FeeAmount) => void\n  currencyA?: Currency | undefined\n  currencyB?: Currency | undefined\n}) {\n  const { isLoading, isError, largestUsageFeeTier, distributions } = useFeeTierDistribution(currencyA, currencyB)\n\n  const [showOptions, setShowOptions] = useState(false)\n  const [pulsing, setPulsing] = useState(false)\n\n  const previousFeeAmount = usePrevious(feeAmount)\n\n  const recommended = useRef(false)\n\n  const handleFeePoolSelectWithEvent = useCallback(\n    (fee) => {\n      ReactGA.event({\n        category: 'FeePoolSelect',\n        action: 'Manual',\n      })\n      handleFeePoolSelect(fee)\n    },\n    [handleFeePoolSelect]\n  )\n\n  useEffect(() => {\n    if (feeAmount || isLoading || isError) {\n      return\n    }\n\n    if (!largestUsageFeeTier) {\n      // cannot recommend, open options\n      setShowOptions(true)\n    } else {\n      setShowOptions(false)\n\n      recommended.current = true\n      ReactGA.event({\n        category: 'FeePoolSelect',\n        action: ' Recommended',\n      })\n\n      handleFeePoolSelect(largestUsageFeeTier)\n    }\n  }, [feeAmount, isLoading, isError, largestUsageFeeTier, handleFeePoolSelect])\n\n  useEffect(() => {\n    setShowOptions(isError)\n  }, [isError])\n\n  useEffect(() => {\n    if (feeAmount && previousFeeAmount !== feeAmount) {\n      setPulsing(true)\n    }\n  }, [previousFeeAmount, feeAmount])\n\n  return (\n    <AutoColumn gap=\"16px\">\n      <DynamicSection gap=\"md\" disabled={disabled}>\n        <FocusedOutlineCard pulsing={pulsing} onAnimationEnd={() => setPulsing(false)}>\n          <RowBetween>\n            <AutoColumn id=\"add-liquidity-selected-fee\">\n              {!feeAmount ? (\n                <>\n                  <TYPE.label>\n                    <Trans>Fee tier</Trans>\n                  </TYPE.label>\n                  <TYPE.main fontWeight={400} fontSize=\"12px\" textAlign=\"left\">\n                    <Trans>The % you will earn in fees.</Trans>\n                  </TYPE.main>\n                </>\n              ) : (\n                <>\n                  <TYPE.label className=\"selected-fee-label\">\n                    <Trans>{FeeAmountLabel[feeAmount].label}% fee tier</Trans>\n                  </TYPE.label>\n                  <Box style={{ width: 'fit-content', marginTop: '8px' }} className=\"selected-fee-percentage\">\n                    {distributions && feeAmount && <FeeTierPercentageBadge percentage={distributions[feeAmount]} />}\n                  </Box>\n                </>\n              )}\n            </AutoColumn>\n\n            <ButtonGray onClick={() => setShowOptions(!showOptions)} width=\"auto\" padding=\"4px\" $borderRadius=\"6px\">\n              {showOptions ? <Trans>Hide</Trans> : <Trans>Edit</Trans>}\n            </ButtonGray>\n          </RowBetween>\n        </FocusedOutlineCard>\n\n        {showOptions && (\n          <RowBetween>\n            <ButtonRadioChecked\n              width=\"32%\"\n              active={feeAmount === FeeAmount.LOW}\n              onClick={() => handleFeePoolSelectWithEvent(FeeAmount.LOW)}\n            >\n              <AutoColumn gap=\"sm\" justify=\"flex-start\">\n                <AutoColumn justify=\"flex-start\" gap=\"6px\">\n                  <ResponsiveText>\n                    <Trans>0.05% fee</Trans>\n                  </ResponsiveText>\n                  <TYPE.main fontWeight={400} fontSize=\"12px\" textAlign=\"left\">\n                    <Trans>Best for stable pairs.</Trans>\n                  </TYPE.main>\n                </AutoColumn>\n\n                {distributions && <FeeTierPercentageBadge percentage={distributions[FeeAmount.LOW]} />}\n              </AutoColumn>\n            </ButtonRadioChecked>\n            <ButtonRadioChecked\n              width=\"32%\"\n              active={feeAmount === FeeAmount.MEDIUM}\n              onClick={() => handleFeePoolSelectWithEvent(FeeAmount.MEDIUM)}\n            >\n              <AutoColumn gap=\"sm\" justify=\"flex-start\">\n                <AutoColumn justify=\"flex-start\" gap=\"4px\">\n                  <ResponsiveText>\n                    <Trans>0.3% fee</Trans>\n                  </ResponsiveText>\n                  <TYPE.main fontWeight={400} fontSize=\"12px\" textAlign=\"left\">\n                    <Trans>Best for most pairs.</Trans>\n                  </TYPE.main>\n                </AutoColumn>\n\n                {distributions && <FeeTierPercentageBadge percentage={distributions[FeeAmount.MEDIUM]} />}\n              </AutoColumn>\n            </ButtonRadioChecked>\n            <ButtonRadioChecked\n              width=\"32%\"\n              active={feeAmount === FeeAmount.HIGH}\n              onClick={() => handleFeePoolSelectWithEvent(FeeAmount.HIGH)}\n            >\n              <AutoColumn gap=\"sm\" justify=\"flex-start\">\n                <AutoColumn justify=\"flex-start\" gap=\"4px\">\n                  <ResponsiveText>\n                    <Trans>1% fee</Trans>\n                  </ResponsiveText>\n                  <TYPE.main fontWeight={400} fontSize=\"12px\" textAlign=\"left\">\n                    <Trans>Best for exotic pairs.</Trans>\n                  </TYPE.main>\n                </AutoColumn>\n\n                {distributions && <FeeTierPercentageBadge percentage={distributions[FeeAmount.HIGH]} />}\n              </AutoColumn>\n            </ButtonRadioChecked>\n          </RowBetween>\n        )}\n      </DynamicSection>\n    </AutoColumn>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}