{"ast":null,"code":"import _slicedToArray from\"/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import{ThemeContext as _ThemeContext}from\"styled-components\";import _styled from\"styled-components\";var _templateObject;import{Trans}from\"@lingui/react\";import{i18n}from\"@lingui/core\";import{useState,useContext}from'react';import{Percent}from'@uniswap/sdk-core';import QuestionHelper from'../QuestionHelper';import{TYPE}from'../../theme';import{AutoColumn}from'../Column';import{RowBetween,RowFixed}from'../Row';import{DEFAULT_DEADLINE_FROM_NOW}from'constants/misc';import{darken}from'polished';import{useSetUserSlippageTolerance,useUserSlippageTolerance,useUserTransactionTTL}from'state/user/hooks';import{L2_CHAIN_IDS}from'constants/chains';import{useActiveWeb3React}from'hooks/web3';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SlippageError;(function(SlippageError){SlippageError[\"InvalidInput\"]=\"InvalidInput\";})(SlippageError||(SlippageError={}));var DeadlineError;(function(DeadlineError){DeadlineError[\"InvalidInput\"]=\"InvalidInput\";})(DeadlineError||(DeadlineError={}));var FancyButton=_styled.button.withConfig({componentId:\"sc-fzcgd8-0\"})([\"color:\",\";align-items:center;height:2rem;border-radius:36px;font-size:1rem;width:auto;min-width:3.5rem;border:1px solid \",\";outline:none;background:\",\";:hover{border:1px solid \",\";}:focus{border:1px solid \",\";}\"],function(_ref){var theme=_ref.theme;return theme.text1;},function(_ref2){var theme=_ref2.theme;return theme.bg3;},function(_ref3){var theme=_ref3.theme;return theme.bg1;},function(_ref4){var theme=_ref4.theme;return theme.bg4;},function(_ref5){var theme=_ref5.theme;return theme.primary1;});var Option=_styled(FancyButton).withConfig({componentId:\"sc-fzcgd8-1\"})([\"margin-right:8px;:hover{cursor:pointer;}background-color:\",\";color:\",\";\"],function(_ref6){var active=_ref6.active,theme=_ref6.theme;return active&&theme.primary1;},function(_ref7){var active=_ref7.active,theme=_ref7.theme;return active?theme.white:theme.text1;});var Input=_styled.input.withConfig({componentId:\"sc-fzcgd8-2\"})([\"background:\",\";font-size:16px;width:auto;outline:none;&::-webkit-outer-spin-button,&::-webkit-inner-spin-button{-webkit-appearance:none;}color:\",\";text-align:right;\"],function(_ref8){var theme=_ref8.theme;return theme.bg1;},function(_ref9){var theme=_ref9.theme,color=_ref9.color;return color==='red'?theme.red1:theme.text1;});var OptionCustom=_styled(FancyButton).withConfig({componentId:\"sc-fzcgd8-3\"})([\"height:2rem;position:relative;padding:0 0.75rem;flex:1;border:\",\";:hover{border:\",\";}input{width:100%;height:100%;border:0px;border-radius:2rem;}\"],function(_ref10){var theme=_ref10.theme,active=_ref10.active,warning=_ref10.warning;return active?\"1px solid \".concat(warning?theme.red1:theme.primary1):warning&&\"1px solid \".concat(theme.red1);},function(_ref11){var theme=_ref11.theme,active=_ref11.active,warning=_ref11.warning;return active&&\"1px solid \".concat(warning?darken(0.1,theme.red1):darken(0.1,theme.primary1));});var SlippageEmojiContainer=_styled.span.withConfig({componentId:\"sc-fzcgd8-4\"})([\"color:#f3841e;\",\"\"],function(_ref12){var theme=_ref12.theme;return theme.mediaWidth.upToSmall(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    display: none;  \\n  \"])));});export default function TransactionSettings(_ref13){var placeholderSlippage=_ref13.placeholderSlippage;var _useActiveWeb3React=useActiveWeb3React(),chainId=_useActiveWeb3React.chainId;var theme=useContext(_ThemeContext);var userSlippageTolerance=useUserSlippageTolerance();var setUserSlippageTolerance=useSetUserSlippageTolerance();var _useUserTransactionTT=useUserTransactionTTL(),_useUserTransactionTT2=_slicedToArray(_useUserTransactionTT,2),deadline=_useUserTransactionTT2[0],setDeadline=_useUserTransactionTT2[1];var _useState=useState(''),_useState2=_slicedToArray(_useState,2),slippageInput=_useState2[0],setSlippageInput=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),slippageError=_useState4[0],setSlippageError=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),deadlineInput=_useState6[0],setDeadlineInput=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),deadlineError=_useState8[0],setDeadlineError=_useState8[1];function parseSlippageInput(value){// populate what the user typed and clear the error\nsetSlippageInput(value);setSlippageError(false);if(value.length===0){setUserSlippageTolerance('auto');}else{var parsed=Math.floor(Number.parseFloat(value)*100);if(!Number.isInteger(parsed)||parsed<0||parsed>5000){setUserSlippageTolerance('auto');if(value!=='.'){setSlippageError(SlippageError.InvalidInput);}}else{setUserSlippageTolerance(new Percent(parsed,10000));}}}var tooLow=userSlippageTolerance!=='auto'&&userSlippageTolerance.lessThan(new Percent(5,10000));var tooHigh=userSlippageTolerance!=='auto'&&userSlippageTolerance.greaterThan(new Percent(1,100));function parseCustomDeadline(value){// populate what the user typed and clear the error\nsetDeadlineInput(value);setDeadlineError(false);if(value.length===0){setDeadline(DEFAULT_DEADLINE_FROM_NOW);}else{try{var parsed=Math.floor(Number.parseFloat(value)*60);if(!Number.isInteger(parsed)||parsed<60||parsed>180*60){setDeadlineError(DeadlineError.InvalidInput);}else{setDeadline(parsed);}}catch(error){console.error(error);setDeadlineError(DeadlineError.InvalidInput);}}}var showCustomDeadlineRow=Boolean(chainId&&!L2_CHAIN_IDS.includes(chainId));return/*#__PURE__*/_jsxs(AutoColumn,{gap:\"md\",children:[/*#__PURE__*/_jsxs(AutoColumn,{gap:\"sm\",children:[/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(TYPE.black,{fontWeight:400,fontSize:14,color:theme.text2,children:/*#__PURE__*/_jsx(Trans,{id:\"Slippage tolerance\"})}),/*#__PURE__*/_jsx(QuestionHelper,{text:/*#__PURE__*/_jsx(Trans,{id:\"Your transaction will revert if the price changes unfavorably by more than this percentage.\"})})]}),/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(Option,{onClick:function onClick(){parseSlippageInput('');},active:userSlippageTolerance==='auto',children:/*#__PURE__*/_jsx(Trans,{id:\"Auto\"})}),/*#__PURE__*/_jsx(OptionCustom,{active:userSlippageTolerance!=='auto',warning:!!slippageError,tabIndex:-1,children:/*#__PURE__*/_jsxs(RowBetween,{children:[tooLow||tooHigh?/*#__PURE__*/_jsx(SlippageEmojiContainer,{children:/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"warning\",children:\"\\u26A0\\uFE0F\"})}):null,/*#__PURE__*/_jsx(Input,{placeholder:placeholderSlippage.toFixed(2),value:slippageInput.length>0?slippageInput:userSlippageTolerance==='auto'?'':userSlippageTolerance.toFixed(2),onChange:function onChange(e){return parseSlippageInput(e.target.value);},onBlur:function onBlur(){setSlippageInput('');setSlippageError(false);},color:slippageError?'red':''}),\"%\"]})})]}),slippageError||tooLow||tooHigh?/*#__PURE__*/_jsx(RowBetween,{style:{fontSize:'14px',paddingTop:'7px',color:slippageError?'red':'#F3841E'},children:slippageError?/*#__PURE__*/_jsx(Trans,{id:\"Enter a valid slippage percentage\"}):tooLow?/*#__PURE__*/_jsx(Trans,{id:\"Your transaction may fail\"}):/*#__PURE__*/_jsx(Trans,{id:\"Your transaction may be frontrun\"})}):null]}),showCustomDeadlineRow&&/*#__PURE__*/_jsxs(AutoColumn,{gap:\"sm\",children:[/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(TYPE.black,{fontSize:14,fontWeight:400,color:theme.text2,children:/*#__PURE__*/_jsx(Trans,{id:\"Transaction deadline\"})}),/*#__PURE__*/_jsx(QuestionHelper,{text:/*i18n*/i18n._(\"Your transaction will revert if it is pending for more than this period of time.\")})]}),/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(OptionCustom,{style:{width:'80px'},warning:!!deadlineError,tabIndex:-1,children:/*#__PURE__*/_jsx(Input,{placeholder:(DEFAULT_DEADLINE_FROM_NOW/60).toString(),value:deadlineInput.length>0?deadlineInput:deadline===DEFAULT_DEADLINE_FROM_NOW?'':(deadline/60).toString(),onChange:function onChange(e){return parseCustomDeadline(e.target.value);},onBlur:function onBlur(){setDeadlineInput('');setDeadlineError(false);},color:deadlineError?'red':''})}),/*#__PURE__*/_jsx(TYPE.body,{style:{paddingLeft:'8px'},fontSize:14,children:/*#__PURE__*/_jsx(Trans,{id:\"minutes\"})})]})]})]});}","map":{"version":3,"sources":["/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/src/components/TransactionSettings/index.tsx"],"names":["useState","useContext","Percent","QuestionHelper","TYPE","AutoColumn","RowBetween","RowFixed","DEFAULT_DEADLINE_FROM_NOW","darken","useSetUserSlippageTolerance","useUserSlippageTolerance","useUserTransactionTTL","L2_CHAIN_IDS","useActiveWeb3React","SlippageError","DeadlineError","FancyButton","styled","button","theme","text1","bg3","bg1","bg4","primary1","Option","active","white","Input","input","color","red1","OptionCustom","warning","SlippageEmojiContainer","span","mediaWidth","upToSmall","TransactionSettings","placeholderSlippage","chainId","ThemeContext","userSlippageTolerance","setUserSlippageTolerance","deadline","setDeadline","slippageInput","setSlippageInput","slippageError","setSlippageError","deadlineInput","setDeadlineInput","deadlineError","setDeadlineError","parseSlippageInput","value","length","parsed","Math","floor","Number","parseFloat","isInteger","InvalidInput","tooLow","lessThan","tooHigh","greaterThan","parseCustomDeadline","error","console","showCustomDeadlineRow","Boolean","includes","text2","toFixed","e","target","fontSize","paddingTop","width","toString","paddingLeft"],"mappings":"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","sourcesContent":["import { t, Trans } from '@lingui/macro'\nimport { useState, useContext } from 'react'\nimport { Percent } from '@uniswap/sdk-core'\nimport styled, { ThemeContext } from 'styled-components/macro'\n\nimport QuestionHelper from '../QuestionHelper'\nimport { TYPE } from '../../theme'\nimport { AutoColumn } from '../Column'\nimport { RowBetween, RowFixed } from '../Row'\nimport { DEFAULT_DEADLINE_FROM_NOW } from 'constants/misc'\nimport { darken } from 'polished'\nimport { useSetUserSlippageTolerance, useUserSlippageTolerance, useUserTransactionTTL } from 'state/user/hooks'\nimport { L2_CHAIN_IDS } from 'constants/chains'\nimport { useActiveWeb3React } from 'hooks/web3'\n\nenum SlippageError {\n  InvalidInput = 'InvalidInput',\n}\n\nenum DeadlineError {\n  InvalidInput = 'InvalidInput',\n}\n\nconst FancyButton = styled.button`\n  color: ${({ theme }) => theme.text1};\n  align-items: center;\n  height: 2rem;\n  border-radius: 36px;\n  font-size: 1rem;\n  width: auto;\n  min-width: 3.5rem;\n  border: 1px solid ${({ theme }) => theme.bg3};\n  outline: none;\n  background: ${({ theme }) => theme.bg1};\n  :hover {\n    border: 1px solid ${({ theme }) => theme.bg4};\n  }\n  :focus {\n    border: 1px solid ${({ theme }) => theme.primary1};\n  }\n`\n\nconst Option = styled(FancyButton)<{ active: boolean }>`\n  margin-right: 8px;\n  :hover {\n    cursor: pointer;\n  }\n  background-color: ${({ active, theme }) => active && theme.primary1};\n  color: ${({ active, theme }) => (active ? theme.white : theme.text1)};\n`\n\nconst Input = styled.input`\n  background: ${({ theme }) => theme.bg1};\n  font-size: 16px;\n  width: auto;\n  outline: none;\n  &::-webkit-outer-spin-button,\n  &::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n  }\n  color: ${({ theme, color }) => (color === 'red' ? theme.red1 : theme.text1)};\n  text-align: right;\n`\n\nconst OptionCustom = styled(FancyButton)<{ active?: boolean; warning?: boolean }>`\n  height: 2rem;\n  position: relative;\n  padding: 0 0.75rem;\n  flex: 1;\n  border: ${({ theme, active, warning }) =>\n    active ? `1px solid ${warning ? theme.red1 : theme.primary1}` : warning && `1px solid ${theme.red1}`};\n  :hover {\n    border: ${({ theme, active, warning }) =>\n      active && `1px solid ${warning ? darken(0.1, theme.red1) : darken(0.1, theme.primary1)}`};\n  }\n\n  input {\n    width: 100%;\n    height: 100%;\n    border: 0px;\n    border-radius: 2rem;\n  }\n`\n\nconst SlippageEmojiContainer = styled.span`\n  color: #f3841e;\n  ${({ theme }) => theme.mediaWidth.upToSmall`\n    display: none;  \n  `}\n`\n\ninterface TransactionSettingsProps {\n  placeholderSlippage: Percent // varies according to the context in which the settings dialog is placed\n}\n\nexport default function TransactionSettings({ placeholderSlippage }: TransactionSettingsProps) {\n  const { chainId } = useActiveWeb3React()\n  const theme = useContext(ThemeContext)\n\n  const userSlippageTolerance = useUserSlippageTolerance()\n  const setUserSlippageTolerance = useSetUserSlippageTolerance()\n\n  const [deadline, setDeadline] = useUserTransactionTTL()\n\n  const [slippageInput, setSlippageInput] = useState('')\n  const [slippageError, setSlippageError] = useState<SlippageError | false>(false)\n\n  const [deadlineInput, setDeadlineInput] = useState('')\n  const [deadlineError, setDeadlineError] = useState<DeadlineError | false>(false)\n\n  function parseSlippageInput(value: string) {\n    // populate what the user typed and clear the error\n    setSlippageInput(value)\n    setSlippageError(false)\n\n    if (value.length === 0) {\n      setUserSlippageTolerance('auto')\n    } else {\n      const parsed = Math.floor(Number.parseFloat(value) * 100)\n\n      if (!Number.isInteger(parsed) || parsed < 0 || parsed > 5000) {\n        setUserSlippageTolerance('auto')\n        if (value !== '.') {\n          setSlippageError(SlippageError.InvalidInput)\n        }\n      } else {\n        setUserSlippageTolerance(new Percent(parsed, 10_000))\n      }\n    }\n  }\n\n  const tooLow = userSlippageTolerance !== 'auto' && userSlippageTolerance.lessThan(new Percent(5, 10_000))\n  const tooHigh = userSlippageTolerance !== 'auto' && userSlippageTolerance.greaterThan(new Percent(1, 100))\n\n  function parseCustomDeadline(value: string) {\n    // populate what the user typed and clear the error\n    setDeadlineInput(value)\n    setDeadlineError(false)\n\n    if (value.length === 0) {\n      setDeadline(DEFAULT_DEADLINE_FROM_NOW)\n    } else {\n      try {\n        const parsed: number = Math.floor(Number.parseFloat(value) * 60)\n        if (!Number.isInteger(parsed) || parsed < 60 || parsed > 180 * 60) {\n          setDeadlineError(DeadlineError.InvalidInput)\n        } else {\n          setDeadline(parsed)\n        }\n      } catch (error) {\n        console.error(error)\n        setDeadlineError(DeadlineError.InvalidInput)\n      }\n    }\n  }\n\n  const showCustomDeadlineRow = Boolean(chainId && !L2_CHAIN_IDS.includes(chainId))\n\n  return (\n    <AutoColumn gap=\"md\">\n      <AutoColumn gap=\"sm\">\n        <RowFixed>\n          <TYPE.black fontWeight={400} fontSize={14} color={theme.text2}>\n            <Trans>Slippage tolerance</Trans>\n          </TYPE.black>\n          <QuestionHelper\n            text={\n              <Trans>Your transaction will revert if the price changes unfavorably by more than this percentage.</Trans>\n            }\n          />\n        </RowFixed>\n        <RowBetween>\n          <Option\n            onClick={() => {\n              parseSlippageInput('')\n            }}\n            active={userSlippageTolerance === 'auto'}\n          >\n            <Trans>Auto</Trans>\n          </Option>\n          <OptionCustom active={userSlippageTolerance !== 'auto'} warning={!!slippageError} tabIndex={-1}>\n            <RowBetween>\n              {tooLow || tooHigh ? (\n                <SlippageEmojiContainer>\n                  <span role=\"img\" aria-label=\"warning\">\n                    ⚠️\n                  </span>\n                </SlippageEmojiContainer>\n              ) : null}\n              <Input\n                placeholder={placeholderSlippage.toFixed(2)}\n                value={\n                  slippageInput.length > 0\n                    ? slippageInput\n                    : userSlippageTolerance === 'auto'\n                    ? ''\n                    : userSlippageTolerance.toFixed(2)\n                }\n                onChange={(e) => parseSlippageInput(e.target.value)}\n                onBlur={() => {\n                  setSlippageInput('')\n                  setSlippageError(false)\n                }}\n                color={slippageError ? 'red' : ''}\n              />\n              %\n            </RowBetween>\n          </OptionCustom>\n        </RowBetween>\n        {slippageError || tooLow || tooHigh ? (\n          <RowBetween\n            style={{\n              fontSize: '14px',\n              paddingTop: '7px',\n              color: slippageError ? 'red' : '#F3841E',\n            }}\n          >\n            {slippageError ? (\n              <Trans>Enter a valid slippage percentage</Trans>\n            ) : tooLow ? (\n              <Trans>Your transaction may fail</Trans>\n            ) : (\n              <Trans>Your transaction may be frontrun</Trans>\n            )}\n          </RowBetween>\n        ) : null}\n      </AutoColumn>\n\n      {showCustomDeadlineRow && (\n        <AutoColumn gap=\"sm\">\n          <RowFixed>\n            <TYPE.black fontSize={14} fontWeight={400} color={theme.text2}>\n              <Trans>Transaction deadline</Trans>\n            </TYPE.black>\n            <QuestionHelper\n              text={t`Your transaction will revert if it is pending for more than this period of time.`}\n            />\n          </RowFixed>\n          <RowFixed>\n            <OptionCustom style={{ width: '80px' }} warning={!!deadlineError} tabIndex={-1}>\n              <Input\n                placeholder={(DEFAULT_DEADLINE_FROM_NOW / 60).toString()}\n                value={\n                  deadlineInput.length > 0\n                    ? deadlineInput\n                    : deadline === DEFAULT_DEADLINE_FROM_NOW\n                    ? ''\n                    : (deadline / 60).toString()\n                }\n                onChange={(e) => parseCustomDeadline(e.target.value)}\n                onBlur={() => {\n                  setDeadlineInput('')\n                  setDeadlineError(false)\n                }}\n                color={deadlineError ? 'red' : ''}\n              />\n            </OptionCustom>\n            <TYPE.body style={{ paddingLeft: '8px' }} fontSize={14}>\n              <Trans>minutes</Trans>\n            </TYPE.body>\n          </RowFixed>\n        </AutoColumn>\n      )}\n    </AutoColumn>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}