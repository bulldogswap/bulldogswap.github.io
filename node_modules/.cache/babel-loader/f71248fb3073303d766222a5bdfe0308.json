{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _styled from\"styled-components\";import{Trans}from\"@lingui/react\";import{i18n}from\"@lingui/core\";import Card from'components/Card';import{UNSUPPORTED_LIST_URLS}from'constants/lists';import{useListColor}from'hooks/useColor';import{useActiveWeb3React}from'hooks/web3';import{memo,useCallback,useEffect,useMemo,useRef,useState}from'react';import{CheckCircle,Settings}from'react-feather';import ReactGA from'react-ga';import{usePopper}from'react-popper';import{useAppDispatch,useAppSelector}from'state/hooks';import{useFetchListCallback}from'../../hooks/useFetchListCallback';import{useOnClickOutside}from'../../hooks/useOnClickOutside';import useTheme from'../../hooks/useTheme';import useToggle from'../../hooks/useToggle';import{acceptListUpdate,disableList,enableList,removeList}from'../../state/lists/actions';import{useActiveListUrls,useAllLists,useIsListActive}from'../../state/lists/hooks';import{ExternalLink,IconWrapper,LinkStyledButton,TYPE}from'../../theme';import listVersionLabel from'../../utils/listVersionLabel';import{parseENSAddress}from'../../utils/parseENSAddress';import uriToHttp from'../../utils/uriToHttp';import{ButtonEmpty,ButtonPrimary}from'../Button';import Column,{AutoColumn}from'../Column';import ListLogo from'../ListLogo';import Row,{RowBetween,RowFixed}from'../Row';import ListToggle from'../Toggle/ListToggle';import{CurrencyModalView}from'./CurrencySearchModal';import{PaddedColumn,SearchInput,Separator,SeparatorDark}from'./styleds';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Wrapper=_styled(Column).withConfig({componentId:\"sc-z8ju4z-0\"})([\"height:100%;\"]);var UnpaddedLinkStyledButton=_styled(LinkStyledButton).withConfig({componentId:\"sc-z8ju4z-1\"})([\"padding:0;font-size:1rem;opacity:\",\";\"],function(_ref){var disabled=_ref.disabled;return disabled?'0.4':'1';});var PopoverContainer=_styled.div.withConfig({componentId:\"sc-z8ju4z-2\"})([\"z-index:100;visibility:\",\";opacity:\",\";transition:visibility 150ms linear,opacity 150ms linear;background:\",\";border:1px solid \",\";box-shadow:0px 0px 1px rgba(0,0,0,0.01),0px 4px 8px rgba(0,0,0,0.04),0px 16px 24px rgba(0,0,0,0.04),0px 24px 32px rgba(0,0,0,0.01);color:\",\";border-radius:0.5rem;padding:1rem;display:grid;grid-template-rows:1fr;grid-gap:8px;font-size:1rem;text-align:left;\"],function(props){return props.show?'visible':'hidden';},function(props){return props.show?1:0;},function(_ref2){var theme=_ref2.theme;return theme.bg2;},function(_ref3){var theme=_ref3.theme;return theme.bg3;},function(_ref4){var theme=_ref4.theme;return theme.text2;});var StyledMenu=_styled.div.withConfig({componentId:\"sc-z8ju4z-3\"})([\"display:flex;justify-content:center;align-items:center;position:relative;border:none;\"]);var StyledTitleText=_styled.div.withConfig({componentId:\"sc-z8ju4z-4\"})([\"font-size:16px;overflow:hidden;text-overflow:ellipsis;font-weight:600;color:\",\";\"],function(_ref5){var theme=_ref5.theme,active=_ref5.active;return active?theme.white:theme.text2;});var StyledListUrlText=_styled(TYPE.main).withConfig({componentId:\"sc-z8ju4z-5\"})([\"font-size:12px;color:\",\";\"],function(_ref6){var theme=_ref6.theme,active=_ref6.active;return active?theme.white:theme.text2;});var RowWrapper=_styled(Row).withConfig({componentId:\"sc-z8ju4z-6\"})([\"background-color:\",\";opacity:\",\";transition:200ms;align-items:center;padding:1rem;border-radius:20px;\"],function(_ref7){var bgColor=_ref7.bgColor,active=_ref7.active,theme=_ref7.theme;return active?bgColor!==null&&bgColor!==void 0?bgColor:'transparent':theme.bg2;},function(_ref8){var hasActiveTokens=_ref8.hasActiveTokens;return hasActiveTokens?1:0.4;});function listUrlRowHTMLId(listUrl){return\"list-row-\".concat(listUrl.replace(/\\./g,'-'));}var ListRow=/*#__PURE__*/memo(function ListRow(_ref9){var listUrl=_ref9.listUrl;var _useActiveWeb3React=useActiveWeb3React(),chainId=_useActiveWeb3React.chainId;var listsByUrl=useAppSelector(function(state){return state.lists.byUrl;});var dispatch=useAppDispatch();var _listsByUrl$listUrl=listsByUrl[listUrl],list=_listsByUrl$listUrl.current,pending=_listsByUrl$listUrl.pendingUpdate;var activeTokensOnThisChain=useMemo(function(){if(!list||!chainId){return 0;}return list.tokens.reduce(function(acc,cur){return cur.chainId===chainId?acc+1:acc;},0);},[chainId,list]);var theme=useTheme();var listColor=useListColor(list===null||list===void 0?void 0:list.logoURI);var isActive=useIsListActive(listUrl);var _useToggle=useToggle(false),_useToggle2=_slicedToArray(_useToggle,2),open=_useToggle2[0],toggle=_useToggle2[1];var node=useRef();var _useState=useState(),_useState2=_slicedToArray(_useState,2),referenceElement=_useState2[0],setReferenceElement=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),popperElement=_useState4[0],setPopperElement=_useState4[1];var _usePopper=usePopper(referenceElement,popperElement,{placement:'auto',strategy:'fixed',modifiers:[{name:'offset',options:{offset:[8,8]}}]}),styles=_usePopper.styles,attributes=_usePopper.attributes;useOnClickOutside(node,open?toggle:undefined);var handleAcceptListUpdate=useCallback(function(){if(!pending)return;ReactGA.event({category:'Lists',action:'Update List from List Select',label:listUrl});dispatch(acceptListUpdate(listUrl));},[dispatch,listUrl,pending]);var handleRemoveList=useCallback(function(){ReactGA.event({category:'Lists',action:'Start Remove List',label:listUrl});if(window.prompt(/*i18n*/i18n._(\"Please confirm you would like to remove this list by typing REMOVE\"))===\"REMOVE\"){ReactGA.event({category:'Lists',action:'Confirm Remove List',label:listUrl});dispatch(removeList(listUrl));}},[dispatch,listUrl]);var handleEnableList=useCallback(function(){ReactGA.event({category:'Lists',action:'Enable List',label:listUrl});dispatch(enableList(listUrl));},[dispatch,listUrl]);var handleDisableList=useCallback(function(){ReactGA.event({category:'Lists',action:'Disable List',label:listUrl});dispatch(disableList(listUrl));},[dispatch,listUrl]);if(!list)return null;return/*#__PURE__*/_jsxs(RowWrapper,{active:isActive,hasActiveTokens:activeTokensOnThisChain>0,bgColor:listColor,id:listUrlRowHTMLId(listUrl),children:[list.logoURI?/*#__PURE__*/_jsx(ListLogo,{size:\"40px\",style:{marginRight:'1rem'},logoURI:list.logoURI,alt:\"\".concat(list.name,\" list logo\")}):/*#__PURE__*/_jsx(\"div\",{style:{width:'24px',height:'24px',marginRight:'1rem'}}),/*#__PURE__*/_jsxs(Column,{style:{flex:'1'},children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(StyledTitleText,{active:isActive,children:list.name})}),/*#__PURE__*/_jsxs(RowFixed,{mt:\"4px\",children:[/*#__PURE__*/_jsx(StyledListUrlText,{active:isActive,mr:\"6px\",children:/*#__PURE__*/_jsx(Trans,{id:\"{activeTokensOnThisChain} tokens\",values:{activeTokensOnThisChain:activeTokensOnThisChain}})}),/*#__PURE__*/_jsxs(StyledMenu,{ref:node,children:[/*#__PURE__*/_jsx(ButtonEmpty,{onClick:toggle,ref:setReferenceElement,padding:\"0\",children:/*#__PURE__*/_jsx(Settings,{stroke:isActive?theme.bg1:theme.text1,size:12})}),open&&/*#__PURE__*/_jsxs(PopoverContainer,_objectSpread(_objectSpread({show:true,ref:setPopperElement,style:styles.popper},attributes.popper),{},{children:[/*#__PURE__*/_jsx(\"div\",{children:list&&listVersionLabel(list.version)}),/*#__PURE__*/_jsx(SeparatorDark,{}),/*#__PURE__*/_jsx(ExternalLink,{href:\"https://tokenlists.org/token-list?url=\".concat(listUrl),children:/*#__PURE__*/_jsx(Trans,{id:\"View list\"})}),/*#__PURE__*/_jsx(UnpaddedLinkStyledButton,{onClick:handleRemoveList,disabled:Object.keys(listsByUrl).length===1,children:/*#__PURE__*/_jsx(Trans,{id:\"Remove list\"})}),pending&&/*#__PURE__*/_jsx(UnpaddedLinkStyledButton,{onClick:handleAcceptListUpdate,children:/*#__PURE__*/_jsx(Trans,{id:\"Update list\"})})]}))]})]})]}),/*#__PURE__*/_jsx(ListToggle,{isActive:isActive,bgColor:listColor,toggle:function toggle(){isActive?handleDisableList():handleEnableList();}})]},listUrl);});var ListContainer=_styled.div.withConfig({componentId:\"sc-z8ju4z-7\"})([\"padding:1rem;height:100%;overflow:auto;padding-bottom:80px;\"]);export function ManageLists(_ref10){var setModalView=_ref10.setModalView,setImportList=_ref10.setImportList,setListUrl=_ref10.setListUrl;var _useActiveWeb3React2=useActiveWeb3React(),chainId=_useActiveWeb3React2.chainId;var theme=useTheme();var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),listUrlInput=_useState6[0],setListUrlInput=_useState6[1];var lists=useAllLists();var tokenCountByListName=useMemo(function(){return Object.values(lists).reduce(function(acc,_ref11){var list=_ref11.current;if(!list){return acc;}return _objectSpread(_objectSpread({},acc),{},_defineProperty({},list.name,list.tokens.reduce(function(count,token){return token.chainId===chainId?count+1:count;},0)));},{});},[chainId,lists]);// sort by active but only if not visible\nvar activeListUrls=useActiveListUrls();var handleInput=useCallback(function(e){setListUrlInput(e.target.value);},[]);var fetchList=useFetchListCallback();var validUrl=useMemo(function(){return uriToHttp(listUrlInput).length>0||Boolean(parseENSAddress(listUrlInput));},[listUrlInput]);var sortedLists=useMemo(function(){var listUrls=Object.keys(lists);return listUrls.filter(function(listUrl){// only show loaded lists, hide unsupported lists\nreturn Boolean(lists[listUrl].current)&&!Boolean(UNSUPPORTED_LIST_URLS.includes(listUrl));}).sort(function(listUrlA,listUrlB){var listA=lists[listUrlA].current;var listB=lists[listUrlB].current;// first filter on active lists\nif((activeListUrls===null||activeListUrls===void 0?void 0:activeListUrls.includes(listUrlA))&&!(activeListUrls===null||activeListUrls===void 0?void 0:activeListUrls.includes(listUrlB))){return-1;}if(!(activeListUrls===null||activeListUrls===void 0?void 0:activeListUrls.includes(listUrlA))&&(activeListUrls===null||activeListUrls===void 0?void 0:activeListUrls.includes(listUrlB))){return 1;}if(listA&&listB){if(tokenCountByListName[listA.name]>tokenCountByListName[listB.name]){return-1;}if(tokenCountByListName[listA.name]<tokenCountByListName[listB.name]){return 1;}return listA.name.toLowerCase()<listB.name.toLowerCase()?-1:listA.name.toLowerCase()===listB.name.toLowerCase()?0:1;}if(listA)return-1;if(listB)return 1;return 0;});},[lists,activeListUrls,tokenCountByListName]);// temporary fetched list for import flow\nvar _useState7=useState(),_useState8=_slicedToArray(_useState7,2),tempList=_useState8[0],setTempList=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),addError=_useState10[0],setAddError=_useState10[1];useEffect(function(){function fetchTempList(){return _fetchTempList.apply(this,arguments);}// if valid url, fetch details for card\nfunction _fetchTempList(){_fetchTempList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:fetchList(listUrlInput,false).then(function(list){return setTempList(list);}).catch(function(){return setAddError(/*i18n*/i18n._(\"Error importing list\"));});case 1:case\"end\":return _context.stop();}}},_callee);}));return _fetchTempList.apply(this,arguments);}if(validUrl){fetchTempList();}else{setTempList(undefined);listUrlInput!==''&&setAddError(/*i18n*/i18n._(\"Enter valid list location\"));}// reset error\nif(listUrlInput===''){setAddError(undefined);}},[fetchList,listUrlInput,validUrl]);// check if list is already imported\nvar isImported=Object.keys(lists).includes(listUrlInput);// set list values and have parent modal switch to import list view\nvar handleImport=useCallback(function(){if(!tempList)return;setImportList(tempList);setModalView(CurrencyModalView.importList);setListUrl(listUrlInput);},[listUrlInput,setImportList,setListUrl,setModalView,tempList]);return/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsxs(PaddedColumn,{gap:\"14px\",children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(SearchInput,{type:\"text\",id:\"list-add-input\",placeholder:/*i18n*/i18n._(\"https:// or ipfs:// or ENS name\"),value:listUrlInput,onChange:handleInput})}),addError?/*#__PURE__*/_jsx(TYPE.error,{title:addError,style:{textOverflow:'ellipsis',overflow:'hidden'},error:true,children:addError}):null]}),tempList&&/*#__PURE__*/_jsx(PaddedColumn,{style:{paddingTop:0},children:/*#__PURE__*/_jsx(Card,{backgroundColor:theme.bg2,padding:\"12px 20px\",children:/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsxs(RowFixed,{children:[tempList.logoURI&&/*#__PURE__*/_jsx(ListLogo,{logoURI:tempList.logoURI,size:\"40px\"}),/*#__PURE__*/_jsxs(AutoColumn,{gap:\"4px\",style:{marginLeft:'20px'},children:[/*#__PURE__*/_jsx(TYPE.body,{fontWeight:600,children:tempList.name}),/*#__PURE__*/_jsx(TYPE.main,{fontSize:'12px',children:/*#__PURE__*/_jsx(Trans,{id:\"{0} tokens\",values:{0:tempList.tokens.length}})})]})]}),isImported?/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(IconWrapper,{stroke:theme.text2,size:\"16px\",marginRight:'10px',children:/*#__PURE__*/_jsx(CheckCircle,{})}),/*#__PURE__*/_jsx(TYPE.body,{color:theme.text2,children:/*#__PURE__*/_jsx(Trans,{id:\"Loaded\"})})]}):/*#__PURE__*/_jsx(ButtonPrimary,{style:{fontSize:'14px'},padding:\"6px 8px\",width:\"fit-content\",onClick:handleImport,children:/*#__PURE__*/_jsx(Trans,{id:\"Import\"})})]})})}),/*#__PURE__*/_jsx(Separator,{}),/*#__PURE__*/_jsx(ListContainer,{children:/*#__PURE__*/_jsx(AutoColumn,{gap:\"md\",children:sortedLists.map(function(listUrl){return/*#__PURE__*/_jsx(ListRow,{listUrl:listUrl},listUrl);})})})]});}","map":{"version":3,"sources":["/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/src/components/SearchModal/ManageLists.tsx"],"names":["Card","UNSUPPORTED_LIST_URLS","useListColor","useActiveWeb3React","memo","useCallback","useEffect","useMemo","useRef","useState","CheckCircle","Settings","ReactGA","usePopper","useAppDispatch","useAppSelector","useFetchListCallback","useOnClickOutside","useTheme","useToggle","acceptListUpdate","disableList","enableList","removeList","useActiveListUrls","useAllLists","useIsListActive","ExternalLink","IconWrapper","LinkStyledButton","TYPE","listVersionLabel","parseENSAddress","uriToHttp","ButtonEmpty","ButtonPrimary","Column","AutoColumn","ListLogo","Row","RowBetween","RowFixed","ListToggle","CurrencyModalView","PaddedColumn","SearchInput","Separator","SeparatorDark","Wrapper","styled","UnpaddedLinkStyledButton","disabled","PopoverContainer","div","props","show","theme","bg2","bg3","text2","StyledMenu","StyledTitleText","active","white","StyledListUrlText","main","RowWrapper","bgColor","hasActiveTokens","listUrlRowHTMLId","listUrl","replace","ListRow","chainId","listsByUrl","state","lists","byUrl","dispatch","list","current","pending","pendingUpdate","activeTokensOnThisChain","tokens","reduce","acc","cur","listColor","logoURI","isActive","open","toggle","node","referenceElement","setReferenceElement","popperElement","setPopperElement","placement","strategy","modifiers","name","options","offset","styles","attributes","undefined","handleAcceptListUpdate","event","category","action","label","handleRemoveList","window","prompt","handleEnableList","handleDisableList","marginRight","width","height","flex","bg1","text1","popper","version","Object","keys","length","ListContainer","ManageLists","setModalView","setImportList","setListUrl","listUrlInput","setListUrlInput","tokenCountByListName","values","count","token","activeListUrls","handleInput","e","target","value","fetchList","validUrl","Boolean","sortedLists","listUrls","filter","includes","sort","listUrlA","listUrlB","listA","listB","toLowerCase","tempList","setTempList","addError","setAddError","fetchTempList","then","catch","isImported","handleImport","importList","textOverflow","overflow","paddingTop","marginLeft","fontSize","map"],"mappings":"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","sourcesContent":["import { t, Trans } from '@lingui/macro'\nimport { TokenList } from '@uniswap/token-lists'\nimport Card from 'components/Card'\nimport { UNSUPPORTED_LIST_URLS } from 'constants/lists'\nimport { useListColor } from 'hooks/useColor'\nimport { useActiveWeb3React } from 'hooks/web3'\nimport { memo, useCallback, useEffect, useMemo, useRef, useState } from 'react'\nimport { CheckCircle, Settings } from 'react-feather'\nimport ReactGA from 'react-ga'\nimport { usePopper } from 'react-popper'\nimport { useAppDispatch, useAppSelector } from 'state/hooks'\nimport styled from 'styled-components/macro'\nimport { useFetchListCallback } from '../../hooks/useFetchListCallback'\nimport { useOnClickOutside } from '../../hooks/useOnClickOutside'\nimport useTheme from '../../hooks/useTheme'\nimport useToggle from '../../hooks/useToggle'\nimport { acceptListUpdate, disableList, enableList, removeList } from '../../state/lists/actions'\nimport { useActiveListUrls, useAllLists, useIsListActive } from '../../state/lists/hooks'\nimport { ExternalLink, IconWrapper, LinkStyledButton, TYPE } from '../../theme'\nimport listVersionLabel from '../../utils/listVersionLabel'\nimport { parseENSAddress } from '../../utils/parseENSAddress'\nimport uriToHttp from '../../utils/uriToHttp'\nimport { ButtonEmpty, ButtonPrimary } from '../Button'\nimport Column, { AutoColumn } from '../Column'\nimport ListLogo from '../ListLogo'\nimport Row, { RowBetween, RowFixed } from '../Row'\nimport ListToggle from '../Toggle/ListToggle'\nimport { CurrencyModalView } from './CurrencySearchModal'\nimport { PaddedColumn, SearchInput, Separator, SeparatorDark } from './styleds'\n\nconst Wrapper = styled(Column)`\n  height: 100%;\n`\n\nconst UnpaddedLinkStyledButton = styled(LinkStyledButton)`\n  padding: 0;\n  font-size: 1rem;\n  opacity: ${({ disabled }) => (disabled ? '0.4' : '1')};\n`\n\nconst PopoverContainer = styled.div<{ show: boolean }>`\n  z-index: 100;\n  visibility: ${(props) => (props.show ? 'visible' : 'hidden')};\n  opacity: ${(props) => (props.show ? 1 : 0)};\n  transition: visibility 150ms linear, opacity 150ms linear;\n  background: ${({ theme }) => theme.bg2};\n  border: 1px solid ${({ theme }) => theme.bg3};\n  box-shadow: 0px 0px 1px rgba(0, 0, 0, 0.01), 0px 4px 8px rgba(0, 0, 0, 0.04), 0px 16px 24px rgba(0, 0, 0, 0.04),\n    0px 24px 32px rgba(0, 0, 0, 0.01);\n  color: ${({ theme }) => theme.text2};\n  border-radius: 0.5rem;\n  padding: 1rem;\n  display: grid;\n  grid-template-rows: 1fr;\n  grid-gap: 8px;\n  font-size: 1rem;\n  text-align: left;\n`\n\nconst StyledMenu = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n  border: none;\n`\n\nconst StyledTitleText = styled.div<{ active: boolean }>`\n  font-size: 16px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-weight: 600;\n  color: ${({ theme, active }) => (active ? theme.white : theme.text2)};\n`\n\nconst StyledListUrlText = styled(TYPE.main)<{ active: boolean }>`\n  font-size: 12px;\n  color: ${({ theme, active }) => (active ? theme.white : theme.text2)};\n`\n\nconst RowWrapper = styled(Row)<{ bgColor: string; active: boolean; hasActiveTokens: boolean }>`\n  background-color: ${({ bgColor, active, theme }) => (active ? bgColor ?? 'transparent' : theme.bg2)};\n  opacity: ${({ hasActiveTokens }) => (hasActiveTokens ? 1 : 0.4)};\n  transition: 200ms;\n  align-items: center;\n  padding: 1rem;\n  border-radius: 20px;\n`\n\nfunction listUrlRowHTMLId(listUrl: string) {\n  return `list-row-${listUrl.replace(/\\./g, '-')}`\n}\n\nconst ListRow = memo(function ListRow({ listUrl }: { listUrl: string }) {\n  const { chainId } = useActiveWeb3React()\n  const listsByUrl = useAppSelector((state) => state.lists.byUrl)\n  const dispatch = useAppDispatch()\n  const { current: list, pendingUpdate: pending } = listsByUrl[listUrl]\n\n  const activeTokensOnThisChain = useMemo(() => {\n    if (!list || !chainId) {\n      return 0\n    }\n    return list.tokens.reduce((acc, cur) => (cur.chainId === chainId ? acc + 1 : acc), 0)\n  }, [chainId, list])\n\n  const theme = useTheme()\n  const listColor = useListColor(list?.logoURI)\n  const isActive = useIsListActive(listUrl)\n\n  const [open, toggle] = useToggle(false)\n  const node = useRef<HTMLDivElement>()\n  const [referenceElement, setReferenceElement] = useState<HTMLDivElement>()\n  const [popperElement, setPopperElement] = useState<HTMLDivElement>()\n\n  const { styles, attributes } = usePopper(referenceElement, popperElement, {\n    placement: 'auto',\n    strategy: 'fixed',\n    modifiers: [{ name: 'offset', options: { offset: [8, 8] } }],\n  })\n\n  useOnClickOutside(node, open ? toggle : undefined)\n\n  const handleAcceptListUpdate = useCallback(() => {\n    if (!pending) return\n    ReactGA.event({\n      category: 'Lists',\n      action: 'Update List from List Select',\n      label: listUrl,\n    })\n    dispatch(acceptListUpdate(listUrl))\n  }, [dispatch, listUrl, pending])\n\n  const handleRemoveList = useCallback(() => {\n    ReactGA.event({\n      category: 'Lists',\n      action: 'Start Remove List',\n      label: listUrl,\n    })\n    if (window.prompt(t`Please confirm you would like to remove this list by typing REMOVE`) === `REMOVE`) {\n      ReactGA.event({\n        category: 'Lists',\n        action: 'Confirm Remove List',\n        label: listUrl,\n      })\n      dispatch(removeList(listUrl))\n    }\n  }, [dispatch, listUrl])\n\n  const handleEnableList = useCallback(() => {\n    ReactGA.event({\n      category: 'Lists',\n      action: 'Enable List',\n      label: listUrl,\n    })\n    dispatch(enableList(listUrl))\n  }, [dispatch, listUrl])\n\n  const handleDisableList = useCallback(() => {\n    ReactGA.event({\n      category: 'Lists',\n      action: 'Disable List',\n      label: listUrl,\n    })\n    dispatch(disableList(listUrl))\n  }, [dispatch, listUrl])\n\n  if (!list) return null\n\n  return (\n    <RowWrapper\n      active={isActive}\n      hasActiveTokens={activeTokensOnThisChain > 0}\n      bgColor={listColor}\n      key={listUrl}\n      id={listUrlRowHTMLId(listUrl)}\n    >\n      {list.logoURI ? (\n        <ListLogo size=\"40px\" style={{ marginRight: '1rem' }} logoURI={list.logoURI} alt={`${list.name} list logo`} />\n      ) : (\n        <div style={{ width: '24px', height: '24px', marginRight: '1rem' }} />\n      )}\n      <Column style={{ flex: '1' }}>\n        <Row>\n          <StyledTitleText active={isActive}>{list.name}</StyledTitleText>\n        </Row>\n        <RowFixed mt=\"4px\">\n          <StyledListUrlText active={isActive} mr=\"6px\">\n            <Trans>{activeTokensOnThisChain} tokens</Trans>\n          </StyledListUrlText>\n          <StyledMenu ref={node as any}>\n            <ButtonEmpty onClick={toggle} ref={setReferenceElement} padding=\"0\">\n              <Settings stroke={isActive ? theme.bg1 : theme.text1} size={12} />\n            </ButtonEmpty>\n            {open && (\n              <PopoverContainer show={true} ref={setPopperElement as any} style={styles.popper} {...attributes.popper}>\n                <div>{list && listVersionLabel(list.version)}</div>\n                <SeparatorDark />\n                <ExternalLink href={`https://tokenlists.org/token-list?url=${listUrl}`}>\n                  <Trans>View list</Trans>\n                </ExternalLink>\n                <UnpaddedLinkStyledButton onClick={handleRemoveList} disabled={Object.keys(listsByUrl).length === 1}>\n                  <Trans>Remove list</Trans>\n                </UnpaddedLinkStyledButton>\n                {pending && (\n                  <UnpaddedLinkStyledButton onClick={handleAcceptListUpdate}>\n                    <Trans>Update list</Trans>\n                  </UnpaddedLinkStyledButton>\n                )}\n              </PopoverContainer>\n            )}\n          </StyledMenu>\n        </RowFixed>\n      </Column>\n      <ListToggle\n        isActive={isActive}\n        bgColor={listColor}\n        toggle={() => {\n          isActive ? handleDisableList() : handleEnableList()\n        }}\n      />\n    </RowWrapper>\n  )\n})\n\nconst ListContainer = styled.div`\n  padding: 1rem;\n  height: 100%;\n  overflow: auto;\n  padding-bottom: 80px;\n`\n\nexport function ManageLists({\n  setModalView,\n  setImportList,\n  setListUrl,\n}: {\n  setModalView: (view: CurrencyModalView) => void\n  setImportList: (list: TokenList) => void\n  setListUrl: (url: string) => void\n}) {\n  const { chainId } = useActiveWeb3React()\n  const theme = useTheme()\n\n  const [listUrlInput, setListUrlInput] = useState<string>('')\n\n  const lists = useAllLists()\n\n  const tokenCountByListName = useMemo<Record<string, number>>(\n    () =>\n      Object.values(lists).reduce((acc, { current: list }) => {\n        if (!list) {\n          return acc\n        }\n        return {\n          ...acc,\n          [list.name]: list.tokens.reduce((count: number, token) => (token.chainId === chainId ? count + 1 : count), 0),\n        }\n      }, {}),\n    [chainId, lists]\n  )\n\n  // sort by active but only if not visible\n  const activeListUrls = useActiveListUrls()\n\n  const handleInput = useCallback((e) => {\n    setListUrlInput(e.target.value)\n  }, [])\n\n  const fetchList = useFetchListCallback()\n\n  const validUrl: boolean = useMemo(() => {\n    return uriToHttp(listUrlInput).length > 0 || Boolean(parseENSAddress(listUrlInput))\n  }, [listUrlInput])\n\n  const sortedLists = useMemo(() => {\n    const listUrls = Object.keys(lists)\n    return listUrls\n      .filter((listUrl) => {\n        // only show loaded lists, hide unsupported lists\n        return Boolean(lists[listUrl].current) && !Boolean(UNSUPPORTED_LIST_URLS.includes(listUrl))\n      })\n      .sort((listUrlA, listUrlB) => {\n        const { current: listA } = lists[listUrlA]\n        const { current: listB } = lists[listUrlB]\n\n        // first filter on active lists\n        if (activeListUrls?.includes(listUrlA) && !activeListUrls?.includes(listUrlB)) {\n          return -1\n        }\n        if (!activeListUrls?.includes(listUrlA) && activeListUrls?.includes(listUrlB)) {\n          return 1\n        }\n\n        if (listA && listB) {\n          if (tokenCountByListName[listA.name] > tokenCountByListName[listB.name]) {\n            return -1\n          }\n          if (tokenCountByListName[listA.name] < tokenCountByListName[listB.name]) {\n            return 1\n          }\n          return listA.name.toLowerCase() < listB.name.toLowerCase()\n            ? -1\n            : listA.name.toLowerCase() === listB.name.toLowerCase()\n            ? 0\n            : 1\n        }\n        if (listA) return -1\n        if (listB) return 1\n        return 0\n      })\n  }, [lists, activeListUrls, tokenCountByListName])\n\n  // temporary fetched list for import flow\n  const [tempList, setTempList] = useState<TokenList>()\n  const [addError, setAddError] = useState<string | undefined>()\n\n  useEffect(() => {\n    async function fetchTempList() {\n      fetchList(listUrlInput, false)\n        .then((list) => setTempList(list))\n        .catch(() => setAddError(t`Error importing list`))\n    }\n    // if valid url, fetch details for card\n    if (validUrl) {\n      fetchTempList()\n    } else {\n      setTempList(undefined)\n      listUrlInput !== '' && setAddError(t`Enter valid list location`)\n    }\n\n    // reset error\n    if (listUrlInput === '') {\n      setAddError(undefined)\n    }\n  }, [fetchList, listUrlInput, validUrl])\n\n  // check if list is already imported\n  const isImported = Object.keys(lists).includes(listUrlInput)\n\n  // set list values and have parent modal switch to import list view\n  const handleImport = useCallback(() => {\n    if (!tempList) return\n    setImportList(tempList)\n    setModalView(CurrencyModalView.importList)\n    setListUrl(listUrlInput)\n  }, [listUrlInput, setImportList, setListUrl, setModalView, tempList])\n\n  return (\n    <Wrapper>\n      <PaddedColumn gap=\"14px\">\n        <Row>\n          <SearchInput\n            type=\"text\"\n            id=\"list-add-input\"\n            placeholder={t`https:// or ipfs:// or ENS name`}\n            value={listUrlInput}\n            onChange={handleInput}\n          />\n        </Row>\n        {addError ? (\n          <TYPE.error title={addError} style={{ textOverflow: 'ellipsis', overflow: 'hidden' }} error>\n            {addError}\n          </TYPE.error>\n        ) : null}\n      </PaddedColumn>\n      {tempList && (\n        <PaddedColumn style={{ paddingTop: 0 }}>\n          <Card backgroundColor={theme.bg2} padding=\"12px 20px\">\n            <RowBetween>\n              <RowFixed>\n                {tempList.logoURI && <ListLogo logoURI={tempList.logoURI} size=\"40px\" />}\n                <AutoColumn gap=\"4px\" style={{ marginLeft: '20px' }}>\n                  <TYPE.body fontWeight={600}>{tempList.name}</TYPE.body>\n                  <TYPE.main fontSize={'12px'}>\n                    <Trans>{tempList.tokens.length} tokens</Trans>\n                  </TYPE.main>\n                </AutoColumn>\n              </RowFixed>\n              {isImported ? (\n                <RowFixed>\n                  <IconWrapper stroke={theme.text2} size=\"16px\" marginRight={'10px'}>\n                    <CheckCircle />\n                  </IconWrapper>\n                  <TYPE.body color={theme.text2}>\n                    <Trans>Loaded</Trans>\n                  </TYPE.body>\n                </RowFixed>\n              ) : (\n                <ButtonPrimary\n                  style={{ fontSize: '14px' }}\n                  padding=\"6px 8px\"\n                  width=\"fit-content\"\n                  onClick={handleImport}\n                >\n                  <Trans>Import</Trans>\n                </ButtonPrimary>\n              )}\n            </RowBetween>\n          </Card>\n        </PaddedColumn>\n      )}\n      <Separator />\n      <ListContainer>\n        <AutoColumn gap=\"md\">\n          {sortedLists.map((listUrl) => (\n            <ListRow key={listUrl} listUrl={listUrl} />\n          ))}\n        </AutoColumn>\n      </ListContainer>\n    </Wrapper>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}