{"ast":null,"code":"import _slicedToArray from\"/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _styled from\"styled-components\";import{Trans}from\"@lingui/react\";import{useRef,useCallback,useState,useMemo}from'react';import Column from'components/Column';import{ExplorerDataType,getExplorerLink}from'../../utils/getExplorerLink';import{PaddedColumn,Separator,SearchInput}from'./styleds';import Row,{RowBetween,RowFixed}from'components/Row';import{TYPE,ExternalLinkIcon,TrashIcon,ButtonText,ExternalLink}from'theme';import{useToken}from'hooks/Tokens';import{useUserAddedTokens,useRemoveUserAddedToken}from'state/user/hooks';import CurrencyLogo from'components/CurrencyLogo';import{isAddress}from'utils';import{useActiveWeb3React}from'hooks/web3';import Card from'components/Card';import ImportRow from'./ImportRow';import useTheme from'../../hooks/useTheme';import{CurrencyModalView}from'./CurrencySearchModal';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Wrapper=_styled.div.withConfig({componentId:\"sc-s3wxjn-0\"})([\"width:100%;height:calc(100% - 60px);position:relative;padding-bottom:80px;\"]);var Footer=_styled.div.withConfig({componentId:\"sc-s3wxjn-1\"})([\"position:absolute;bottom:0;width:100%;border-radius:20px;border-top-right-radius:0;border-top-left-radius:0;border-top:1px solid \",\";padding:20px;text-align:center;\"],function(_ref){var theme=_ref.theme;return theme.bg3;});export default function ManageTokens(_ref2){var setModalView=_ref2.setModalView,setImportToken=_ref2.setImportToken;var _useActiveWeb3React=useActiveWeb3React(),chainId=_useActiveWeb3React.chainId;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),searchQuery=_useState2[0],setSearchQuery=_useState2[1];var theme=useTheme();// manage focus on modal show\nvar inputRef=useRef();var handleInput=useCallback(function(event){var input=event.target.value;var checksummedInput=isAddress(input);setSearchQuery(checksummedInput||input);},[]);// if they input an address, use it\nvar isAddressSearch=isAddress(searchQuery);var searchToken=useToken(searchQuery);// all tokens for local lisr\nvar userAddedTokens=useUserAddedTokens();var removeToken=useRemoveUserAddedToken();var handleRemoveAll=useCallback(function(){if(chainId&&userAddedTokens){userAddedTokens.map(function(token){return removeToken(chainId,token.address);});}},[removeToken,userAddedTokens,chainId]);var tokenList=useMemo(function(){return chainId&&userAddedTokens.map(function(token){return/*#__PURE__*/_jsxs(RowBetween,{width:\"100%\",children:[/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(CurrencyLogo,{currency:token,size:'20px'}),/*#__PURE__*/_jsx(ExternalLink,{href:getExplorerLink(chainId,token.address,ExplorerDataType.ADDRESS),children:/*#__PURE__*/_jsx(TYPE.main,{ml:'10px',fontWeight:600,children:token.symbol})})]}),/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(TrashIcon,{onClick:function onClick(){return removeToken(chainId,token.address);}}),/*#__PURE__*/_jsx(ExternalLinkIcon,{href:getExplorerLink(chainId,token.address,ExplorerDataType.ADDRESS)})]})]},token.address);});},[userAddedTokens,chainId,removeToken]);return/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsxs(Column,{style:{width:'100%',height:'100%',flex:'1 1'},children:[/*#__PURE__*/_jsxs(PaddedColumn,{gap:\"14px\",children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(SearchInput,{type:\"text\",id:\"token-search-input\",placeholder:'0x0000',value:searchQuery,autoComplete:\"off\",ref:inputRef,onChange:handleInput})}),searchQuery!==''&&!isAddressSearch&&/*#__PURE__*/_jsx(TYPE.error,{error:true,children:/*#__PURE__*/_jsx(Trans,{id:\"Enter valid token address\"})}),searchToken&&/*#__PURE__*/_jsx(Card,{backgroundColor:theme.bg2,padding:\"10px 0\",children:/*#__PURE__*/_jsx(ImportRow,{token:searchToken,showImportView:function showImportView(){return setModalView(CurrencyModalView.importToken);},setImportToken:setImportToken,style:{height:'fit-content'}})})]}),/*#__PURE__*/_jsx(Separator,{}),/*#__PURE__*/_jsxs(PaddedColumn,{gap:\"lg\",style:{overflow:'auto',marginBottom:'10px'},children:[/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(TYPE.main,{fontWeight:600,children:/*#__PURE__*/_jsx(Trans,{id:\"{0} Custom Tokens\",values:{0:userAddedTokens===null||userAddedTokens===void 0?void 0:userAddedTokens.length}})}),userAddedTokens.length>0&&/*#__PURE__*/_jsx(ButtonText,{onClick:handleRemoveAll,children:/*#__PURE__*/_jsx(TYPE.blue,{children:/*#__PURE__*/_jsx(Trans,{id:\"Clear all\"})})})]}),tokenList]})]}),/*#__PURE__*/_jsx(Footer,{children:/*#__PURE__*/_jsx(TYPE.darkGray,{children:/*#__PURE__*/_jsx(Trans,{id:\"Tip: Custom tokens are stored locally in your browser\"})})})]});}","map":{"version":3,"sources":["/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/src/components/SearchModal/ManageTokens.tsx"],"names":["useRef","useCallback","useState","useMemo","Column","ExplorerDataType","getExplorerLink","PaddedColumn","Separator","SearchInput","Row","RowBetween","RowFixed","TYPE","ExternalLinkIcon","TrashIcon","ButtonText","ExternalLink","useToken","useUserAddedTokens","useRemoveUserAddedToken","CurrencyLogo","isAddress","useActiveWeb3React","Card","ImportRow","useTheme","CurrencyModalView","Wrapper","styled","div","Footer","theme","bg3","ManageTokens","setModalView","setImportToken","chainId","searchQuery","setSearchQuery","inputRef","handleInput","event","input","target","value","checksummedInput","isAddressSearch","searchToken","userAddedTokens","removeToken","handleRemoveAll","map","token","address","tokenList","ADDRESS","symbol","width","height","flex","bg2","importToken","overflow","marginBottom","length"],"mappings":"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","sourcesContent":["import { useRef, RefObject, useCallback, useState, useMemo } from 'react'\nimport Column from 'components/Column'\nimport { ExplorerDataType, getExplorerLink } from '../../utils/getExplorerLink'\nimport { PaddedColumn, Separator, SearchInput } from './styleds'\nimport Row, { RowBetween, RowFixed } from 'components/Row'\nimport { TYPE, ExternalLinkIcon, TrashIcon, ButtonText, ExternalLink } from 'theme'\nimport { useToken } from 'hooks/Tokens'\nimport styled from 'styled-components/macro'\nimport { useUserAddedTokens, useRemoveUserAddedToken } from 'state/user/hooks'\nimport { Token } from '@uniswap/sdk-core'\nimport CurrencyLogo from 'components/CurrencyLogo'\nimport { isAddress } from 'utils'\nimport { useActiveWeb3React } from 'hooks/web3'\nimport Card from 'components/Card'\nimport ImportRow from './ImportRow'\nimport useTheme from '../../hooks/useTheme'\nimport { Trans } from '@lingui/macro'\n\nimport { CurrencyModalView } from './CurrencySearchModal'\n\nconst Wrapper = styled.div`\n  width: 100%;\n  height: calc(100% - 60px);\n  position: relative;\n  padding-bottom: 80px;\n`\n\nconst Footer = styled.div`\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  border-radius: 20px;\n  border-top-right-radius: 0;\n  border-top-left-radius: 0;\n  border-top: 1px solid ${({ theme }) => theme.bg3};\n  padding: 20px;\n  text-align: center;\n`\n\nexport default function ManageTokens({\n  setModalView,\n  setImportToken,\n}: {\n  setModalView: (view: CurrencyModalView) => void\n  setImportToken: (token: Token) => void\n}) {\n  const { chainId } = useActiveWeb3React()\n\n  const [searchQuery, setSearchQuery] = useState<string>('')\n  const theme = useTheme()\n\n  // manage focus on modal show\n  const inputRef = useRef<HTMLInputElement>()\n  const handleInput = useCallback((event) => {\n    const input = event.target.value\n    const checksummedInput = isAddress(input)\n    setSearchQuery(checksummedInput || input)\n  }, [])\n\n  // if they input an address, use it\n  const isAddressSearch = isAddress(searchQuery)\n  const searchToken = useToken(searchQuery)\n\n  // all tokens for local lisr\n  const userAddedTokens: Token[] = useUserAddedTokens()\n  const removeToken = useRemoveUserAddedToken()\n\n  const handleRemoveAll = useCallback(() => {\n    if (chainId && userAddedTokens) {\n      userAddedTokens.map((token) => {\n        return removeToken(chainId, token.address)\n      })\n    }\n  }, [removeToken, userAddedTokens, chainId])\n\n  const tokenList = useMemo(() => {\n    return (\n      chainId &&\n      userAddedTokens.map((token) => (\n        <RowBetween key={token.address} width=\"100%\">\n          <RowFixed>\n            <CurrencyLogo currency={token} size={'20px'} />\n            <ExternalLink href={getExplorerLink(chainId, token.address, ExplorerDataType.ADDRESS)}>\n              <TYPE.main ml={'10px'} fontWeight={600}>\n                {token.symbol}\n              </TYPE.main>\n            </ExternalLink>\n          </RowFixed>\n          <RowFixed>\n            <TrashIcon onClick={() => removeToken(chainId, token.address)} />\n            <ExternalLinkIcon href={getExplorerLink(chainId, token.address, ExplorerDataType.ADDRESS)} />\n          </RowFixed>\n        </RowBetween>\n      ))\n    )\n  }, [userAddedTokens, chainId, removeToken])\n\n  return (\n    <Wrapper>\n      <Column style={{ width: '100%', height: '100%', flex: '1 1' }}>\n        <PaddedColumn gap=\"14px\">\n          <Row>\n            <SearchInput\n              type=\"text\"\n              id=\"token-search-input\"\n              placeholder={'0x0000'}\n              value={searchQuery}\n              autoComplete=\"off\"\n              ref={inputRef as RefObject<HTMLInputElement>}\n              onChange={handleInput}\n            />\n          </Row>\n          {searchQuery !== '' && !isAddressSearch && (\n            <TYPE.error error={true}>\n              <Trans>Enter valid token address</Trans>\n            </TYPE.error>\n          )}\n          {searchToken && (\n            <Card backgroundColor={theme.bg2} padding=\"10px 0\">\n              <ImportRow\n                token={searchToken}\n                showImportView={() => setModalView(CurrencyModalView.importToken)}\n                setImportToken={setImportToken}\n                style={{ height: 'fit-content' }}\n              />\n            </Card>\n          )}\n        </PaddedColumn>\n        <Separator />\n        <PaddedColumn gap=\"lg\" style={{ overflow: 'auto', marginBottom: '10px' }}>\n          <RowBetween>\n            <TYPE.main fontWeight={600}>\n              <Trans>{userAddedTokens?.length} Custom Tokens</Trans>\n            </TYPE.main>\n            {userAddedTokens.length > 0 && (\n              <ButtonText onClick={handleRemoveAll}>\n                <TYPE.blue>\n                  <Trans>Clear all</Trans>\n                </TYPE.blue>\n              </ButtonText>\n            )}\n          </RowBetween>\n          {tokenList}\n        </PaddedColumn>\n      </Column>\n      <Footer>\n        <TYPE.darkGray>\n          <Trans>Tip: Custom tokens are stored locally in your browser</Trans>\n        </TYPE.darkGray>\n      </Footer>\n    </Wrapper>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}