{"ast":null,"code":"import _slicedToArray from\"/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _styled from\"styled-components\";import React,{useEffect,useMemo,useRef}from'react';import{ButtonGray}from'components/Button';import{select,zoom,zoomIdentity}from'd3';import{RefreshCcw,ZoomIn,ZoomOut}from'react-feather';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Wrapper=_styled.div.withConfig({componentId:\"sc-2wmd87-0\"})([\"display:grid;grid-template-columns:repeat(\",\",1fr);grid-gap:6px;position:absolute;top:-75px;right:0;\"],function(_ref){var count=_ref.count;return count.toString();});var Button=_styled(ButtonGray).withConfig({componentId:\"sc-2wmd87-1\"})([\"&:hover{background-color:\",\";color:\",\";}width:32px;height:32px;padding:4px;\"],function(_ref2){var theme=_ref2.theme;return theme.bg2;},function(_ref3){var theme=_ref3.theme;return theme.text1;});export var ZoomOverlay=_styled.rect.withConfig({componentId:\"sc-2wmd87-2\"})([\"fill:transparent;cursor:grab;&:active{cursor:grabbing;}\"]);export default function Zoom(_ref4){var svg=_ref4.svg,xScale=_ref4.xScale,setZoom=_ref4.setZoom,width=_ref4.width,height=_ref4.height,resetBrush=_ref4.resetBrush,showResetButton=_ref4.showResetButton,zoomLevels=_ref4.zoomLevels;var zoomBehavior=useRef();var _useMemo=useMemo(function(){return[function(){return svg&&zoomBehavior.current&&select(svg).transition().call(zoomBehavior.current.scaleBy,2);},function(){return svg&&zoomBehavior.current&&select(svg).transition().call(zoomBehavior.current.scaleBy,0.5);},function(){return svg&&zoomBehavior.current&&select(svg).transition().call(zoomBehavior.current.scaleTo,0.5);},function(){return svg&&zoomBehavior.current&&select(svg).call(zoomBehavior.current.transform,zoomIdentity.translate(0,0).scale(1)).transition().call(zoomBehavior.current.scaleTo,0.5);}];},[svg]),_useMemo2=_slicedToArray(_useMemo,4),zoomIn=_useMemo2[0],zoomOut=_useMemo2[1],zoomInitial=_useMemo2[2],zoomReset=_useMemo2[3];useEffect(function(){if(!svg)return;zoomBehavior.current=zoom().scaleExtent([zoomLevels.min,zoomLevels.max]).extent([[0,0],[width,height]]).on('zoom',function(_ref5){var transform=_ref5.transform;return setZoom(transform);});select(svg).call(zoomBehavior.current);},[height,width,setZoom,svg,xScale,zoomBehavior,zoomLevels,zoomLevels.max,zoomLevels.min]);useEffect(function(){// reset zoom to initial on zoomLevel change\nzoomInitial();},[zoomInitial,zoomLevels]);return/*#__PURE__*/_jsxs(Wrapper,{count:showResetButton?3:2,children:[showResetButton&&/*#__PURE__*/_jsx(Button,{onClick:function onClick(){resetBrush();zoomReset();},disabled:false,children:/*#__PURE__*/_jsx(RefreshCcw,{size:16})}),/*#__PURE__*/_jsx(Button,{onClick:zoomIn,disabled:false,children:/*#__PURE__*/_jsx(ZoomIn,{size:16})}),/*#__PURE__*/_jsx(Button,{onClick:zoomOut,disabled:false,children:/*#__PURE__*/_jsx(ZoomOut,{size:16})})]});}","map":{"version":3,"sources":["/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/src/components/LiquidityChartRangeInput/Zoom.tsx"],"names":["React","useEffect","useMemo","useRef","ButtonGray","select","zoom","zoomIdentity","RefreshCcw","ZoomIn","ZoomOut","Wrapper","styled","div","count","toString","Button","theme","bg2","text1","ZoomOverlay","rect","Zoom","svg","xScale","setZoom","width","height","resetBrush","showResetButton","zoomLevels","zoomBehavior","current","transition","call","scaleBy","scaleTo","transform","translate","scale","zoomIn","zoomOut","zoomInitial","zoomReset","scaleExtent","min","max","extent","on"],"mappings":"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","sourcesContent":["import React, { useEffect, useMemo, useRef } from 'react'\nimport { ButtonGray } from 'components/Button'\nimport styled from 'styled-components/macro'\nimport { ScaleLinear, select, ZoomBehavior, zoom, ZoomTransform, zoomIdentity } from 'd3'\nimport { RefreshCcw, ZoomIn, ZoomOut } from 'react-feather'\nimport { ZoomLevels } from './types'\n\nconst Wrapper = styled.div<{ count: number }>`\n  display: grid;\n  grid-template-columns: repeat(${({ count }) => count.toString()}, 1fr);\n  grid-gap: 6px;\n\n  position: absolute;\n  top: -75px;\n  right: 0;\n`\n\nconst Button = styled(ButtonGray)`\n  &:hover {\n    background-color: ${({ theme }) => theme.bg2};\n    color: ${({ theme }) => theme.text1};\n  }\n\n  width: 32px;\n  height: 32px;\n  padding: 4px;\n`\n\nexport const ZoomOverlay = styled.rect`\n  fill: transparent;\n  cursor: grab;\n\n  &:active {\n    cursor: grabbing;\n  }\n`\n\nexport default function Zoom({\n  svg,\n  xScale,\n  setZoom,\n  width,\n  height,\n  resetBrush,\n  showResetButton,\n  zoomLevels,\n}: {\n  svg: SVGElement | null\n  xScale: ScaleLinear<number, number>\n  setZoom: (transform: ZoomTransform) => void\n  width: number\n  height: number\n  resetBrush: () => void\n  showResetButton: boolean\n  zoomLevels: ZoomLevels\n}) {\n  const zoomBehavior = useRef<ZoomBehavior<Element, unknown>>()\n\n  const [zoomIn, zoomOut, zoomInitial, zoomReset] = useMemo(\n    () => [\n      () =>\n        svg &&\n        zoomBehavior.current &&\n        select(svg as Element)\n          .transition()\n          .call(zoomBehavior.current.scaleBy, 2),\n      () =>\n        svg &&\n        zoomBehavior.current &&\n        select(svg as Element)\n          .transition()\n          .call(zoomBehavior.current.scaleBy, 0.5),\n      () =>\n        svg &&\n        zoomBehavior.current &&\n        select(svg as Element)\n          .transition()\n          .call(zoomBehavior.current.scaleTo, 0.5),\n      () =>\n        svg &&\n        zoomBehavior.current &&\n        select(svg as Element)\n          .call(zoomBehavior.current.transform, zoomIdentity.translate(0, 0).scale(1))\n          .transition()\n          .call(zoomBehavior.current.scaleTo, 0.5),\n    ],\n    [svg]\n  )\n\n  useEffect(() => {\n    if (!svg) return\n\n    zoomBehavior.current = zoom()\n      .scaleExtent([zoomLevels.min, zoomLevels.max])\n      .extent([\n        [0, 0],\n        [width, height],\n      ])\n      .on('zoom', ({ transform }: { transform: ZoomTransform }) => setZoom(transform))\n\n    select(svg as Element).call(zoomBehavior.current)\n  }, [height, width, setZoom, svg, xScale, zoomBehavior, zoomLevels, zoomLevels.max, zoomLevels.min])\n\n  useEffect(() => {\n    // reset zoom to initial on zoomLevel change\n    zoomInitial()\n  }, [zoomInitial, zoomLevels])\n\n  return (\n    <Wrapper count={showResetButton ? 3 : 2}>\n      {showResetButton && (\n        <Button\n          onClick={() => {\n            resetBrush()\n            zoomReset()\n          }}\n          disabled={false}\n        >\n          <RefreshCcw size={16} />\n        </Button>\n      )}\n      <Button onClick={zoomIn} disabled={false}>\n        <ZoomIn size={16} />\n      </Button>\n      <Button onClick={zoomOut} disabled={false}>\n        <ZoomOut size={16} />\n      </Button>\n    </Wrapper>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}