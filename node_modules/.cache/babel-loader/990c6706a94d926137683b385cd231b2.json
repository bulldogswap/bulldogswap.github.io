{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{ThemeContext as _ThemeContext}from\"styled-components\";import _styled from\"styled-components\";import{Trans}from\"@lingui/react\";import{NetworkAlert}from'components/NetworkAlert/NetworkAlert';import{AdvancedSwapDetails}from'components/swap/AdvancedSwapDetails';import UnsupportedCurrencyFooter from'components/swap/UnsupportedCurrencyFooter';import{MouseoverTooltip,MouseoverTooltipContent}from'components/Tooltip';import JSBI from'jsbi';import{useCallback,useContext,useEffect,useMemo,useState}from'react';import{ArrowDown,ArrowLeft,CheckCircle,HelpCircle,Info}from'react-feather';import ReactGA from'react-ga';import{Link}from'react-router-dom';import{Text}from'rebass';import AddressInputPanel from'../../components/AddressInputPanel';import{ButtonConfirmed,ButtonError,ButtonGray,ButtonLight,ButtonPrimary}from'../../components/Button';import{GreyCard}from'../../components/Card';import{AutoColumn}from'../../components/Column';import CurrencyInputPanel from'../../components/CurrencyInputPanel';import CurrencyLogo from'../../components/CurrencyLogo';import Loader from'../../components/Loader';import Row,{AutoRow,RowFixed}from'../../components/Row';import BetterTradeLink from'../../components/swap/BetterTradeLink';import confirmPriceImpactWithoutFee from'../../components/swap/confirmPriceImpactWithoutFee';import ConfirmSwapModal from'../../components/swap/ConfirmSwapModal';import{ArrowWrapper,Dots,SwapCallbackError,Wrapper}from'../../components/swap/styleds';import SwapHeader from'../../components/swap/SwapHeader';import TradePrice from'../../components/swap/TradePrice';import{SwitchLocaleLink}from'../../components/SwitchLocaleLink';import TokenWarningModal from'../../components/TokenWarningModal';import{useAllTokens,useCurrency}from'../../hooks/Tokens';import{ApprovalState,useApproveCallbackFromTrade}from'../../hooks/useApproveCallback';import{V3TradeState}from'../../hooks/useBestV3Trade';import useENSAddress from'../../hooks/useENSAddress';import{useERC20PermitFromTrade,UseERC20PermitState}from'../../hooks/useERC20Permit';import useIsArgentWallet from'../../hooks/useIsArgentWallet';import{useIsSwapUnsupported}from'../../hooks/useIsSwapUnsupported';import{useSwapCallback}from'../../hooks/useSwapCallback';import useToggledVersion,{Version}from'../../hooks/useToggledVersion';import{useUSDCValue}from'../../hooks/useUSDCPrice';import useWrapCallback,{WrapType}from'../../hooks/useWrapCallback';import{useActiveWeb3React}from'../../hooks/web3';import{useWalletModalToggle}from'../../state/application/hooks';import{Field}from'../../state/swap/actions';import{useDefaultsFromURLSearch,useDerivedSwapInfo,useSwapActionHandlers,useSwapState}from'../../state/swap/hooks';import{useExpertModeManager,useUserSingleHopOnly}from'../../state/user/hooks';import{HideSmall,LinkStyledButton,TYPE}from'../../theme';import{computeFiatValuePriceImpact}from'../../utils/computeFiatValuePriceImpact';import{getTradeVersion}from'../../utils/getTradeVersion';import{isTradeBetter}from'../../utils/isTradeBetter';import{maxAmountSpend}from'../../utils/maxAmountSpend';import{warningSeverity}from'../../utils/prices';import AppBody from'../AppBody';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var StyledInfo=_styled(Info).withConfig({componentId:\"sc-1es900k-0\"})([\"opacity:0.4;color:\",\";height:16px;width:16px;:hover{opacity:0.8;}\"],function(_ref){var theme=_ref.theme;return theme.text1;});export default function Swap(_ref2){var _parsedAmounts$indepe,_parsedAmounts$indepe2,_parsedAmounts$depend,_parsedAmounts$depend2,_formattedAmounts,_parsedAmounts$indepe3,_parsedAmounts$Field$,_currencies$Field$INP,_currencies$Field$INP2,_currencies$Field$INP3;var history=_ref2.history;var _useActiveWeb3React=useActiveWeb3React(),account=_useActiveWeb3React.account;var loadedUrlParams=useDefaultsFromURLSearch();// token warning stuff\nvar _ref3=[useCurrency(loadedUrlParams===null||loadedUrlParams===void 0?void 0:loadedUrlParams.inputCurrencyId),useCurrency(loadedUrlParams===null||loadedUrlParams===void 0?void 0:loadedUrlParams.outputCurrencyId)],loadedInputCurrency=_ref3[0],loadedOutputCurrency=_ref3[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),dismissTokenWarning=_useState2[0],setDismissTokenWarning=_useState2[1];var urlLoadedTokens=useMemo(function(){var _filter,_ref4;return(_filter=(_ref4=[loadedInputCurrency,loadedOutputCurrency])===null||_ref4===void 0?void 0:_ref4.filter(function(c){var _c$isToken;return(_c$isToken=c===null||c===void 0?void 0:c.isToken)!==null&&_c$isToken!==void 0?_c$isToken:false;}))!==null&&_filter!==void 0?_filter:[];},[loadedInputCurrency,loadedOutputCurrency]);var handleConfirmTokenWarning=useCallback(function(){setDismissTokenWarning(true);},[]);// dismiss warning if all imported tokens are in active lists\nvar defaultTokens=useAllTokens();var importTokensNotInDefault=urlLoadedTokens&&urlLoadedTokens.filter(function(token){return!Boolean(token.address in defaultTokens);});var theme=useContext(_ThemeContext);// toggle wallet when disconnected\nvar toggleWalletModal=useWalletModalToggle();// for expert mode\nvar _useExpertModeManager=useExpertModeManager(),_useExpertModeManager2=_slicedToArray(_useExpertModeManager,1),isExpertMode=_useExpertModeManager2[0];// get version from the url\nvar toggledVersion=useToggledVersion();// swap state\nvar _useSwapState=useSwapState(),independentField=_useSwapState.independentField,typedValue=_useSwapState.typedValue,recipient=_useSwapState.recipient;var _useDerivedSwapInfo=useDerivedSwapInfo(toggledVersion),v2Trade=_useDerivedSwapInfo.v2Trade,_useDerivedSwapInfo$v=_useDerivedSwapInfo.v3TradeState,v3Trade=_useDerivedSwapInfo$v.trade,v3TradeState=_useDerivedSwapInfo$v.state,trade=_useDerivedSwapInfo.toggledTrade,allowedSlippage=_useDerivedSwapInfo.allowedSlippage,currencyBalances=_useDerivedSwapInfo.currencyBalances,parsedAmount=_useDerivedSwapInfo.parsedAmount,currencies=_useDerivedSwapInfo.currencies,swapInputError=_useDerivedSwapInfo.inputError;var _useWrapCallback=useWrapCallback(currencies[Field.INPUT],currencies[Field.OUTPUT],typedValue),wrapType=_useWrapCallback.wrapType,onWrap=_useWrapCallback.execute,wrapInputError=_useWrapCallback.inputError;var showWrap=wrapType!==WrapType.NOT_APPLICABLE;var _useENSAddress=useENSAddress(recipient),recipientAddress=_useENSAddress.address;var parsedAmounts=useMemo(function(){var _ref5,_ref6;return showWrap?(_ref5={},_defineProperty(_ref5,Field.INPUT,parsedAmount),_defineProperty(_ref5,Field.OUTPUT,parsedAmount),_ref5):(_ref6={},_defineProperty(_ref6,Field.INPUT,independentField===Field.INPUT?parsedAmount:trade===null||trade===void 0?void 0:trade.inputAmount),_defineProperty(_ref6,Field.OUTPUT,independentField===Field.OUTPUT?parsedAmount:trade===null||trade===void 0?void 0:trade.outputAmount),_ref6);},[independentField,parsedAmount,showWrap,trade]);var fiatValueInput=useUSDCValue(parsedAmounts[Field.INPUT]);var fiatValueOutput=useUSDCValue(parsedAmounts[Field.OUTPUT]);var priceImpact=computeFiatValuePriceImpact(fiatValueInput,fiatValueOutput);var _useSwapActionHandler=useSwapActionHandlers(),onSwitchTokens=_useSwapActionHandler.onSwitchTokens,onCurrencySelection=_useSwapActionHandler.onCurrencySelection,onUserInput=_useSwapActionHandler.onUserInput,onChangeRecipient=_useSwapActionHandler.onChangeRecipient;var isValid=!swapInputError;var dependentField=independentField===Field.INPUT?Field.OUTPUT:Field.INPUT;var handleTypeInput=useCallback(function(value){onUserInput(Field.INPUT,value);},[onUserInput]);var handleTypeOutput=useCallback(function(value){onUserInput(Field.OUTPUT,value);},[onUserInput]);// reset if they close warning without tokens in params\nvar handleDismissTokenWarning=useCallback(function(){setDismissTokenWarning(true);history.push('/swap/');},[history]);// modal and loading\nvar _useState3=useState({showConfirm:false,tradeToConfirm:undefined,attemptingTxn:false,swapErrorMessage:undefined,txHash:undefined}),_useState4=_slicedToArray(_useState3,2),_useState4$=_useState4[0],showConfirm=_useState4$.showConfirm,tradeToConfirm=_useState4$.tradeToConfirm,swapErrorMessage=_useState4$.swapErrorMessage,attemptingTxn=_useState4$.attemptingTxn,txHash=_useState4$.txHash,setSwapState=_useState4[1];var formattedAmounts=(_formattedAmounts={},_defineProperty(_formattedAmounts,independentField,typedValue),_defineProperty(_formattedAmounts,dependentField,showWrap?(_parsedAmounts$indepe=(_parsedAmounts$indepe2=parsedAmounts[independentField])===null||_parsedAmounts$indepe2===void 0?void 0:_parsedAmounts$indepe2.toExact())!==null&&_parsedAmounts$indepe!==void 0?_parsedAmounts$indepe:'':(_parsedAmounts$depend=(_parsedAmounts$depend2=parsedAmounts[dependentField])===null||_parsedAmounts$depend2===void 0?void 0:_parsedAmounts$depend2.toSignificant(6))!==null&&_parsedAmounts$depend!==void 0?_parsedAmounts$depend:''),_formattedAmounts);var userHasSpecifiedInputOutput=Boolean(currencies[Field.INPUT]&&currencies[Field.OUTPUT]&&((_parsedAmounts$indepe3=parsedAmounts[independentField])===null||_parsedAmounts$indepe3===void 0?void 0:_parsedAmounts$indepe3.greaterThan(JSBI.BigInt(0))));var routeNotFound=!(trade===null||trade===void 0?void 0:trade.route);var isLoadingRoute=toggledVersion===Version.v3&&V3TradeState.LOADING===v3TradeState;// check whether the user has approved the router on the input token\nvar _useApproveCallbackFr=useApproveCallbackFromTrade(trade,allowedSlippage),_useApproveCallbackFr2=_slicedToArray(_useApproveCallbackFr,2),approvalState=_useApproveCallbackFr2[0],approveCallback=_useApproveCallbackFr2[1];var _useERC20PermitFromTr=useERC20PermitFromTrade(trade,allowedSlippage),signatureState=_useERC20PermitFromTr.state,signatureData=_useERC20PermitFromTr.signatureData,gatherPermitSignature=_useERC20PermitFromTr.gatherPermitSignature;var handleApprove=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(signatureState===UseERC20PermitState.NOT_SIGNED&&gatherPermitSignature)){_context.next=13;break;}_context.prev=1;_context.next=4;return gatherPermitSignature();case 4:_context.next=11;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](1);if(!((_context.t0===null||_context.t0===void 0?void 0:_context.t0.code)!==4001)){_context.next=11;break;}_context.next=11;return approveCallback();case 11:_context.next=15;break;case 13:_context.next=15;return approveCallback();case 15:case\"end\":return _context.stop();}}},_callee,null,[[1,6]]);})),[approveCallback,gatherPermitSignature,signatureState]);// check if user has gone through approval process, used to show two step buttons, reset on token change\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),approvalSubmitted=_useState6[0],setApprovalSubmitted=_useState6[1];// mark when a user has submitted an approval, reset onTokenSelection for input field\nuseEffect(function(){if(approvalState===ApprovalState.PENDING){setApprovalSubmitted(true);}},[approvalState,approvalSubmitted]);var maxInputAmount=maxAmountSpend(currencyBalances[Field.INPUT]);var showMaxButton=Boolean((maxInputAmount===null||maxInputAmount===void 0?void 0:maxInputAmount.greaterThan(0))&&!((_parsedAmounts$Field$=parsedAmounts[Field.INPUT])===null||_parsedAmounts$Field$===void 0?void 0:_parsedAmounts$Field$.equalTo(maxInputAmount)));// the callback to execute the swap\nvar _useSwapCallback=useSwapCallback(trade,allowedSlippage,recipient,signatureData),swapCallback=_useSwapCallback.callback,swapCallbackError=_useSwapCallback.error;var _useUserSingleHopOnly=useUserSingleHopOnly(),_useUserSingleHopOnly2=_slicedToArray(_useUserSingleHopOnly,1),singleHopOnly=_useUserSingleHopOnly2[0];var handleSwap=useCallback(function(){if(!swapCallback){return;}if(priceImpact&&!confirmPriceImpactWithoutFee(priceImpact)){return;}setSwapState({attemptingTxn:true,tradeToConfirm:tradeToConfirm,showConfirm:showConfirm,swapErrorMessage:undefined,txHash:undefined});swapCallback().then(function(hash){var _trade$inputAmount,_trade$inputAmount$cu,_trade$outputAmount,_trade$outputAmount$c;setSwapState({attemptingTxn:false,tradeToConfirm:tradeToConfirm,showConfirm:showConfirm,swapErrorMessage:undefined,txHash:hash});ReactGA.event({category:'Swap',action:recipient===null?'Swap w/o Send':(recipientAddress!==null&&recipientAddress!==void 0?recipientAddress:recipient)===account?'Swap w/o Send + recipient':'Swap w/ Send',label:[trade===null||trade===void 0?void 0:(_trade$inputAmount=trade.inputAmount)===null||_trade$inputAmount===void 0?void 0:(_trade$inputAmount$cu=_trade$inputAmount.currency)===null||_trade$inputAmount$cu===void 0?void 0:_trade$inputAmount$cu.symbol,trade===null||trade===void 0?void 0:(_trade$outputAmount=trade.outputAmount)===null||_trade$outputAmount===void 0?void 0:(_trade$outputAmount$c=_trade$outputAmount.currency)===null||_trade$outputAmount$c===void 0?void 0:_trade$outputAmount$c.symbol,getTradeVersion(trade),singleHopOnly?'SH':'MH'].join('/')});}).catch(function(error){setSwapState({attemptingTxn:false,tradeToConfirm:tradeToConfirm,showConfirm:showConfirm,swapErrorMessage:error.message,txHash:undefined});});},[swapCallback,priceImpact,tradeToConfirm,showConfirm,recipient,recipientAddress,account,trade,singleHopOnly]);// errors\nvar _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showInverted=_useState8[0],setShowInverted=_useState8[1];// warnings on the greater of fiat value price impact and execution price impact\nvar priceImpactSeverity=useMemo(function(){var executionPriceImpact=trade===null||trade===void 0?void 0:trade.priceImpact;return warningSeverity(executionPriceImpact&&priceImpact?executionPriceImpact.greaterThan(priceImpact)?executionPriceImpact:priceImpact:executionPriceImpact!==null&&executionPriceImpact!==void 0?executionPriceImpact:priceImpact);},[priceImpact,trade]);var isArgentWallet=useIsArgentWallet();// show approve flow when: no error on inputs, not approved or pending, or approved in current session\n// never show if price impact is above threshold in non expert mode\nvar showApproveFlow=!isArgentWallet&&!swapInputError&&(approvalState===ApprovalState.NOT_APPROVED||approvalState===ApprovalState.PENDING||approvalSubmitted&&approvalState===ApprovalState.APPROVED)&&!(priceImpactSeverity>3&&!isExpertMode);var handleConfirmDismiss=useCallback(function(){setSwapState({showConfirm:false,tradeToConfirm:tradeToConfirm,attemptingTxn:attemptingTxn,swapErrorMessage:swapErrorMessage,txHash:txHash});// if there was a tx hash, we want to clear the input\nif(txHash){onUserInput(Field.INPUT,'');}},[attemptingTxn,onUserInput,swapErrorMessage,tradeToConfirm,txHash]);var handleAcceptChanges=useCallback(function(){setSwapState({tradeToConfirm:trade,swapErrorMessage:swapErrorMessage,txHash:txHash,attemptingTxn:attemptingTxn,showConfirm:showConfirm});},[attemptingTxn,showConfirm,swapErrorMessage,trade,txHash]);var handleInputSelect=useCallback(function(inputCurrency){setApprovalSubmitted(false);// reset 2 step UI for approvals\nonCurrencySelection(Field.INPUT,inputCurrency);},[onCurrencySelection]);var handleMaxInput=useCallback(function(){maxInputAmount&&onUserInput(Field.INPUT,maxInputAmount.toExact());},[maxInputAmount,onUserInput]);var handleOutputSelect=useCallback(function(outputCurrency){return onCurrencySelection(Field.OUTPUT,outputCurrency);},[onCurrencySelection]);var swapIsUnsupported=useIsSwapUnsupported(currencies===null||currencies===void 0?void 0:currencies.INPUT,currencies===null||currencies===void 0?void 0:currencies.OUTPUT);var priceImpactTooHigh=priceImpactSeverity>3&&!isExpertMode;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TokenWarningModal,{isOpen:importTokensNotInDefault.length>0&&!dismissTokenWarning,tokens:importTokensNotInDefault,onConfirm:handleConfirmTokenWarning,onDismiss:handleDismissTokenWarning}),/*#__PURE__*/_jsx(NetworkAlert,{}),/*#__PURE__*/_jsxs(AppBody,{children:[/*#__PURE__*/_jsx(SwapHeader,{allowedSlippage:allowedSlippage}),/*#__PURE__*/_jsxs(Wrapper,{id:\"swap-page\",children:[/*#__PURE__*/_jsx(ConfirmSwapModal,{isOpen:showConfirm,trade:trade,originalTrade:tradeToConfirm,onAcceptChanges:handleAcceptChanges,attemptingTxn:attemptingTxn,txHash:txHash,recipient:recipient,allowedSlippage:allowedSlippage,onConfirm:handleSwap,swapErrorMessage:swapErrorMessage,onDismiss:handleConfirmDismiss}),/*#__PURE__*/_jsxs(AutoColumn,{gap:'md',children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'relative'},children:[/*#__PURE__*/_jsx(CurrencyInputPanel,{label:independentField===Field.OUTPUT&&!showWrap?/*#__PURE__*/_jsx(Trans,{id:\"From (at most)\"}):/*#__PURE__*/_jsx(Trans,{id:\"From\"}),value:formattedAmounts[Field.INPUT],showMaxButton:showMaxButton,currency:currencies[Field.INPUT],onUserInput:handleTypeInput,onMax:handleMaxInput,fiatValue:fiatValueInput!==null&&fiatValueInput!==void 0?fiatValueInput:undefined,onCurrencySelect:handleInputSelect,otherCurrency:currencies[Field.OUTPUT],showCommonBases:true,id:\"swap-currency-input\"}),/*#__PURE__*/_jsx(ArrowWrapper,{clickable:true,children:/*#__PURE__*/_jsx(ArrowDown,{size:\"16\",onClick:function onClick(){setApprovalSubmitted(false);// reset 2 step UI for approvals\nonSwitchTokens();},color:currencies[Field.INPUT]&&currencies[Field.OUTPUT]?theme.text1:theme.text3})}),/*#__PURE__*/_jsx(CurrencyInputPanel,{value:formattedAmounts[Field.OUTPUT],onUserInput:handleTypeOutput,label:independentField===Field.INPUT&&!showWrap?/*#__PURE__*/_jsx(Trans,{id:\"To (at least)\"}):/*#__PURE__*/_jsx(Trans,{id:\"To\"}),showMaxButton:false,hideBalance:false,fiatValue:fiatValueOutput!==null&&fiatValueOutput!==void 0?fiatValueOutput:undefined,priceImpact:priceImpact,currency:currencies[Field.OUTPUT],onCurrencySelect:handleOutputSelect,otherCurrency:currencies[Field.INPUT],showCommonBases:true,id:\"swap-currency-output\"})]}),recipient!==null&&!showWrap?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(AutoRow,{justify:\"space-between\",style:{padding:'0 1rem'},children:[/*#__PURE__*/_jsx(ArrowWrapper,{clickable:false,children:/*#__PURE__*/_jsx(ArrowDown,{size:\"16\",color:theme.text2})}),/*#__PURE__*/_jsx(LinkStyledButton,{id:\"remove-recipient-button\",onClick:function onClick(){return onChangeRecipient(null);},children:/*#__PURE__*/_jsx(Trans,{id:\"- Remove send\"})})]}),/*#__PURE__*/_jsx(AddressInputPanel,{id:\"recipient\",value:recipient,onChange:onChangeRecipient})]}):null,showWrap?null:/*#__PURE__*/_jsxs(Row,{style:{justifyContent:!trade?'center':'space-between'},children:[/*#__PURE__*/_jsxs(RowFixed,{children:[[V3TradeState.VALID,V3TradeState.SYNCING,V3TradeState.NO_ROUTE_FOUND].includes(v3TradeState)&&(toggledVersion===Version.v3&&isTradeBetter(v3Trade,v2Trade)?/*#__PURE__*/_jsx(BetterTradeLink,{version:Version.v2,otherTradeNonexistent:!v3Trade}):toggledVersion===Version.v2&&isTradeBetter(v2Trade,v3Trade)?/*#__PURE__*/_jsx(BetterTradeLink,{version:Version.v3,otherTradeNonexistent:!v2Trade}):toggledVersion===Version.v2&&/*#__PURE__*/_jsxs(ButtonGray,{width:\"fit-content\",padding:\"0.1rem 0.5rem 0.1rem 0.35rem\",as:Link,to:\"/swap\",style:{display:'flex',justifyContent:'space-between',alignItems:'center',height:'24px',lineHeight:'120%',marginLeft:'0.75rem'},children:[/*#__PURE__*/_jsx(ArrowLeft,{color:theme.text3,size:12}),\" \\xA0\",/*#__PURE__*/_jsx(TYPE.main,{style:{lineHeight:'120%'},fontSize:12,children:/*#__PURE__*/_jsx(Trans,{id:\"<0>Back to </0>V3\",components:{0:/*#__PURE__*/_jsx(HideSmall,{})}})})]})),toggledVersion===Version.v3&&trade&&isTradeBetter(v2Trade,v3Trade)&&/*#__PURE__*/_jsx(ButtonGray,{width:\"fit-content\",padding:\"0.1rem 0.5rem\",disabled:true,style:{display:'flex',justifyContent:'space-between',height:'24px',opacity:0.8,marginLeft:'0.25rem'},children:/*#__PURE__*/_jsx(TYPE.black,{fontSize:12,children:/*#__PURE__*/_jsx(Trans,{id:\"V3\"})})})]}),trade?/*#__PURE__*/_jsxs(RowFixed,{children:[/*#__PURE__*/_jsx(TradePrice,{price:trade.executionPrice,showInverted:showInverted,setShowInverted:setShowInverted}),/*#__PURE__*/_jsx(MouseoverTooltipContent,{content:/*#__PURE__*/_jsx(AdvancedSwapDetails,{trade:trade,allowedSlippage:allowedSlippage}),children:/*#__PURE__*/_jsx(StyledInfo,{})})]}):null]}),/*#__PURE__*/_jsxs(\"div\",{children:[swapIsUnsupported?/*#__PURE__*/_jsx(ButtonPrimary,{disabled:true,children:/*#__PURE__*/_jsx(TYPE.main,{mb:\"4px\",children:/*#__PURE__*/_jsx(Trans,{id:\"Unsupported Asset\"})})}):!account?/*#__PURE__*/_jsx(ButtonLight,{onClick:toggleWalletModal,children:/*#__PURE__*/_jsx(Trans,{id:\"Connect Wallet\"})}):showWrap?/*#__PURE__*/_jsx(ButtonPrimary,{disabled:Boolean(wrapInputError),onClick:onWrap,children:wrapInputError!==null&&wrapInputError!==void 0?wrapInputError:wrapType===WrapType.WRAP?/*#__PURE__*/_jsx(Trans,{id:\"Wrap\"}):wrapType===WrapType.UNWRAP?/*#__PURE__*/_jsx(Trans,{id:\"Unwrap\"}):null}):routeNotFound&&userHasSpecifiedInputOutput?/*#__PURE__*/_jsx(GreyCard,{style:{textAlign:'center'},children:/*#__PURE__*/_jsx(TYPE.main,{mb:\"4px\",children:isLoadingRoute?/*#__PURE__*/_jsx(Dots,{children:/*#__PURE__*/_jsx(Trans,{id:\"Loading\"})}):singleHopOnly?/*#__PURE__*/_jsx(Trans,{id:\"Insufficient liquidity for this trade. Try enabling multi-hop trades.\"}):/*#__PURE__*/_jsx(Trans,{id:\"Insufficient liquidity for this trade.\"})})}):showApproveFlow?/*#__PURE__*/_jsx(AutoRow,{style:{flexWrap:'nowrap',width:'100%'},children:/*#__PURE__*/_jsxs(AutoColumn,{style:{width:'100%'},gap:\"12px\",children:[/*#__PURE__*/_jsx(ButtonConfirmed,{onClick:handleApprove,disabled:approvalState!==ApprovalState.NOT_APPROVED||approvalSubmitted||signatureState===UseERC20PermitState.SIGNED,width:\"100%\",altDisabledStyle:approvalState===ApprovalState.PENDING// show solid button while waiting\n,confirmed:approvalState===ApprovalState.APPROVED||signatureState===UseERC20PermitState.SIGNED,children:/*#__PURE__*/_jsxs(AutoRow,{justify:\"space-between\",style:{flexWrap:'nowrap'},children:[/*#__PURE__*/_jsxs(\"span\",{style:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(CurrencyLogo,{currency:currencies[Field.INPUT],size:'20px',style:{marginRight:'8px',flexShrink:0}}),approvalState===ApprovalState.APPROVED||signatureState===UseERC20PermitState.SIGNED?/*#__PURE__*/_jsx(Trans,{id:\"You can now trade {0}\",values:{0:(_currencies$Field$INP=currencies[Field.INPUT])===null||_currencies$Field$INP===void 0?void 0:_currencies$Field$INP.symbol}}):/*#__PURE__*/_jsx(Trans,{id:\"Allow the Uniswap Protocol to use your {0}\",values:{0:(_currencies$Field$INP2=currencies[Field.INPUT])===null||_currencies$Field$INP2===void 0?void 0:_currencies$Field$INP2.symbol}})]}),approvalState===ApprovalState.PENDING?/*#__PURE__*/_jsx(Loader,{stroke:\"white\"}):approvalSubmitted&&approvalState===ApprovalState.APPROVED||signatureState===UseERC20PermitState.SIGNED?/*#__PURE__*/_jsx(CheckCircle,{size:\"20\",color:theme.green1}):/*#__PURE__*/_jsx(MouseoverTooltip,{text:/*#__PURE__*/_jsx(Trans,{id:\"You must give the Uniswap smart contracts permission to use your {0}. You only have to do this once per token.\",values:{0:(_currencies$Field$INP3=currencies[Field.INPUT])===null||_currencies$Field$INP3===void 0?void 0:_currencies$Field$INP3.symbol}}),children:/*#__PURE__*/_jsx(HelpCircle,{size:\"20\",color:'white',style:{marginLeft:'8px'}})})]})}),/*#__PURE__*/_jsx(ButtonError,{onClick:function onClick(){if(isExpertMode){handleSwap();}else{setSwapState({tradeToConfirm:trade,attemptingTxn:false,swapErrorMessage:undefined,showConfirm:true,txHash:undefined});}},width:\"100%\",id:\"swap-button\",disabled:!isValid||approvalState!==ApprovalState.APPROVED&&signatureState!==UseERC20PermitState.SIGNED||priceImpactTooHigh,error:isValid&&priceImpactSeverity>2,children:/*#__PURE__*/_jsx(Text,{fontSize:16,fontWeight:500,children:priceImpactTooHigh?/*#__PURE__*/_jsx(Trans,{id:\"High Price Impact\"}):priceImpactSeverity>2?/*#__PURE__*/_jsx(Trans,{id:\"Swap Anyway\"}):/*#__PURE__*/_jsx(Trans,{id:\"Swap\"})})})]})}):/*#__PURE__*/_jsx(ButtonError,{onClick:function onClick(){if(isExpertMode){handleSwap();}else{setSwapState({tradeToConfirm:trade,attemptingTxn:false,swapErrorMessage:undefined,showConfirm:true,txHash:undefined});}},id:\"swap-button\",disabled:!isValid||priceImpactTooHigh||!!swapCallbackError,error:isValid&&priceImpactSeverity>2&&!swapCallbackError,children:/*#__PURE__*/_jsx(Text,{fontSize:20,fontWeight:500,children:swapInputError?swapInputError:priceImpactTooHigh?/*#__PURE__*/_jsx(Trans,{id:\"Price Impact Too High\"}):priceImpactSeverity>2?/*#__PURE__*/_jsx(Trans,{id:\"Swap Anyway\"}):/*#__PURE__*/_jsx(Trans,{id:\"Swap\"})})}),isExpertMode&&swapErrorMessage?/*#__PURE__*/_jsx(SwapCallbackError,{error:swapErrorMessage}):null]})]})]})]}),/*#__PURE__*/_jsx(SwitchLocaleLink,{}),!swapIsUnsupported?null:/*#__PURE__*/_jsx(UnsupportedCurrencyFooter,{show:swapIsUnsupported,currencies:[currencies.INPUT,currencies.OUTPUT]})]});}","map":{"version":3,"sources":["/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/src/pages/Swap/index.tsx"],"names":["NetworkAlert","AdvancedSwapDetails","UnsupportedCurrencyFooter","MouseoverTooltip","MouseoverTooltipContent","JSBI","useCallback","useContext","useEffect","useMemo","useState","ArrowDown","ArrowLeft","CheckCircle","HelpCircle","Info","ReactGA","Link","Text","AddressInputPanel","ButtonConfirmed","ButtonError","ButtonGray","ButtonLight","ButtonPrimary","GreyCard","AutoColumn","CurrencyInputPanel","CurrencyLogo","Loader","Row","AutoRow","RowFixed","BetterTradeLink","confirmPriceImpactWithoutFee","ConfirmSwapModal","ArrowWrapper","Dots","SwapCallbackError","Wrapper","SwapHeader","TradePrice","SwitchLocaleLink","TokenWarningModal","useAllTokens","useCurrency","ApprovalState","useApproveCallbackFromTrade","V3TradeState","useENSAddress","useERC20PermitFromTrade","UseERC20PermitState","useIsArgentWallet","useIsSwapUnsupported","useSwapCallback","useToggledVersion","Version","useUSDCValue","useWrapCallback","WrapType","useActiveWeb3React","useWalletModalToggle","Field","useDefaultsFromURLSearch","useDerivedSwapInfo","useSwapActionHandlers","useSwapState","useExpertModeManager","useUserSingleHopOnly","HideSmall","LinkStyledButton","TYPE","computeFiatValuePriceImpact","getTradeVersion","isTradeBetter","maxAmountSpend","warningSeverity","AppBody","StyledInfo","styled","theme","text1","Swap","history","account","loadedUrlParams","inputCurrencyId","outputCurrencyId","loadedInputCurrency","loadedOutputCurrency","dismissTokenWarning","setDismissTokenWarning","urlLoadedTokens","filter","c","isToken","handleConfirmTokenWarning","defaultTokens","importTokensNotInDefault","token","Boolean","address","ThemeContext","toggleWalletModal","isExpertMode","toggledVersion","independentField","typedValue","recipient","v2Trade","v3TradeState","v3Trade","trade","state","toggledTrade","allowedSlippage","currencyBalances","parsedAmount","currencies","swapInputError","inputError","INPUT","OUTPUT","wrapType","onWrap","execute","wrapInputError","showWrap","NOT_APPLICABLE","recipientAddress","parsedAmounts","inputAmount","outputAmount","fiatValueInput","fiatValueOutput","priceImpact","onSwitchTokens","onCurrencySelection","onUserInput","onChangeRecipient","isValid","dependentField","handleTypeInput","value","handleTypeOutput","handleDismissTokenWarning","push","showConfirm","tradeToConfirm","undefined","attemptingTxn","swapErrorMessage","txHash","setSwapState","formattedAmounts","toExact","toSignificant","userHasSpecifiedInputOutput","greaterThan","BigInt","routeNotFound","route","isLoadingRoute","v3","LOADING","approvalState","approveCallback","signatureState","signatureData","gatherPermitSignature","handleApprove","NOT_SIGNED","code","approvalSubmitted","setApprovalSubmitted","PENDING","maxInputAmount","showMaxButton","equalTo","swapCallback","callback","swapCallbackError","error","singleHopOnly","handleSwap","then","hash","event","category","action","label","currency","symbol","join","catch","message","showInverted","setShowInverted","priceImpactSeverity","executionPriceImpact","isArgentWallet","showApproveFlow","NOT_APPROVED","APPROVED","handleConfirmDismiss","handleAcceptChanges","handleInputSelect","inputCurrency","handleMaxInput","handleOutputSelect","outputCurrency","swapIsUnsupported","priceImpactTooHigh","length","display","text3","padding","text2","justifyContent","VALID","SYNCING","NO_ROUTE_FOUND","includes","v2","alignItems","height","lineHeight","marginLeft","opacity","executionPrice","WRAP","UNWRAP","textAlign","flexWrap","width","SIGNED","marginRight","flexShrink","green1"],"mappings":"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","sourcesContent":["import { Trans } from '@lingui/macro'\nimport { Currency, CurrencyAmount, Token, TradeType } from '@uniswap/sdk-core'\nimport { Trade as V2Trade } from '@uniswap/v2-sdk'\nimport { Trade as V3Trade } from '@uniswap/v3-sdk'\nimport { NetworkAlert } from 'components/NetworkAlert/NetworkAlert'\nimport { AdvancedSwapDetails } from 'components/swap/AdvancedSwapDetails'\nimport UnsupportedCurrencyFooter from 'components/swap/UnsupportedCurrencyFooter'\nimport { MouseoverTooltip, MouseoverTooltipContent } from 'components/Tooltip'\nimport JSBI from 'jsbi'\nimport { useCallback, useContext, useEffect, useMemo, useState } from 'react'\nimport { ArrowDown, ArrowLeft, CheckCircle, HelpCircle, Info } from 'react-feather'\nimport ReactGA from 'react-ga'\nimport { Link, RouteComponentProps } from 'react-router-dom'\nimport { Text } from 'rebass'\nimport styled, { ThemeContext } from 'styled-components/macro'\nimport AddressInputPanel from '../../components/AddressInputPanel'\nimport { ButtonConfirmed, ButtonError, ButtonGray, ButtonLight, ButtonPrimary } from '../../components/Button'\nimport { GreyCard } from '../../components/Card'\nimport { AutoColumn } from '../../components/Column'\nimport CurrencyInputPanel from '../../components/CurrencyInputPanel'\nimport CurrencyLogo from '../../components/CurrencyLogo'\nimport Loader from '../../components/Loader'\nimport Row, { AutoRow, RowFixed } from '../../components/Row'\nimport BetterTradeLink from '../../components/swap/BetterTradeLink'\nimport confirmPriceImpactWithoutFee from '../../components/swap/confirmPriceImpactWithoutFee'\nimport ConfirmSwapModal from '../../components/swap/ConfirmSwapModal'\nimport { ArrowWrapper, Dots, SwapCallbackError, Wrapper } from '../../components/swap/styleds'\nimport SwapHeader from '../../components/swap/SwapHeader'\nimport TradePrice from '../../components/swap/TradePrice'\nimport { SwitchLocaleLink } from '../../components/SwitchLocaleLink'\nimport TokenWarningModal from '../../components/TokenWarningModal'\nimport { useAllTokens, useCurrency } from '../../hooks/Tokens'\nimport { ApprovalState, useApproveCallbackFromTrade } from '../../hooks/useApproveCallback'\nimport { V3TradeState } from '../../hooks/useBestV3Trade'\nimport useENSAddress from '../../hooks/useENSAddress'\nimport { useERC20PermitFromTrade, UseERC20PermitState } from '../../hooks/useERC20Permit'\nimport useIsArgentWallet from '../../hooks/useIsArgentWallet'\nimport { useIsSwapUnsupported } from '../../hooks/useIsSwapUnsupported'\nimport { useSwapCallback } from '../../hooks/useSwapCallback'\nimport useToggledVersion, { Version } from '../../hooks/useToggledVersion'\nimport { useUSDCValue } from '../../hooks/useUSDCPrice'\nimport useWrapCallback, { WrapType } from '../../hooks/useWrapCallback'\nimport { useActiveWeb3React } from '../../hooks/web3'\nimport { useWalletModalToggle } from '../../state/application/hooks'\nimport { Field } from '../../state/swap/actions'\nimport {\n  useDefaultsFromURLSearch,\n  useDerivedSwapInfo,\n  useSwapActionHandlers,\n  useSwapState,\n} from '../../state/swap/hooks'\nimport { useExpertModeManager, useUserSingleHopOnly } from '../../state/user/hooks'\nimport { HideSmall, LinkStyledButton, TYPE } from '../../theme'\nimport { computeFiatValuePriceImpact } from '../../utils/computeFiatValuePriceImpact'\nimport { getTradeVersion } from '../../utils/getTradeVersion'\nimport { isTradeBetter } from '../../utils/isTradeBetter'\nimport { maxAmountSpend } from '../../utils/maxAmountSpend'\nimport { warningSeverity } from '../../utils/prices'\nimport AppBody from '../AppBody'\n\nconst StyledInfo = styled(Info)`\n  opacity: 0.4;\n  color: ${({ theme }) => theme.text1};\n  height: 16px;\n  width: 16px;\n  :hover {\n    opacity: 0.8;\n  }\n`\n\nexport default function Swap({ history }: RouteComponentProps) {\n  const { account } = useActiveWeb3React()\n  const loadedUrlParams = useDefaultsFromURLSearch()\n\n  // token warning stuff\n  const [loadedInputCurrency, loadedOutputCurrency] = [\n    useCurrency(loadedUrlParams?.inputCurrencyId),\n    useCurrency(loadedUrlParams?.outputCurrencyId),\n  ]\n  const [dismissTokenWarning, setDismissTokenWarning] = useState<boolean>(false)\n  const urlLoadedTokens: Token[] = useMemo(\n    () => [loadedInputCurrency, loadedOutputCurrency]?.filter((c): c is Token => c?.isToken ?? false) ?? [],\n    [loadedInputCurrency, loadedOutputCurrency]\n  )\n  const handleConfirmTokenWarning = useCallback(() => {\n    setDismissTokenWarning(true)\n  }, [])\n\n  // dismiss warning if all imported tokens are in active lists\n  const defaultTokens = useAllTokens()\n  const importTokensNotInDefault =\n    urlLoadedTokens &&\n    urlLoadedTokens.filter((token: Token) => {\n      return !Boolean(token.address in defaultTokens)\n    })\n\n  const theme = useContext(ThemeContext)\n\n  // toggle wallet when disconnected\n  const toggleWalletModal = useWalletModalToggle()\n\n  // for expert mode\n  const [isExpertMode] = useExpertModeManager()\n\n  // get version from the url\n  const toggledVersion = useToggledVersion()\n\n  // swap state\n  const { independentField, typedValue, recipient } = useSwapState()\n  const {\n    v2Trade,\n    v3TradeState: { trade: v3Trade, state: v3TradeState },\n    toggledTrade: trade,\n    allowedSlippage,\n    currencyBalances,\n    parsedAmount,\n    currencies,\n    inputError: swapInputError,\n  } = useDerivedSwapInfo(toggledVersion)\n\n  const {\n    wrapType,\n    execute: onWrap,\n    inputError: wrapInputError,\n  } = useWrapCallback(currencies[Field.INPUT], currencies[Field.OUTPUT], typedValue)\n  const showWrap: boolean = wrapType !== WrapType.NOT_APPLICABLE\n  const { address: recipientAddress } = useENSAddress(recipient)\n\n  const parsedAmounts = useMemo(\n    () =>\n      showWrap\n        ? {\n            [Field.INPUT]: parsedAmount,\n            [Field.OUTPUT]: parsedAmount,\n          }\n        : {\n            [Field.INPUT]: independentField === Field.INPUT ? parsedAmount : trade?.inputAmount,\n            [Field.OUTPUT]: independentField === Field.OUTPUT ? parsedAmount : trade?.outputAmount,\n          },\n    [independentField, parsedAmount, showWrap, trade]\n  )\n\n  const fiatValueInput = useUSDCValue(parsedAmounts[Field.INPUT])\n  const fiatValueOutput = useUSDCValue(parsedAmounts[Field.OUTPUT])\n  const priceImpact = computeFiatValuePriceImpact(fiatValueInput, fiatValueOutput)\n\n  const { onSwitchTokens, onCurrencySelection, onUserInput, onChangeRecipient } = useSwapActionHandlers()\n  const isValid = !swapInputError\n  const dependentField: Field = independentField === Field.INPUT ? Field.OUTPUT : Field.INPUT\n\n  const handleTypeInput = useCallback(\n    (value: string) => {\n      onUserInput(Field.INPUT, value)\n    },\n    [onUserInput]\n  )\n  const handleTypeOutput = useCallback(\n    (value: string) => {\n      onUserInput(Field.OUTPUT, value)\n    },\n    [onUserInput]\n  )\n\n  // reset if they close warning without tokens in params\n  const handleDismissTokenWarning = useCallback(() => {\n    setDismissTokenWarning(true)\n    history.push('/swap/')\n  }, [history])\n\n  // modal and loading\n  const [{ showConfirm, tradeToConfirm, swapErrorMessage, attemptingTxn, txHash }, setSwapState] = useState<{\n    showConfirm: boolean\n    tradeToConfirm: V2Trade<Currency, Currency, TradeType> | V3Trade<Currency, Currency, TradeType> | undefined\n    attemptingTxn: boolean\n    swapErrorMessage: string | undefined\n    txHash: string | undefined\n  }>({\n    showConfirm: false,\n    tradeToConfirm: undefined,\n    attemptingTxn: false,\n    swapErrorMessage: undefined,\n    txHash: undefined,\n  })\n\n  const formattedAmounts = {\n    [independentField]: typedValue,\n    [dependentField]: showWrap\n      ? parsedAmounts[independentField]?.toExact() ?? ''\n      : parsedAmounts[dependentField]?.toSignificant(6) ?? '',\n  }\n\n  const userHasSpecifiedInputOutput = Boolean(\n    currencies[Field.INPUT] && currencies[Field.OUTPUT] && parsedAmounts[independentField]?.greaterThan(JSBI.BigInt(0))\n  )\n  const routeNotFound = !trade?.route\n  const isLoadingRoute = toggledVersion === Version.v3 && V3TradeState.LOADING === v3TradeState\n\n  // check whether the user has approved the router on the input token\n  const [approvalState, approveCallback] = useApproveCallbackFromTrade(trade, allowedSlippage)\n  const {\n    state: signatureState,\n    signatureData,\n    gatherPermitSignature,\n  } = useERC20PermitFromTrade(trade, allowedSlippage)\n\n  const handleApprove = useCallback(async () => {\n    if (signatureState === UseERC20PermitState.NOT_SIGNED && gatherPermitSignature) {\n      try {\n        await gatherPermitSignature()\n      } catch (error) {\n        // try to approve if gatherPermitSignature failed for any reason other than the user rejecting it\n        if (error?.code !== 4001) {\n          await approveCallback()\n        }\n      }\n    } else {\n      await approveCallback()\n    }\n  }, [approveCallback, gatherPermitSignature, signatureState])\n\n  // check if user has gone through approval process, used to show two step buttons, reset on token change\n  const [approvalSubmitted, setApprovalSubmitted] = useState<boolean>(false)\n\n  // mark when a user has submitted an approval, reset onTokenSelection for input field\n  useEffect(() => {\n    if (approvalState === ApprovalState.PENDING) {\n      setApprovalSubmitted(true)\n    }\n  }, [approvalState, approvalSubmitted])\n\n  const maxInputAmount: CurrencyAmount<Currency> | undefined = maxAmountSpend(currencyBalances[Field.INPUT])\n  const showMaxButton = Boolean(maxInputAmount?.greaterThan(0) && !parsedAmounts[Field.INPUT]?.equalTo(maxInputAmount))\n\n  // the callback to execute the swap\n  const { callback: swapCallback, error: swapCallbackError } = useSwapCallback(\n    trade,\n    allowedSlippage,\n    recipient,\n    signatureData\n  )\n\n  const [singleHopOnly] = useUserSingleHopOnly()\n\n  const handleSwap = useCallback(() => {\n    if (!swapCallback) {\n      return\n    }\n    if (priceImpact && !confirmPriceImpactWithoutFee(priceImpact)) {\n      return\n    }\n    setSwapState({ attemptingTxn: true, tradeToConfirm, showConfirm, swapErrorMessage: undefined, txHash: undefined })\n    swapCallback()\n      .then((hash) => {\n        setSwapState({ attemptingTxn: false, tradeToConfirm, showConfirm, swapErrorMessage: undefined, txHash: hash })\n        ReactGA.event({\n          category: 'Swap',\n          action:\n            recipient === null\n              ? 'Swap w/o Send'\n              : (recipientAddress ?? recipient) === account\n              ? 'Swap w/o Send + recipient'\n              : 'Swap w/ Send',\n          label: [\n            trade?.inputAmount?.currency?.symbol,\n            trade?.outputAmount?.currency?.symbol,\n            getTradeVersion(trade),\n            singleHopOnly ? 'SH' : 'MH',\n          ].join('/'),\n        })\n      })\n      .catch((error) => {\n        setSwapState({\n          attemptingTxn: false,\n          tradeToConfirm,\n          showConfirm,\n          swapErrorMessage: error.message,\n          txHash: undefined,\n        })\n      })\n  }, [\n    swapCallback,\n    priceImpact,\n    tradeToConfirm,\n    showConfirm,\n    recipient,\n    recipientAddress,\n    account,\n    trade,\n    singleHopOnly,\n  ])\n\n  // errors\n  const [showInverted, setShowInverted] = useState<boolean>(false)\n\n  // warnings on the greater of fiat value price impact and execution price impact\n  const priceImpactSeverity = useMemo(() => {\n    const executionPriceImpact = trade?.priceImpact\n    return warningSeverity(\n      executionPriceImpact && priceImpact\n        ? executionPriceImpact.greaterThan(priceImpact)\n          ? executionPriceImpact\n          : priceImpact\n        : executionPriceImpact ?? priceImpact\n    )\n  }, [priceImpact, trade])\n\n  const isArgentWallet = useIsArgentWallet()\n\n  // show approve flow when: no error on inputs, not approved or pending, or approved in current session\n  // never show if price impact is above threshold in non expert mode\n  const showApproveFlow =\n    !isArgentWallet &&\n    !swapInputError &&\n    (approvalState === ApprovalState.NOT_APPROVED ||\n      approvalState === ApprovalState.PENDING ||\n      (approvalSubmitted && approvalState === ApprovalState.APPROVED)) &&\n    !(priceImpactSeverity > 3 && !isExpertMode)\n\n  const handleConfirmDismiss = useCallback(() => {\n    setSwapState({ showConfirm: false, tradeToConfirm, attemptingTxn, swapErrorMessage, txHash })\n    // if there was a tx hash, we want to clear the input\n    if (txHash) {\n      onUserInput(Field.INPUT, '')\n    }\n  }, [attemptingTxn, onUserInput, swapErrorMessage, tradeToConfirm, txHash])\n\n  const handleAcceptChanges = useCallback(() => {\n    setSwapState({ tradeToConfirm: trade, swapErrorMessage, txHash, attemptingTxn, showConfirm })\n  }, [attemptingTxn, showConfirm, swapErrorMessage, trade, txHash])\n\n  const handleInputSelect = useCallback(\n    (inputCurrency) => {\n      setApprovalSubmitted(false) // reset 2 step UI for approvals\n      onCurrencySelection(Field.INPUT, inputCurrency)\n    },\n    [onCurrencySelection]\n  )\n\n  const handleMaxInput = useCallback(() => {\n    maxInputAmount && onUserInput(Field.INPUT, maxInputAmount.toExact())\n  }, [maxInputAmount, onUserInput])\n\n  const handleOutputSelect = useCallback(\n    (outputCurrency) => onCurrencySelection(Field.OUTPUT, outputCurrency),\n    [onCurrencySelection]\n  )\n\n  const swapIsUnsupported = useIsSwapUnsupported(currencies?.INPUT, currencies?.OUTPUT)\n\n  const priceImpactTooHigh = priceImpactSeverity > 3 && !isExpertMode\n\n  return (\n    <>\n      <TokenWarningModal\n        isOpen={importTokensNotInDefault.length > 0 && !dismissTokenWarning}\n        tokens={importTokensNotInDefault}\n        onConfirm={handleConfirmTokenWarning}\n        onDismiss={handleDismissTokenWarning}\n      />\n      <NetworkAlert />\n      <AppBody>\n        <SwapHeader allowedSlippage={allowedSlippage} />\n        <Wrapper id=\"swap-page\">\n          <ConfirmSwapModal\n            isOpen={showConfirm}\n            trade={trade}\n            originalTrade={tradeToConfirm}\n            onAcceptChanges={handleAcceptChanges}\n            attemptingTxn={attemptingTxn}\n            txHash={txHash}\n            recipient={recipient}\n            allowedSlippage={allowedSlippage}\n            onConfirm={handleSwap}\n            swapErrorMessage={swapErrorMessage}\n            onDismiss={handleConfirmDismiss}\n          />\n\n          <AutoColumn gap={'md'}>\n            <div style={{ display: 'relative' }}>\n              <CurrencyInputPanel\n                label={\n                  independentField === Field.OUTPUT && !showWrap ? <Trans>From (at most)</Trans> : <Trans>From</Trans>\n                }\n                value={formattedAmounts[Field.INPUT]}\n                showMaxButton={showMaxButton}\n                currency={currencies[Field.INPUT]}\n                onUserInput={handleTypeInput}\n                onMax={handleMaxInput}\n                fiatValue={fiatValueInput ?? undefined}\n                onCurrencySelect={handleInputSelect}\n                otherCurrency={currencies[Field.OUTPUT]}\n                showCommonBases={true}\n                id=\"swap-currency-input\"\n              />\n              <ArrowWrapper clickable>\n                <ArrowDown\n                  size=\"16\"\n                  onClick={() => {\n                    setApprovalSubmitted(false) // reset 2 step UI for approvals\n                    onSwitchTokens()\n                  }}\n                  color={currencies[Field.INPUT] && currencies[Field.OUTPUT] ? theme.text1 : theme.text3}\n                />\n              </ArrowWrapper>\n              <CurrencyInputPanel\n                value={formattedAmounts[Field.OUTPUT]}\n                onUserInput={handleTypeOutput}\n                label={independentField === Field.INPUT && !showWrap ? <Trans>To (at least)</Trans> : <Trans>To</Trans>}\n                showMaxButton={false}\n                hideBalance={false}\n                fiatValue={fiatValueOutput ?? undefined}\n                priceImpact={priceImpact}\n                currency={currencies[Field.OUTPUT]}\n                onCurrencySelect={handleOutputSelect}\n                otherCurrency={currencies[Field.INPUT]}\n                showCommonBases={true}\n                id=\"swap-currency-output\"\n              />\n            </div>\n\n            {recipient !== null && !showWrap ? (\n              <>\n                <AutoRow justify=\"space-between\" style={{ padding: '0 1rem' }}>\n                  <ArrowWrapper clickable={false}>\n                    <ArrowDown size=\"16\" color={theme.text2} />\n                  </ArrowWrapper>\n                  <LinkStyledButton id=\"remove-recipient-button\" onClick={() => onChangeRecipient(null)}>\n                    <Trans>- Remove send</Trans>\n                  </LinkStyledButton>\n                </AutoRow>\n                <AddressInputPanel id=\"recipient\" value={recipient} onChange={onChangeRecipient} />\n              </>\n            ) : null}\n\n            {showWrap ? null : (\n              <Row style={{ justifyContent: !trade ? 'center' : 'space-between' }}>\n                <RowFixed>\n                  {[V3TradeState.VALID, V3TradeState.SYNCING, V3TradeState.NO_ROUTE_FOUND].includes(v3TradeState) &&\n                    (toggledVersion === Version.v3 && isTradeBetter(v3Trade, v2Trade) ? (\n                      <BetterTradeLink version={Version.v2} otherTradeNonexistent={!v3Trade} />\n                    ) : toggledVersion === Version.v2 && isTradeBetter(v2Trade, v3Trade) ? (\n                      <BetterTradeLink version={Version.v3} otherTradeNonexistent={!v2Trade} />\n                    ) : (\n                      toggledVersion === Version.v2 && (\n                        <ButtonGray\n                          width=\"fit-content\"\n                          padding=\"0.1rem 0.5rem 0.1rem 0.35rem\"\n                          as={Link}\n                          to=\"/swap\"\n                          style={{\n                            display: 'flex',\n                            justifyContent: 'space-between',\n                            alignItems: 'center',\n                            height: '24px',\n                            lineHeight: '120%',\n                            marginLeft: '0.75rem',\n                          }}\n                        >\n                          <ArrowLeft color={theme.text3} size={12} /> &nbsp;\n                          <TYPE.main style={{ lineHeight: '120%' }} fontSize={12}>\n                            <Trans>\n                              <HideSmall>Back to </HideSmall>\n                              V3\n                            </Trans>\n                          </TYPE.main>\n                        </ButtonGray>\n                      )\n                    ))}\n\n                  {toggledVersion === Version.v3 && trade && isTradeBetter(v2Trade, v3Trade) && (\n                    <ButtonGray\n                      width=\"fit-content\"\n                      padding=\"0.1rem 0.5rem\"\n                      disabled\n                      style={{\n                        display: 'flex',\n                        justifyContent: 'space-between',\n                        height: '24px',\n                        opacity: 0.8,\n                        marginLeft: '0.25rem',\n                      }}\n                    >\n                      <TYPE.black fontSize={12}>\n                        <Trans>V3</Trans>\n                      </TYPE.black>\n                    </ButtonGray>\n                  )}\n                </RowFixed>\n                {trade ? (\n                  <RowFixed>\n                    <TradePrice\n                      price={trade.executionPrice}\n                      showInverted={showInverted}\n                      setShowInverted={setShowInverted}\n                    />\n                    <MouseoverTooltipContent\n                      content={<AdvancedSwapDetails trade={trade} allowedSlippage={allowedSlippage} />}\n                    >\n                      <StyledInfo />\n                    </MouseoverTooltipContent>\n                  </RowFixed>\n                ) : null}\n              </Row>\n            )}\n\n            <div>\n              {swapIsUnsupported ? (\n                <ButtonPrimary disabled={true}>\n                  <TYPE.main mb=\"4px\">\n                    <Trans>Unsupported Asset</Trans>\n                  </TYPE.main>\n                </ButtonPrimary>\n              ) : !account ? (\n                <ButtonLight onClick={toggleWalletModal}>\n                  <Trans>Connect Wallet</Trans>\n                </ButtonLight>\n              ) : showWrap ? (\n                <ButtonPrimary disabled={Boolean(wrapInputError)} onClick={onWrap}>\n                  {wrapInputError ??\n                    (wrapType === WrapType.WRAP ? (\n                      <Trans>Wrap</Trans>\n                    ) : wrapType === WrapType.UNWRAP ? (\n                      <Trans>Unwrap</Trans>\n                    ) : null)}\n                </ButtonPrimary>\n              ) : routeNotFound && userHasSpecifiedInputOutput ? (\n                <GreyCard style={{ textAlign: 'center' }}>\n                  <TYPE.main mb=\"4px\">\n                    {isLoadingRoute ? (\n                      <Dots>\n                        <Trans>Loading</Trans>\n                      </Dots>\n                    ) : singleHopOnly ? (\n                      <Trans>Insufficient liquidity for this trade. Try enabling multi-hop trades.</Trans>\n                    ) : (\n                      <Trans>Insufficient liquidity for this trade.</Trans>\n                    )}\n                  </TYPE.main>\n                </GreyCard>\n              ) : showApproveFlow ? (\n                <AutoRow style={{ flexWrap: 'nowrap', width: '100%' }}>\n                  <AutoColumn style={{ width: '100%' }} gap=\"12px\">\n                    <ButtonConfirmed\n                      onClick={handleApprove}\n                      disabled={\n                        approvalState !== ApprovalState.NOT_APPROVED ||\n                        approvalSubmitted ||\n                        signatureState === UseERC20PermitState.SIGNED\n                      }\n                      width=\"100%\"\n                      altDisabledStyle={approvalState === ApprovalState.PENDING} // show solid button while waiting\n                      confirmed={\n                        approvalState === ApprovalState.APPROVED || signatureState === UseERC20PermitState.SIGNED\n                      }\n                    >\n                      <AutoRow justify=\"space-between\" style={{ flexWrap: 'nowrap' }}>\n                        <span style={{ display: 'flex', alignItems: 'center' }}>\n                          <CurrencyLogo\n                            currency={currencies[Field.INPUT]}\n                            size={'20px'}\n                            style={{ marginRight: '8px', flexShrink: 0 }}\n                          />\n                          {/* we need to shorten this string on mobile */}\n                          {approvalState === ApprovalState.APPROVED || signatureState === UseERC20PermitState.SIGNED ? (\n                            <Trans>You can now trade {currencies[Field.INPUT]?.symbol}</Trans>\n                          ) : (\n                            <Trans>Allow the Uniswap Protocol to use your {currencies[Field.INPUT]?.symbol}</Trans>\n                          )}\n                        </span>\n                        {approvalState === ApprovalState.PENDING ? (\n                          <Loader stroke=\"white\" />\n                        ) : (approvalSubmitted && approvalState === ApprovalState.APPROVED) ||\n                          signatureState === UseERC20PermitState.SIGNED ? (\n                          <CheckCircle size=\"20\" color={theme.green1} />\n                        ) : (\n                          <MouseoverTooltip\n                            text={\n                              <Trans>\n                                You must give the Uniswap smart contracts permission to use your{' '}\n                                {currencies[Field.INPUT]?.symbol}. You only have to do this once per token.\n                              </Trans>\n                            }\n                          >\n                            <HelpCircle size=\"20\" color={'white'} style={{ marginLeft: '8px' }} />\n                          </MouseoverTooltip>\n                        )}\n                      </AutoRow>\n                    </ButtonConfirmed>\n                    <ButtonError\n                      onClick={() => {\n                        if (isExpertMode) {\n                          handleSwap()\n                        } else {\n                          setSwapState({\n                            tradeToConfirm: trade,\n                            attemptingTxn: false,\n                            swapErrorMessage: undefined,\n                            showConfirm: true,\n                            txHash: undefined,\n                          })\n                        }\n                      }}\n                      width=\"100%\"\n                      id=\"swap-button\"\n                      disabled={\n                        !isValid ||\n                        (approvalState !== ApprovalState.APPROVED && signatureState !== UseERC20PermitState.SIGNED) ||\n                        priceImpactTooHigh\n                      }\n                      error={isValid && priceImpactSeverity > 2}\n                    >\n                      <Text fontSize={16} fontWeight={500}>\n                        {priceImpactTooHigh ? (\n                          <Trans>High Price Impact</Trans>\n                        ) : priceImpactSeverity > 2 ? (\n                          <Trans>Swap Anyway</Trans>\n                        ) : (\n                          <Trans>Swap</Trans>\n                        )}\n                      </Text>\n                    </ButtonError>\n                  </AutoColumn>\n                </AutoRow>\n              ) : (\n                <ButtonError\n                  onClick={() => {\n                    if (isExpertMode) {\n                      handleSwap()\n                    } else {\n                      setSwapState({\n                        tradeToConfirm: trade,\n                        attemptingTxn: false,\n                        swapErrorMessage: undefined,\n                        showConfirm: true,\n                        txHash: undefined,\n                      })\n                    }\n                  }}\n                  id=\"swap-button\"\n                  disabled={!isValid || priceImpactTooHigh || !!swapCallbackError}\n                  error={isValid && priceImpactSeverity > 2 && !swapCallbackError}\n                >\n                  <Text fontSize={20} fontWeight={500}>\n                    {swapInputError ? (\n                      swapInputError\n                    ) : priceImpactTooHigh ? (\n                      <Trans>Price Impact Too High</Trans>\n                    ) : priceImpactSeverity > 2 ? (\n                      <Trans>Swap Anyway</Trans>\n                    ) : (\n                      <Trans>Swap</Trans>\n                    )}\n                  </Text>\n                </ButtonError>\n              )}\n              {isExpertMode && swapErrorMessage ? <SwapCallbackError error={swapErrorMessage} /> : null}\n            </div>\n          </AutoColumn>\n        </Wrapper>\n      </AppBody>\n      <SwitchLocaleLink />\n      {!swapIsUnsupported ? null : (\n        <UnsupportedCurrencyFooter show={swapIsUnsupported} currencies={[currencies.INPUT, currencies.OUTPUT]} />\n      )}\n    </>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}