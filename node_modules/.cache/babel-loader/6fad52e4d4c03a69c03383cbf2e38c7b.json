{"ast":null,"code":"import _slicedToArray from\"/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{i18n}from\"@lingui/core\";import{CurrencyAmount,Percent}from'@uniswap/sdk-core';import{Position}from'@uniswap/v3-sdk';import{usePool}from'hooks/usePools';import{useActiveWeb3React}from'hooks/web3';import{useToken}from'hooks/Tokens';import{useV3PositionFees}from'hooks/useV3PositionFees';import{useCallback,useMemo}from'react';import{selectPercent}from'./actions';import{unwrappedToken}from'utils/unwrappedToken';import{useAppDispatch,useAppSelector}from'state/hooks';export function useBurnV3State(){return useAppSelector(function(state){return state.burnV3;});}export function useDerivedV3BurnInfo(position){var asWETH=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var _useActiveWeb3React=useActiveWeb3React(),account=_useActiveWeb3React.account;var _useBurnV3State=useBurnV3State(),percent=_useBurnV3State.percent;var token0=useToken(position===null||position===void 0?void 0:position.token0);var token1=useToken(position===null||position===void 0?void 0:position.token1);var _usePool=usePool(token0!==null&&token0!==void 0?token0:undefined,token1!==null&&token1!==void 0?token1:undefined,position===null||position===void 0?void 0:position.fee),_usePool2=_slicedToArray(_usePool,2),pool=_usePool2[1];var positionSDK=useMemo(function(){return pool&&(position===null||position===void 0?void 0:position.liquidity)&&typeof(position===null||position===void 0?void 0:position.tickLower)==='number'&&typeof(position===null||position===void 0?void 0:position.tickUpper)==='number'?new Position({pool:pool,liquidity:position.liquidity.toString(),tickLower:position.tickLower,tickUpper:position.tickUpper}):undefined;},[pool,position]);var liquidityPercentage=new Percent(percent,100);var discountedAmount0=positionSDK?liquidityPercentage.multiply(positionSDK.amount0.quotient).quotient:undefined;var discountedAmount1=positionSDK?liquidityPercentage.multiply(positionSDK.amount1.quotient).quotient:undefined;var liquidityValue0=token0&&discountedAmount0?CurrencyAmount.fromRawAmount(asWETH?token0:unwrappedToken(token0),discountedAmount0):undefined;var liquidityValue1=token1&&discountedAmount1?CurrencyAmount.fromRawAmount(asWETH?token1:unwrappedToken(token1),discountedAmount1):undefined;var _useV3PositionFees=useV3PositionFees(pool!==null&&pool!==void 0?pool:undefined,position===null||position===void 0?void 0:position.tokenId,asWETH),_useV3PositionFees2=_slicedToArray(_useV3PositionFees,2),feeValue0=_useV3PositionFees2[0],feeValue1=_useV3PositionFees2[1];var outOfRange=pool&&position?pool.tickCurrent<position.tickLower||pool.tickCurrent>position.tickUpper:false;var error;if(!account){error=/*i18n*/i18n._(\"Connect Wallet\");}if(percent===0){var _error;error=(_error=error)!==null&&_error!==void 0?_error:/*i18n*/i18n._(\"Enter a percent\");}return{position:positionSDK,liquidityPercentage:liquidityPercentage,liquidityValue0:liquidityValue0,liquidityValue1:liquidityValue1,feeValue0:feeValue0,feeValue1:feeValue1,outOfRange:outOfRange,error:error};}export function useBurnV3ActionHandlers(){var dispatch=useAppDispatch();var onPercentSelect=useCallback(function(percent){dispatch(selectPercent({percent:percent}));},[dispatch]);return{onPercentSelect:onPercentSelect};}","map":{"version":3,"sources":["/Users/nakanoteppei/Documents/Jupiter/Codes/bulldogswap.github.io/src/state/burn/v3/hooks.ts"],"names":["CurrencyAmount","Percent","Position","usePool","useActiveWeb3React","useToken","useV3PositionFees","useCallback","useMemo","selectPercent","unwrappedToken","useAppDispatch","useAppSelector","useBurnV3State","state","burnV3","useDerivedV3BurnInfo","position","asWETH","account","percent","token0","token1","undefined","fee","pool","positionSDK","liquidity","tickLower","tickUpper","toString","liquidityPercentage","discountedAmount0","multiply","amount0","quotient","discountedAmount1","amount1","liquidityValue0","fromRawAmount","liquidityValue1","tokenId","feeValue0","feeValue1","outOfRange","tickCurrent","error","useBurnV3ActionHandlers","dispatch","onPercentSelect"],"mappings":"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","sourcesContent":["import { CurrencyAmount, Percent, Currency } from '@uniswap/sdk-core'\nimport { Position } from '@uniswap/v3-sdk'\nimport { usePool } from 'hooks/usePools'\nimport { useActiveWeb3React } from 'hooks/web3'\nimport { useToken } from 'hooks/Tokens'\nimport { useV3PositionFees } from 'hooks/useV3PositionFees'\nimport { useCallback, useMemo } from 'react'\nimport { PositionDetails } from 'types/position'\n\nimport { AppState } from '../../index'\nimport { selectPercent } from './actions'\nimport { unwrappedToken } from 'utils/unwrappedToken'\nimport { useAppDispatch, useAppSelector } from 'state/hooks'\nimport { t } from '@lingui/macro'\n\nexport function useBurnV3State(): AppState['burnV3'] {\n  return useAppSelector((state) => state.burnV3)\n}\n\nexport function useDerivedV3BurnInfo(\n  position?: PositionDetails,\n  asWETH = false\n): {\n  position?: Position\n  liquidityPercentage?: Percent\n  liquidityValue0?: CurrencyAmount<Currency>\n  liquidityValue1?: CurrencyAmount<Currency>\n  feeValue0?: CurrencyAmount<Currency>\n  feeValue1?: CurrencyAmount<Currency>\n  outOfRange: boolean\n  error?: string\n} {\n  const { account } = useActiveWeb3React()\n  const { percent } = useBurnV3State()\n\n  const token0 = useToken(position?.token0)\n  const token1 = useToken(position?.token1)\n\n  const [, pool] = usePool(token0 ?? undefined, token1 ?? undefined, position?.fee)\n\n  const positionSDK = useMemo(\n    () =>\n      pool && position?.liquidity && typeof position?.tickLower === 'number' && typeof position?.tickUpper === 'number'\n        ? new Position({\n            pool,\n            liquidity: position.liquidity.toString(),\n            tickLower: position.tickLower,\n            tickUpper: position.tickUpper,\n          })\n        : undefined,\n    [pool, position]\n  )\n\n  const liquidityPercentage = new Percent(percent, 100)\n\n  const discountedAmount0 = positionSDK\n    ? liquidityPercentage.multiply(positionSDK.amount0.quotient).quotient\n    : undefined\n  const discountedAmount1 = positionSDK\n    ? liquidityPercentage.multiply(positionSDK.amount1.quotient).quotient\n    : undefined\n\n  const liquidityValue0 =\n    token0 && discountedAmount0\n      ? CurrencyAmount.fromRawAmount(asWETH ? token0 : unwrappedToken(token0), discountedAmount0)\n      : undefined\n  const liquidityValue1 =\n    token1 && discountedAmount1\n      ? CurrencyAmount.fromRawAmount(asWETH ? token1 : unwrappedToken(token1), discountedAmount1)\n      : undefined\n\n  const [feeValue0, feeValue1] = useV3PositionFees(pool ?? undefined, position?.tokenId, asWETH)\n\n  const outOfRange =\n    pool && position ? pool.tickCurrent < position.tickLower || pool.tickCurrent > position.tickUpper : false\n\n  let error: string | undefined\n  if (!account) {\n    error = t`Connect Wallet`\n  }\n  if (percent === 0) {\n    error = error ?? t`Enter a percent`\n  }\n  return {\n    position: positionSDK,\n    liquidityPercentage,\n    liquidityValue0,\n    liquidityValue1,\n    feeValue0,\n    feeValue1,\n    outOfRange,\n    error,\n  }\n}\n\nexport function useBurnV3ActionHandlers(): {\n  onPercentSelect: (percent: number) => void\n} {\n  const dispatch = useAppDispatch()\n\n  const onPercentSelect = useCallback(\n    (percent: number) => {\n      dispatch(selectPercent({ percent }))\n    },\n    [dispatch]\n  )\n\n  return {\n    onPercentSelect,\n  }\n}\n"]},"metadata":{},"sourceType":"module"}